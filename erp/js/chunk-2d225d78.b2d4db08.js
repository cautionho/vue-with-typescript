(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d225d78"],{e5b4:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"P-Inline-Block "},[r("Col",[r("Button",{staticClass:"P-MR-10",attrs:{type:"primary"},on:{click:function(t){return e.OpenModal({Type:0})}}},[e._v("添加分类")]),r("Modal",{attrs:{title:["添加分类","编辑分类","移动分类"][e.ModalType],"mask-closable":!1,width:600},on:{"on-cancel":function(t){return e.ClearModal(!1)}},model:{value:e.IsShowModal,callback:function(t){e.IsShowModal=t},expression:"IsShowModal"}},[r("Form",{ref:"OperateForm",attrs:{model:e.OperateForm,rules:e.OperateFormRule,name:"OperateForm",onsubmit:"return false","label-width":110}},[0!==e.ModalType?r("Form-item",{attrs:{label:"分类ID："}},[e._v(e._s(e.CustomCategoryID||"-"))]):e._e(),r("Form-item",{attrs:{label:"店铺：",prop:"StoreId"}},[0===e.ModalType?r("Select",{attrs:{onChange:e.SycnChangeStore,placeholder:"请选择店铺",options:e.PropStoreDrop},model:{value:e.OperateForm.StoreId,callback:function(t){e.$set(e.OperateForm,"StoreId",t)},expression:"OperateForm.StoreId"}}):r("p",[e._v(e._s(e.EbayStoreName||"-"))])],1),r("Form-item",{attrs:{label:"分类名称：",prop:"CustomCategoryName"}},[2===e.ModalType?r("p",[e._v(e._s(e.OperateForm.CustomCategoryName||"-"))]):r("Input",{ref:"CustomCategoryName_Ipt",attrs:{placeholder:"请输入分类名称"},model:{value:e.OperateForm.CustomCategoryName,callback:function(t){e.$set(e.OperateForm,"CustomCategoryName",t)},expression:"OperateForm.CustomCategoryName"}})],1),r("Form-item",{attrs:{label:"上级分类：",prop:"DestinationParentCategoryID"}},[1===e.ModalType?r("p",[e._v(e._s(e.CustomCategoryParentName||"-"))]):r("Select",{attrs:{placeholder:"请选择上级分类",options:e.DropDestinationParentCategoryID},model:{value:e.OperateForm.DestinationParentCategoryID,callback:function(t){e.$set(e.OperateForm,"DestinationParentCategoryID",t)},expression:"OperateForm.DestinationParentCategoryID"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.SubModal}},[e._v(e._s(["添加","提交","修改"][e.ModalType]))]),r("Button",{on:{click:function(t){return e.ClearModal(!1)}}},[e._v("取消")])],1)],1)],1)],1)},o=[],s=(r("cee1"),r("6bf8"),r("b449"),r("5d83")),n=r("3231"),i=r("064d"),l=r("46d7"),p=r("631e"),u=r("4a81"),m=r("d11d"),c=r("9550"),C=function(e){Object(l["a"])(r,e);var t=Object(p["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.IsShowModal=!1,e.ModalType=0,e.CustomCategoryID=0,e.EbayStoreName="",e.CustomCategoryParentName="",e.DropDestinationParentCategoryID=[],e.OperateForm=new c["a"].EBayCustomClassModify,e.OperateFormRule={StoreId:[{required:!0,message:"请选择店铺",trigger:"change",type:"number"}],CustomCategoryName:[{required:!0,message:"请输入分类名称",trigger:"change"}]},e}return Object(i["a"])(r,[{key:"EmitChange",value:function(e){}},{key:"OpenModal",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.Type,a=t.Detail,this.ModalType=r,a&&(this.$set(this,"CustomCategoryID",a.CustomCategoryID),this.$set(this,"EbayStoreName",a.EbayStoreName),this.$set(this,"CustomCategoryParentName",a.CustomCategoryParentName),this.$set(this,"OperateForm",new c["a"].EBayCustomClassModify(a.EbayStoreId,a.CustomCategoryParentID,a.CustomCategoryID,a.CustomCategoryName,a.Order))),e.t0=r,e.next=0===e.t0||1===e.t0?6:2===e.t0?8:11;break;case 6:return this.$nextTick((function(){o.$refs["CustomCategoryName_Ipt"].focus()})),e.abrupt("break",11);case 8:return e.next=10,this.GetStoreCategoryDropList(this.OperateForm.StoreId);case 10:return e.abrupt("break",11);case 11:this.IsShowModal=!0;case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"SycnChangeStore",value:function(e){e?this.GetStoreCategoryDropList(e):(this.$set(this.OperateForm,"DestinationParentCategoryID",""),this.$set(this,"DropDestinationParentCategoryID",[]))}},{key:"GetStoreCategoryDropList",value:function(e){var t=this;return new Promise((function(r){t.$Request.Post({Server:t.$Server.Sales,Api:{Address:t.$Api.GetStoreCategoryDropList,Login:!0},Data:e,Callback:function(e){e.IsSuccess||t.$Request.Error(e),t.$set(t,"DropDestinationParentCategoryID",e.Data.DropList||[]),r()}})}))}},{key:"ClearModal",value:function(e){var t=this;this.IsShowModal=!1,this.EmitChange(e),this.$nextTick((function(){t.DropDestinationParentCategoryID.splice(0),t.$set(t,"OperateForm",new c["a"].EBayCustomClassModify),t.$refs["OperateForm"].resetFields()}))}},{key:"SubModal",value:function(){var e=this;this.$refs["OperateForm"].validate((function(t){t&&(e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Sales,Api:{Address:e.$Api.SetStoreCategories,Login:!0},Data:{StoreId:e.OperateForm.StoreId,DestinationParentCategoryID:e.OperateForm.DestinationParentCategoryID,CustomCategoryID:e.ModalType?e.OperateForm.CustomCategoryID:0,CustomCategoryName:e.OperateForm.CustomCategoryName,Order:e.OperateForm.Order,OperationType:1===e.ModalType?4:e.ModalType+1},Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("warning",["添加分类成功","编辑分类成功","移动分类成功"][e.ModalType]),e.ClearModal(!0)):e.$Request.Error(t),e.$UI.Loading.Hide()}}))}))}}]),r}(m["d"]);u["a"]([Object(m["c"])()],C.prototype,"PropStoreDrop",void 0),u["a"]([Object(m["b"])()],C.prototype,"EmitChange",null),C=u["a"]([Object(m["a"])({name:"ModifyEBayCustomStoreClass",components:{}})],C);var y=C,d=y,g=r("4023"),h=Object(g["a"])(d,a,o,!1,null,null,null);t["default"]=h.exports}}]);