(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-746eeca4"],{"2c6c8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Modal",{staticClass:"Container-Tabs",attrs:{title:e.ModalTitle,width:1e3},on:{"on-cancel":e.CancelModal},model:{value:e.ViewModal,callback:function(t){e.ViewModal=t},expression:"ViewModal"}},[r("Tabs",{attrs:{type:"card",value:e.AfterSalesDetailsTabs,name:"AfterSalesDetailsTab"},on:{"on-click":e.ChangeTabs}},[r("TabPane",{attrs:{label:"基本信息",name:"Base",tab:"AfterSalesDetailsTab",index:1}},[e.ViewModal?r("Form",{attrs:{inline:"","label-width":100,onsubmit:"rerurn false;"}},[r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"编号："}},[e._v(" "+e._s(e.AfterSalesOrderDetails.OrderInfo.AfterSaleCode)+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"发货单号："}},[r("a",{on:{click:function(t){return e.EmitShipOrderDetails(e.AfterSalesOrderDetails.OrderInfo.OriginalShipOrderCode)}}},[e._v(e._s(e.AfterSalesOrderDetails.OrderInfo.OriginalShipOrderCode))])]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"店铺："}},[e._v(" "+e._s(e.AfterSalesOrderDetails.OrderInfo.StoreName)+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"原因："}},[e._v(" "+e._s(e.AfterSalesOrderDetails.OrderInfo.Reason)+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"客服："}},[e._v(" "+e._s(e.AfterSalesOrderDetails.OrderInfo.CustomerName)+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"客服主管："}},[e._v(" "+e._s(e.AfterSalesOrderDetails.OrderInfo.SupervisorName)+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"订单金额："}},[e._v(" "+e._s(e.AfterSalesOrderDetails.OrderInfo.OriginalPayment)+" "+e._s(e.AfterSalesOrderDetails.OrderInfo.Currency)+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"退/补差价金额："}},[e._v(" "+e._s(e.AfterSalesOrderDetails.OrderInfo.RefundOrDiffAmount)+" "+e._s(e.AfterSalesOrderDetails.OrderInfo.Currency)+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"处理方式："}},[e._v(" "+e._s(e.AfterSalesOrderDetails.OrderInfo?e.$Enums.CustomerService.ProcessType[e.AfterSalesOrderDetails.OrderInfo.ProcessType]:"-")+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"申请时间："}},[e._v(" "+e._s(e.$UI.Render.Date(e.AfterSalesOrderDetails.OrderInfo.Created,!0))+" ")]),r("FormItem",{staticClass:"P-W-100-Percent P-MB-10",attrs:{label:"备注："}},[r("Tooltip",{staticClass:"P-LINE-1",attrs:{content:e.AfterSalesOrderDetails.OrderInfo.Remark}},[e._v(e._s(e.AfterSalesOrderDetails.OrderInfo.Remark))])],1),e.AfterSalesOrderDetails.TransactionDetails.length?r("Table",{attrs:{"span-method":e.HandleSpan,columns:e.GetTransitionsCol(),data:e.TransitionDetails,size:"small",stripe:"",height:240}}):e._e(),e.IsReview?r("FormItem",{staticClass:"P-W-100-Percent P-MB-0 P-MT-10",attrs:{label:"审核备注："}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"审核备注"},model:{value:e.Remark,callback:function(t){e.Remark=t},expression:"Remark"}})],1):e._e()],1):e._e()],1),r("TabPane",{attrs:{label:"问题货品",name:"Issue",tab:"AfterSalesDetailsTab",index:2}},[r("Table",{attrs:{columns:e.IssueItemsCol,data:e.AfterSalesOrderDetails.IssueDetails,height:500,size:"small",stripe:""}})],1),e.AfterSalesOrderDetails.OrderInfo&&e.AfterSalesOrderDetails.OrderInfo.ProcessType<3?r("TabPane",{attrs:{label:"重发货品",name:"Resend",tab:"AfterSalesDetailsTab",index:3}},[r("Table",{attrs:{columns:e.ResendItemsCol,data:e.AfterSalesOrderDetails.ReSendDetails,height:330,size:"small",stripe:""}}),r("Form",{attrs:{inline:"","label-width":100,onsubmit:"rerurn false;"}},[r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"收件人："}},[e._v(" "+e._s(e.GetAddressValue("BuyerFullName"))+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"省/州："}},[e._v(" "+e._s(e.GetAddressValue("BuyerState"))+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"城市："}},[e._v(" "+e._s(e.GetAddressValue("BuyerCity"))+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"地址1："}},[e._v(" "+e._s(e.GetAddressValue("BuyerStreet1"))+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"地址2："}},[e._v(" "+e._s(e.GetAddressValue("BuyerStreet2"))+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"邮编："}},[e._v(" "+e._s(e.GetAddressValue("BuyerZipCode"))+" ")]),r("FormItem",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"电话："}},[e._v(" "+e._s(e.GetAddressValue("BuyerPhone"))+" ")])],1)],1):e._e(),r("TabPane",{attrs:{label:"操作记录",name:"History",tab:"AfterSalesDetailsTab",index:4}},[r("Table",{attrs:{columns:e.HistoryCol,data:e.AfterSalesOrderDetails.Hisotrys,height:500,size:"small",stripe:""}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[e.IsReview?r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.PostReview(1)}}},[e._v("通过")]):e._e(),e.IsReview?r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.PostReview(2)}}},[e._v("退回修改")]):e._e(),e.IsReview?r("Button",{attrs:{type:"error"},on:{click:function(t){return e.PostReview(3)}}},[e._v("不通过")]):e._e(),r("Button",{on:{click:e.CancelModal}},[e._v("返回")])],1),r("BigPic",{ref:"BigPic"})],1)},s=[],n=(r("d9b9"),r("9660"),r("4d62"),r("6bf8"),r("0b78"),r("e24e")),i=r("3231"),l=r("064d"),o=r("46d7"),c=r("631e"),d=r("4a81"),u=r("d11d"),m=r("4606"),f=function(e){Object(o["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.ViewModal=!1,e.ModalTitle="售后单详情",e.AfterSalesDetailsTabs="Base",e.IsReview=!1,e.Remark="",e.AfterSalesOrderDetails=new m["a"].AfterSalesDetails,e.TransitionDetails=[],e.Platform=1,e.TransitionDetailsCol1=[{title:"交易号",key:"PaypalTransactionId",width:120},{title:"SKU编号",key:"SkuCode",width:130},{title:"SKU名称",key:"SkuName",render:function(e,t){return e("Tooltip",{props:{content:t.row.SkuName},class:"P-LINE-1"},t.row.SkuName)}},{title:"ItemId",key:"ItemId",width:120},{title:"数量",key:"Quantity",width:100},{title:"交易金额",width:120,render:function(e,t){return e("span","".concat(t.row.PayAmount," ").concat(t.row.Currency).concat(t.row.RetiredAmount>0?"(已退款"+t.row.RetiredAmount+t.row.Currency+")":""))}},{title:"退款金额",width:120,render:function(e,t){return e("span","".concat(t.row.ReAmount," ").concat(t.row.Currency))}}],e.TransitionDetailsCol5=[{title:"LineNumber",key:"PaypalTransactionId",width:120},{title:"SKU编号",key:"SkuCode",width:130},{title:"SKU名称",key:"SkuName",render:function(e,t){return e("Tooltip",{props:{content:t.row.SkuName},class:"P-LINE-1"},t.row.SkuName)}},{title:"数量",width:100,key:"Quantity"},{title:"交易金额",key:"PayAmount",width:120,render:function(e,t){return e("span","".concat(t.row.PayAmount," ").concat(t.row.Currency).concat(t.row.RetiredAmount>0?"(已退款"+t.row.RetiredAmount+t.row.Currency+")":""))}},{title:"退款金额",key:"PayAmount",width:120,render:function(e,t){return e("span","".concat(t.row.ReAmount," ").concat(t.row.Currency))}}],e.TransitionDetailsCol17=[{title:"LineItems ID",key:"PaypalTransactionId",width:120},{title:"SKU编号",key:"SkuCode",width:130},{title:"SKU名称",key:"SkuName",render:function(e,t){return e("Tooltip",{props:{content:t.row.SkuName},class:"P-LINE-1"},t.row.SkuName)}},{title:"数量",width:100,key:"Quantity"},{title:"交易金额",width:120,render:function(e,t){return e("span","".concat(t.row.PayAmount," ").concat(t.row.Currency).concat(t.row.RetiredAmount>0?"(已退款"+t.row.RetiredAmount+t.row.Currency+")":""))}},{title:"退款金额",width:160,render:function(e,t){return e("span","".concat(t.row.ReAmount," ").concat(t.row.Currency))}}],e.IssueItemsCol=[{title:"图片",width:80,align:"center",render:function(t,r){return t("div",{class:"P-List-Img",on:{click:function(){e.$refs.BigPic.Trigger("".concat(e.$Server.File,"/").concat(r.row.ImageUrl||r.row.DefaultImage))}},style:{backgroundImage:"url(".concat(e.$Server.File,"/").concat(r.row.ImageUrl||r.row.DefaultImage,")")}})}},{title:"SKU编号",width:130,key:"SkuCode"},{title:"SKU名称",render:function(e,t){return e("Tooltip",{props:{content:t.row.SkuName},class:"P-LINE-1"},t.row.SkuName)}},{title:"购买数量",width:120,render:function(e,t){return e("span",t.row.Quantity||t.row.BuyCount)}},{title:"原因",width:120,key:"Reason"},{title:"重发/问题数量",width:120,key:"IssueCount"}],e.ResendItemsCol=[{title:"图片",width:80,align:"center",render:function(t,r){return t("div",{class:"P-List-Img",on:{click:function(){e.$refs.BigPic.Trigger("".concat(e.$Server.File,"/").concat(r.row.ImageUrl||r.row.DefaultImage))}},style:{backgroundImage:"url(".concat(e.$Server.File,"/").concat(r.row.ImageUrl||r.row.DefaultImage,")")}})}},{title:"SKU编号",width:130,key:"SkuCode"},{title:"SKU名称",render:function(e,t){return e("Tooltip",{props:{content:t.row.SkuName},class:"P-LINE-1"},t.row.SkuName)}},{title:"重发数量",width:120,key:"ReSendCount"}],e.HistoryCol=[{title:"编号",key:"Id",width:80},{title:"操作人",key:"Operator",width:120},{title:"操作记录",render:function(e,t){return e("Tooltip",{props:{content:t.row.OperateLog},class:"P-LINE-1"},t.row.OperateLog)}},{title:"操作时间",width:160,render:function(t,r){return t("span",e.$UI.Render.Date(r.row.OperateTime,!0))}}],e}return Object(l["a"])(r,[{key:"EmitShipOrderDetails",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$set(this,"AfterSalesDetailsTabs","Base"),this.$set(this,"IsReview",t),this.$set(this,"ModalTitle",t?"审核售后单":"售后单详情"),"number"===typeof e?this.GetAfterSalesOrderDetails(e):this.GetAfterSalesOrderDetails(e.AfterSalerId)}},{key:"GetAfterSalesOrderDetails",value:function(e){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:this.$Api.AfterSaleDetail,Login:!0},Data:e,Callback:function(e){if(t.$UI.Loading.Hide(),e.IsSuccess){t.$set(t,"AfterSalesOrderDetails",e.Data.Data);var r=t.AfterSalesOrderDetails.OrderInfo.OriginalShipOrderCode.slice(0,1);t.$set(t,"Platform","E"===r?1:"L"===r?5:"R"===r?17:0),t.$set(t,"TransitionDetails",t.GetTransitionDatas()),t.$set(t,"ViewModal",!0)}else t.$Request.Error(e)}})}},{key:"GetTransitionDatas",value:function(){var e=[];return this.AfterSalesOrderDetails.TransactionDetails.forEach((function(t,r){t["Num"]=r++;var a,s=JSON.parse(JSON.stringify(t)),i=Object(n["a"])(t.SkuInfo);try{for(i.s();!(a=i.n()).done;){var l=a.value;delete s.SkuInfo;var o=Object.assign(l,s,{Span:t.SkuInfo.length,Num:r++});e.push(o)}}catch(c){i.e(c)}finally{i.f()}})),e}},{key:"GetAddressValue",value:function(e){return this.AfterSalesOrderDetails.ReSendDetails.length?this.AfterSalesOrderDetails.ReSendDetails[0].Address[e]:"-"}},{key:"HandleSpan",value:function(e){var t=e.row,r=(e.column,e.rowIndex),a=e.columnIndex;return 0===a?0===r||t.Num!==this.TransitionDetails[r-1].Num?{rowspan:t.Span,colspan:1}:{rowspan:0,colspan:0}:{rowspan:1,colspan:1}}},{key:"GetTransitionsCol",value:function(){return this["TransitionDetailsCol".concat(this.Platform)]}},{key:"ChangeTabs",value:function(e){this.$set(this,"AfterSalesDetailsTabs",e)}},{key:"PostReview",value:function(e){var t=this;this.$UI.Tips.Modal({Type:"confirm",Content:"是否确认执行".concat(1===e?"审核通过":2===e?"退回修改":"审核不通过","操作"),Enter:!1,Callback:function(r){if(r){var a=1===e?t.$Api.AfterSalePass:2===e?t.$Api.AfterSaleReturnToModify:t.$Api.AfterSaleNoPass;t.$UI.Loading.Show(),t.$Request.Post({Server:t.$Server.CustomerService,Api:{Address:a,Login:!0},Data:{Id:[t.AfterSalesOrderDetails.OrderInfo.AfterSalerId],Remark:t.Remark},Callback:function(e){e.IsSuccess?(t.$UI.Tips.Floating("success","审核成功"),t.EmitOperateSuccess(),t.CancelModal()):(t.$UI.Loading.Hide(),t.$Request.Error(e))}})}}})}},{key:"CancelModal",value:function(){this.$set(this,"Remark",""),this.$set(this,"TransitionDetails",[]),this.$set(this,"ViewModal",!1)}}]),r}(u["d"]);d["a"]([Object(u["b"])()],f.prototype,"EmitShipOrderDetails",null),d["a"]([Object(u["b"])()],f.prototype,"EmitOperateSuccess",null),f=d["a"]([Object(u["a"])({name:"AfterSalesOrderDetails",components:{BigPic:function(){return r.e("chunk-c0a1d894").then(r.bind(null,"6156"))}}})],f);var S=f,w=S,I=r("4023"),P=Object(I["a"])(w,a,s,!1,null,"0c872920",null);t["default"]=P.exports}}]);