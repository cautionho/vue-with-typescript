(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221825"],{cb3c:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"P-Inline-Block"},[n("Col",[n("Button",{attrs:{type:"primary"},on:{click:e.$Trigger}},[e._v("完成批次")])],1)],1)},r=[],a=(n("76bb"),n("e2e5"),n("4d62"),n("6ed5"),n("3231")),o=n("064d"),c=n("46d7"),s=n("631e"),u=n("4a81"),l=n("d11d"),d=n("1f41"),h=function(e){Object(c["a"])(n,e);var t=Object(s["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.apply(this,arguments),e.CurSelectedIds=[],e}return Object(o["a"])(n,[{key:"EmitChange",value:function(e,t){}},{key:"$Trigger",value:function(e){var t=this,n=e.SelectedData,i=void 0===n?[]:n;0!=i.length?i.some((function(e){return"mp"==e.BatchCode.slice(0,2).toLowerCase()}))&&i.some((function(e){return"p"==e.BatchCode.slice(0,2).toLowerCase()}))?this.$UI.Tips.Floating("warning","请选择相同明细类型的拣货批次进行操作"):i.some((function(e){return 4==e.Status}))?this.$UI.Tips.Floating("warning","请选择状态为待拣货、已打印或部分拣货的拣货批次进行操作"):i.some((function(e){return"mp"==e.BatchCode.slice(0,2).toLowerCase()}))&&i.reduce((function(e,t){return e+t.OrderCount}),0)>100?this.$UI.Tips.Floating("warning","生成拣货批次的多品订单不能超过100条"):i.some((function(e){return"p"==e.BatchCode.slice(0,2).toLowerCase()}))&&i.reduce((function(e,t){return e+t.OrderCount}),0)>500?this.$UI.Tips.Floating("warning","生成拣货批次的单品订单不能超过500条"):(this.CurSelectedIds=i.map((function(e){return e.Id})),this.$UI.Tips.Modal({Type:"confirm",Content:"选中的批次将变为已完成，批次下未打包的订单将释放回去已确认状态，确认完成？",Enter:!1,Callback:function(e){e&&t.PostDoneBatche()}})):this.$UI.Tips.Floating("warning","请选择状态为待拣货、已打印或部分拣货的拣货批次进行操作")}},{key:"PostDoneBatche",value:function(){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.BatchOrderReCreateBatchOrder,Login:!0},Data:new d["a"].PickBatchFinish(void 0,this.CurSelectedIds),Callback:function(t){e.$UI.Loading.Hide(),t.IsSuccess?e.$UI.Tips.Modal({Type:"confirm",Content:"完成批次成功",Callback:function(t){e.EmitChange(!0)}}):e.$Request.Error(t)}})}}]),n}(l["d"]);u["a"]([Object(l["b"])()],h.prototype,"EmitChange",null),h=u["a"]([Object(l["a"])({name:"DoneBatche"})],h);var p=h,C=p,f=n("4023"),g=Object(f["a"])(C,i,r,!1,null,null,null);t["default"]=g.exports}}]);