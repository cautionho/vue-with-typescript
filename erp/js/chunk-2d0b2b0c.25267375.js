(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2b0c"],{"24d8":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",{staticClass:"P-Inline-Block"},[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("导出售后单")]),r("Modal",{attrs:{title:"导出售后单"},on:{"on-cancel":e.CancelModal},model:{value:e.ExportModal,callback:function(t){e.ExportModal=t},expression:"ExportModal"}},[r("Form",{ref:"ExportForm",attrs:{model:e.ExportForm,rules:e.ExportRules,"label-width":90,onsubmit:"return false;"}},[r("FormItem",{attrs:{label:"平台：",prop:"Platform"}},[r("Select",{attrs:{placeholder:"选择平台",options:e.PlatformDrop},model:{value:e.ExportForm.Platform,callback:function(t){e.$set(e.ExportForm,"Platform",t)},expression:"ExportForm.Platform"}})],1),r("FormItem",{attrs:{label:"添加时间：",prop:"TimeRange"}},[r("DatePicker",{staticClass:"P-W-100-Percent",attrs:{type:"datetimerange",placeholder:"选择时间区间","split-panels":"",clearable:"",transfer:""},on:{"on-change":e.ChangeDateTimeRange},model:{value:e.ExportForm.TimeRange,callback:function(t){e.$set(e.ExportForm,"TimeRange",t)},expression:"ExportForm.TimeRange"}})],1),r("FormItem",{attrs:{label:"处理结果：",prop:"AfterSaleOrderType"}},[r("Select",{attrs:{placeholder:"选择处理结果",options:e.ProcessTypeDrop,multiple:""},model:{value:e.ExportForm.AfterSaleOrderType,callback:function(t){e.$set(e.ExportForm,"AfterSaleOrderType",t)},expression:"ExportForm.AfterSaleOrderType"}})],1),r("FormItem",{attrs:{label:"售后单状态：",prop:"AfterSaleOrderStatus"}},[r("Select",{attrs:{placeholder:"选择售后单状态",options:e.StatusDrop,multiple:""},model:{value:e.ExportForm.AfterSaleOrderStatus,callback:function(t){e.$set(e.ExportForm,"AfterSaleOrderStatus",t)},expression:"ExportForm.AfterSaleOrderStatus"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},o=[],l=(r("6412"),r("3231")),s=r("064d"),n=r("46d7"),i=r("631e"),p=r("4a81"),c=r("d11d"),u=r("4606"),m=function(e){Object(n["a"])(r,e);var t=Object(i["a"])(r);function r(){var e;return Object(l["a"])(this,r),e=t.apply(this,arguments),e.ExportModal=!1,e.PlatformDrop=e.$Utils.GetEnumArr(e.$Enums.Sales.Platform),e.ProcessTypeDrop=e.$Utils.GetEnumArr(e.$Enums.CustomerService.ProcessType),e.StatusDrop=e.$Utils.GetEnumArr(e.$Enums.CustomerService.AfterSalesStatus),e.ExportForm=new u["a"].AfterSalesOrderExport,e.ExportRules={Platform:[{required:!0,message:"请选择平台",trigger:"change",type:"number"},{pattern:e.$Pattern.PositiveNotZeroInt,message:"请选择平台"}],AfterSaleOrderType:[{required:!0,message:"请选择处理结果",trigger:"change",type:"array"}],TimeRange:[{required:!0,trigger:"change",validator:e.ValidateDateTimeRange}]},e}return Object(s["a"])(r,[{key:"Trigger",value:function(){var e=this;this.$set(this,"ExportModal",!0),this.$nextTick((function(){e.$refs.ExportForm.resetFields()}))}},{key:"ChangeDateTimeRange",value:function(e){this.$set(this.ExportForm,"StatrTime",e[0]),this.$set(this.ExportForm,"EndTime",e[1])}},{key:"Validate",value:function(){var e=this;this.$refs.ExportForm.validate((function(t){t&&e.PostExport()}))}},{key:"PostExport",value:function(){var e=this,t=JSON.parse(JSON.stringify(this.ExportForm));delete t.TiimeRange,this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:this.$Api.AfterSaleWalmartExport,Login:!0},Data:t,Callback:function(t){e.$UI.Loading.Hide(),t.IsSuccess?e.$UI.Tips.Modal({Type:"success",Content:"创建导出售后单任务成功，请到报表-导出管理模块查看目前正在进行的导出任务，并在导出成功后可以下载对应数据。",Callback:function(t){e.CancelModal()}}):e.$Request.Error(t)}})}},{key:"CancelModal",value:function(){var e=this;this.$set(this,"ExportModal",!1),this.$nextTick((function(){e.$refs.ExportForm.resetFields()}))}},{key:"ValidateDateTimeRange",value:function(e,t,r){if(t.every((function(e){return""!==e}))){var a=7776e6;return!(+new Date(t[1])-+new Date(t[0])>a)||(r("时间区间不可大于3个月"),!1)}return r("请选择时间区间"),!1}}]),r}(c["d"]);m=p["a"]([Object(c["a"])({name:"ExportAfterSalesOrder"})],m);var d=m,f=d,E=r("4023"),x=Object(E["a"])(f,a,o,!1,null,null,null);t["default"]=x.exports}}]);