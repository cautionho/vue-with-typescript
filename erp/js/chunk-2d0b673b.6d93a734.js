(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b673b"],{"1ce8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Row",{staticClass:"P-Inline-Block"},[a("Col",[e.Power?a("Button",{attrs:{type:"primary"},on:{click:e.TriggerModal}},[e._v("添加虚拟渠道")]):e._e(),a("Modal",{attrs:{title:(0!==e.VirtualChannelMsg.Id?"修改":"添加")+"虚拟渠道","mask-closable":!1,width:960},on:{"on-cancel":function(t){return e.HandleRes(!1)}},model:{value:e.IsShowModal,callback:function(t){e.IsShowModal=t},expression:"IsShowModal"}},[a("Form",{ref:"VirtualChannelMsg",attrs:{onsubmit:"return false",model:e.VirtualChannelMsg,rules:e.customerRules,"label-width":120}},[a("Form-item",{attrs:{label:"虚拟渠道名称：",prop:"VirtualChannelName"}},[a("Input",{attrs:{placeholder:"请输入虚拟渠道名称",name:"virtualChannelInput"},model:{value:e.VirtualChannelMsg.VirtualChannelName,callback:function(t){e.$set(e.VirtualChannelMsg,"VirtualChannelName",t)},expression:"VirtualChannelMsg.VirtualChannelName"}})],1),a("Form-item",{attrs:{label:"发货仓：",prop:"WarehouseId"}},[a("Select",{attrs:{placeholder:"请选择仓库","label-in-value":"",options:e.WarehouseList},model:{value:e.VirtualChannelMsg.WarehouseId,callback:function(t){e.$set(e.VirtualChannelMsg,"WarehouseId",t)},expression:"VirtualChannelMsg.WarehouseId"}})],1),a("Form-item",{attrs:{label:"备注："}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入备注"},model:{value:e.VirtualChannelMsg.Remark,callback:function(t){e.$set(e.VirtualChannelMsg,"Remark",t)},expression:"VirtualChannelMsg.Remark"}})],1),a("Form-item",{staticClass:"ivu-form-item-required",attrs:{label:"物流渠道："}},[a("div",{staticStyle:{"max-height":"400px","overflow-y":"auto"}},[a("CheckboxGroup",{model:{value:e.SelectMethods,callback:function(t){e.SelectMethods=t},expression:"SelectMethods"}},[e._l(e.MethodList,(function(t,n){return a("Checkbox",{key:t.Name,staticClass:"P-VA-T P-W-30-Percent",attrs:{label:t.Id}},[e._v(e._s(t.Name))])})),e.VirtualChannelMsg.WarehouseId?e._e():a("p",[e._v("请先选发货仓再选物流渠道")]),e.MethodList.length<1&&e.VirtualChannelMsg.WarehouseId?a("p",[e._v("当前发货仓下暂无物流渠道数据")]):e._e()],2)],1)])],1),a("footer",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.PostMsg()}}},[e._v("提交")]),a("Button",{on:{click:function(t){return e.HandleRes(!1)}}},[e._v("取消")])],1)],1)],1)],1)},s=[],l=(a("9660"),a("0b78"),a("3231")),i=a("064d"),r=a("46d7"),o=a("631e"),u=a("4a81"),h=a("d11d"),c=a("eb54"),d=function(e){Object(r["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.IsShowModal=!1,e.MethodList=[],e.SelectMethods=[],e.VirtualChannelMsg=new c["a"].VirtualChannelList,e.customerRules={VirtualChannelName:[{required:!0,message:"请输入虚拟渠道名称"}],WarehouseId:[{required:!0,message:"请选择仓库",trigger:"change",type:"number"}]},e}return Object(i["a"])(a,[{key:"HandleRes",value:function(e){var t=this;this.IsShowModal=!1,this.$nextTick((function(){t.$refs["VirtualChannelMsg"].resetFields()}))}},{key:"ChangeWare",value:function(e){this.SelectMethods=[],this.MethodList=[],this.GetMethodsList(e)}},{key:"TriggerModal",value:function(e){var t=this;this.SelectMethods=[],e.length?(this.VirtualChannelMsg=e[0],this.$nextTick((function(){t.VirtualChannelMsg.BindShipMethods.forEach((function(e){t.SelectMethods.push(e.ShipMethodId)}))}))):this.VirtualChannelMsg=new c["a"].VirtualChannelList,this.$set(this,"IsShowModal",!0)}},{key:"GetMethodsList",value:function(e){var t=this;e&&(this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Logistics,Api:{Address:this.$Api.ChannelDropList,Login:!1},Data:e,Callback:function(e){t.$UI.Loading.Hide(),e.IsSuccess?t.MethodList=e.Data.DropList:t.$Request.Error(e)}}))}},{key:"PostMsg",value:function(){var e=this;this.$refs["VirtualChannelMsg"].validate((function(t){if(t){if(e.SelectMethods.length<1)return void e.$UI.Tips.Floating("warning","请选择物流渠道");var a=JSON.parse(JSON.stringify(e.VirtualChannelMsg));a.BindShipMethods=[],e.SelectMethods.forEach((function(t){e.MethodList.forEach((function(e){if(t===e.Id){var n={ShipMethodId:e.Id,ShipMethodName:e.Name};a.BindShipMethods.push(n)}}))})),e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Logistics,Api:{Address:0!==e.VirtualChannelMsg.Id?e.$Api.VirtualChannelModify:e.$Api.VirtualChannelCreate,Login:!1},Data:a,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success",(0!==e.VirtualChannelMsg.Id?"修改":"添加")+"虚拟渠道成功"),e.HandleRes(!0)):(e.$UI.Loading.Hide(),e.$Request.Error(t))}})}}))}}]),a}(h["d"]);u["a"]([Object(h["c"])()],d.prototype,"Power",void 0),u["a"]([Object(h["c"])()],d.prototype,"WarehouseList",void 0),u["a"]([Object(h["b"])()],d.prototype,"HandleRes",null),u["a"]([Object(h["e"])("VirtualChannelMsg.WarehouseId")],d.prototype,"ChangeWare",null),d=u["a"]([Object(h["a"])({name:"ModifyVirtualChannel"})],d);var p=d,M=p,g=a("4023"),C=Object(g["a"])(M,n,s,!1,null,null,null);t["default"]=C.exports}}]);