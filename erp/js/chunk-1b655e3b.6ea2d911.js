(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b655e3b"],{"66b2":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Col",{staticClass:"P-Inline-Block",attrs:{id:"Template"}},[a("Modal",{staticClass:"Container-Tabs",attrs:{title:"作图需求详情","mask-closable":!1,width:"1000"},on:{"on-cancel":function(t){return e.ClearModal(0)}},model:{value:e.ShowModal,callback:function(t){e.ShowModal=t},expression:"ShowModal"}},[a("Form",{ref:"OperateForm",attrs:{inline:"","label-width":120,model:e.OperateForm,onsubmit:"return false;",name:"OperateForm"}},[a("Tabs",{attrs:{name:"Detail",type:"card",closable:!1,value:e.ActiveTab},on:{"on-click":e.ChangeTabs}},[a("TabPane",{attrs:{label:"基本信息",name:"Base",tab:"Detail"}},[a("Row",[a("Col",{attrs:{span:"24"}},[a("Form-item",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"发布人："}},[e._v(" "+e._s(e.OperateForm.CreateUserName)+" ")]),a("Form-item",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"申请时间："}},[e._v(" "+e._s(e.OperateForm.CreateTime?e.$UI.Render.Date(e.OperateForm.CreateTime,!0):"-")+" ")]),a("Form-item",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"美工："}},[e._v(" "+e._s(e.OperateForm.OperateUserName)+" ")]),a("Form-item",{staticClass:"P-W-49-Percent P-MB-10",attrs:{label:"品牌："}},[e._v(" "+e._s(e.$Enums.Product.PhotoStatus[e.OperateForm.ProcessStatus-1])+" ")])],1),a("Col",{staticClass:"P-MT-10",attrs:{span:"24"}})],1),a("Row",[a("h2",{staticClass:"P-TA-C"},[e._v("SPU列表")]),a("Col",{staticClass:"P-MT-10",attrs:{span:"24"}},[a("Table",{attrs:{columns:e.SpuCol,data:e.OperateForm.SpuList,size:"small",stripe:"",height:140}})],1)],1),a("Row",{staticClass:"P-MT-10"},[a("h2",{staticClass:"P-TA-C"},[e._v("凸显SKU列表")]),a("Col",{staticClass:"P-MT-10",attrs:{span:"24"}},[a("Table",{attrs:{columns:e.SkuCol,data:e.OperateForm.SkuList,size:"small",stripe:"",height:140}})],1)],1),a("Row",[a("Form-item",{staticClass:"P-W-100-Percent P-MB-10",attrs:{label:"描述："}},[e._v(" "+e._s(e.OperateForm.CreateUserName)+" ")]),a("Form-item",{staticClass:"P-W-100-Percent P-MB-10",attrs:{label:"图片："}},[a("Col",{staticClass:"Max-Height",attrs:{span:"24"}},[e._l(e.OperateForm.Images,(function(t){return a("div",{staticClass:"demo-upload-list Cover-Picture P-MR-5",staticStyle:{width:"200px",display:"inline-block",position:"relative"}},[a("img",{attrs:{src:e.$Server.File+"/"+t,height:"200",width:"200"}}),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return e.ShowPic(t)}}}),e.IsHandle?a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){return e.HandleRemove(t)}}}):e._e()],1)])})),e.IsHandle?a("Upload",{ref:"Upload",staticStyle:{display:"inline-block",width:"200px",height:"200px"},attrs:{"show-upload-list":!1,"on-success":e.HandleSuccessImages,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.HandleFormatError,"on-exceeded-size":e.HandleMaxSize,type:"drag",action:e.UploadImgServer}},[a("div",{staticStyle:{height:"200px",width:"200px"}},[a("Icon",{staticStyle:{"margin-top":"55px",color:"#fff"},attrs:{type:"camera",size:"20"}}),a("p",[e._v("上传图片")]),a("span",{staticStyle:{"padding-bottom":"12px"}},[e._v("仅支持jpg、png图片格式，大小不超过2M")])],1)]):e._e()],2)],1)],1)],1),a("Tab-pane",{attrs:{label:"审核记录",name:"Histroy",tab:"Detail"}},[a("Table",{ref:"ProcessHistorys",attrs:{columns:e.HistoryCol,data:e.OperateForm.ProcessHistorys,size:"small",stripe:"",height:600}})],1)],1)],1),a("ShowBigPic",{ref:"ShowBigPic"}),a("footer",{attrs:{slot:"footer"},slot:"footer"},[e.IsHandle?a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.HandleOperator("HandleDownloadSkuImages")}}},[e._v("下载素材图片")]):e._e(),e.IsHandle?a("Button",{attrs:{type:"primary"},on:{click:e.HandleSubmit}},[e._v("提交销售审核")]):e._e(),e.IsHandle?a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.HandleOperator("DrawingRequirementsOperator")}}},[e._v("需求退回修改")]):e._e(),a("Button",{on:{click:function(t){return e.ClearModal(0)}}},[e._v("返回")])],1)],1)],1)},s=[],i=(a("5d9d"),a("cee1"),a("1ff3"),a("6bf8"),a("3231")),o=a("064d"),n=a("46d7"),l=a("631e"),c=a("4a81"),u=a("d11d"),d=a("eb49"),p=function(e){Object(n["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.ShowModal=!1,e.Target=new d["a"].DrawingRequirementsList,e.IsHandle=!1,e.ActiveTab="Base",e.UploadImgServer=e.$Server.Settings+e.$Api.UploadImage,e.DropStatus=e.$Utils.GetEnumArr(e.$Enums.Product.PhotoStatus),e.OperateForm=new d["a"].DrawingRequirementsDetail,e.SpuCol=[{title:"图片",key:"DefaultImage",width:80,align:"center",render:function(t,a){return t("div",{style:{width:"45px",height:"45px",background:"url("+e.$Server.File+"/"+a.row.Image+") no-repeat",backgroundSize:"cover",margin:"0 auto",cursor:"pointer"},on:{click:function(){e.$refs["ShowBigPic"].Trigger(a.row.Image)}}})}},{title:"SPU编号",key:"SkuCode"},{title:"SPU名称",key:"SkuName",render:function(e,t){return e("div",[e("Tooltip",{props:{content:t.row.SkuName,maxWidth:500},class:"P-W-100-Percent"},[e("p",{class:"P-LINE-1"},""===t.row.SkuName?"-":t.row.SkuName)])])}}],e.SkuCol=[{title:"图片",key:"DefaultImage",width:80,align:"center",render:function(t,a){return t("div",{style:{width:"45px",height:"45px",background:"url("+e.$Server.File+"/"+a.row.Image+") no-repeat",backgroundSize:"cover",margin:"0 auto",cursor:"pointer"},on:{click:function(){e.$refs["ShowBigPic"].Trigger(a.row.Image)}}})}},{title:"SKU编号",key:"SkuCode"},{title:"SKU名称",key:"SkuName",render:function(e,t){return e("div",[e("Tooltip",{props:{content:t.row.SkuName,maxWidth:500},class:"P-W-100-Percent"},[e("p",{class:"P-LINE-1"},""===t.row.SkuName?"-":t.row.SkuName)])])}}],e.HistoryCol=[{title:"编号",key:"Id",width:100},{title:"审核人",key:"AuditorName",width:120},{title:"审核时间",key:"",width:160,render:function(t,a){return t("div",e.$UI.Render.Date(a.row.AuditTime,!0))}},{title:"审核记录",key:"OperateLog",render:function(e,t){return e("div",[e("Tooltip",{props:{content:t.row.OperateLog,maxWidth:500},class:"P-W-100-Percent"},[e("p",{class:"P-LINE-1"},""===t.row.OperateLog?"-":t.row.OperateLog)])])}}],e}return Object(o["a"])(a,[{key:"HandleResMsg",value:function(e,t,a){}},{key:"Trigger",value:function(e,t){this.IsHandle=t,this.Target=e[0],e.length>0&&this.GetSkuDetails(e[0].Id)}},{key:"OpenModal",value:function(){this.ShowModal=!0}},{key:"ChangeTabs",value:function(e){this.ActiveTab=e}},{key:"GetSkuDetails",value:function(e){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.GetRequestDetail,Login:!0},Data:e,Callback:function(e){e.IsSuccess?(t.$set(t,"OperateForm",e.Data.Data),t.ShowModal=!0):t.$Request.Error(e),t.$UI.Loading.Hide()}})}},{key:"ClearModal",value:function(e){this.ShowModal=!1,this.OperateForm=new d["a"].DrawingRequirementsDetail,this.$refs["OperateForm"].resetFields(),this.ActiveTab="Base",this.IsHandle=!1,this.HandleResMsg(e)}},{key:"ShowPic",value:function(e){this.$refs.ShowBigPic.Trigger(e)}},{key:"HandleSuccessImages",value:function(e,t){1==e.IsSuccess?(t.url=e.Data.Url,this.OperateForm.Images.push(e.Data.Url)):this.$Request.Error(e)}},{key:"HandleFormatError",value:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件".concat(e.name,"格式不正确，请上传 jpg、 png 或 jpeg 格式的图片。")})}},{key:"HandleMaxSize",value:function(e){this.$Notice.warning({title:"超出文件大小限制",desc:"文件".concat(e.name,"太大，不能超过 2M。")})}},{key:"HandleRemove",value:function(e){this.OperateForm.Images.splice(this.OperateForm.Images.indexOf(e),1)}},{key:"HandleOperator",value:function(e){this.ShowModal=!1,this.HandleResMsg(2,e,this.Target)}},{key:"HandleSubmit",value:function(){var e=this;0!==this.OperateForm.Images.length?(this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.ArtistUploadImages,Login:!0},Data:{PhotoProcessRequestId:this.OperateForm.Id,Urls:this.OperateForm.Images},Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("warning","提交销售审核成功"),e.ClearModal(1)):e.$Request.Error(t),e.$UI.Loading.Hide()}})):this.$UI.Tips.Floating("warning","请上传图片")}}]),a}(u["d"]);c["a"]([Object(u["b"])()],p.prototype,"HandleResMsg",null),p=c["a"]([Object(u["a"])({name:"SkuDetail",components:{ShowBigPic:function(){return a.e("chunk-c0a1d894").then(a.bind(null,"6156"))}}})],p);var m=p,h=m,g=(a("866d"),a("4023")),S=Object(g["a"])(h,r,s,!1,null,null,null);t["default"]=S.exports},"866d":function(e,t,a){"use strict";var r=a("9fab"),s=a.n(r);s.a},"9fab":function(e,t,a){}}]);