(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e9601"],{"8cee":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("Modal",{attrs:{title:e.ModalTitle,width:800},on:{"on-cancel":e.CancelModal},model:{value:e.MailTplModal,callback:function(t){e.MailTplModal=t},expression:"MailTplModal"}},[[1,2].includes(e.Type)?l("Form",{ref:"MailTplTypeInfo",attrs:{model:e.MailTplTypeInfo,"label-width":90,onsubmit:"return false"}},[l("FormItem",{attrs:{label:"模板类型：",prop:"TemplateName",rules:{required:!0,message:"请输入模板类型名称"}}},[l("Input",{ref:"TypeIpt",attrs:{placeholder:"模板类型名称"},model:{value:e.MailTplTypeInfo.TemplateName,callback:function(t){e.$set(e.MailTplTypeInfo,"TemplateName",t)},expression:"MailTplTypeInfo.TemplateName"}})],1)],1):e._e(),[3,4].includes(e.Type)?l("Form",{ref:"MailTplInfo",attrs:{model:e.MailTplInfo,"label-width":90,onsubmit:"return false"}},[l("FormItem",{attrs:{label:"标题：",prop:"Title",rules:{required:!0,message:"请输入标题"}}},[l("Input",{ref:"TplIpt",attrs:{placeholder:"请输入标题"},model:{value:e.MailTplInfo.Title,callback:function(t){e.$set(e.MailTplInfo,"Title",t)},expression:"MailTplInfo.Title"}})],1),l("FormItem",{attrs:{label:"模板类型：",prop:"TypeId",rules:{required:!0,message:"请选择模板类型",pattern:e.$Pattern.PositiveNotZero,trigger:"change"}}},[l("Select",{attrs:{placeholder:"请选择模板类型",option:e.TplTypeDrop},model:{value:e.MailTplInfo.TypeId,callback:function(t){e.$set(e.MailTplInfo,"TypeId",t)},expression:"MailTplInfo.TypeId"}})],1),l("FormItem",{attrs:{label:"模板内容",prop:"Content",rules:{required:!0,message:"请输入模板内容"}}},[l("Input",{attrs:{placeholder:"请输入模板内容",type:"textarea",autosize:{maxRows:8,minRows:8}},model:{value:e.MailTplInfo.Content,callback:function(t){e.$set(e.MailTplInfo,"Content",t)},expression:"MailTplInfo.Content"}})],1)],1):e._e(),l("footer",{attrs:{slot:"footer"},slot:"footer"},[l("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("提交")]),l("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)},i=[],o=l("3231"),p=l("064d"),n=l("46d7"),s=l("631e"),r=l("4a81"),T=l("d11d"),c=l("4606"),d=l("8b45"),u=function(e){Object(n["a"])(l,e);var t=Object(s["a"])(l);function l(){var e;return Object(o["a"])(this,l),e=t.apply(this,arguments),e.MailTplModal=!1,e.ModalTitle="",e.Type=0,e.MailTplTypeInfo=new c["a"].MailTplTypeInfo,e.MailTplInfo=new c["a"].MailTplInfo,e}return Object(p["a"])(l,[{key:"EmitGetTplType",value:function(){}},{key:"EmitGetList",value:function(){}},{key:"Trigger",value:function(e,t){var l=this;if(this.$set(this,"ModalTitle",1===e?"添加模板类型":2===e?"编辑模板类型":3===e?"添加模板":"编辑模板"),this.$set(this,"Type",e),e<3){var a=t||new d["a"].TreeNode;this.MailTplTypeInfo=new c["a"].MailTplTypeInfo(a.Id,a.Title)}else{var i=t||new c["a"].EmailTpl;this.MailTplInfo=new c["a"].MailTplInfo(i.Title,i.TypeId,i.Content,i.Id)}this.$set(this,"MailTplModal",!0),this.$nextTick((function(){l.$refs[e<3?"TypeIpt":"TplIpt"].focus()}))}},{key:"Validate",value:function(){var e=this;this.$refs[this.Type<3?"MailTplTypeInfo":"MailTplInfo"].validate((function(t){t&&(e.Type<3?e.PostTplType():e.PostTpl())}))}},{key:"PostTplType",value:function(){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:1===this.Type?this.$Api.EmailTemplateTypeAdd:this.$Api.EmailTemplateTypeEdit,Login:!0},Data:1===this.Type?this.MailTplTypeInfo.TemplateName:this.MailTplTypeInfo,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success",1===e.Type?"添加成功":"修改成功"),e.CancelModal(),e.EmitGetTplType()):(e.$UI.Loading.Hide(),e.$Request.Error(t))}})}},{key:"PostTpl",value:function(){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:3===this.Type?this.$Api.EmailTemplateAdd:this.$Api.EmailTemplateEdit,Login:!0},Data:this.MailTplInfo,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success",3===e.Type?"添加成功":"修改成功"),e.CancelModal(),e.EmitGetList()):(e.$UI.Loading.Hide(),e.$Request.Error(t))}})}},{key:"CancelModal",value:function(){var e=this;this.$set(this,"MailTplModal",!1),this.$set(this,"ModalTitle",""),this.$nextTick((function(){e.$refs[e.Type<3?"MailTplTypeInfo":"MailTplInfo"].resetFields(),e.$set(e,"Type",0)}))}}]),l}(T["d"]);r["a"]([Object(T["c"])(Array)],u.prototype,"TplTypeDrop",void 0),r["a"]([Object(T["b"])()],u.prototype,"EmitGetTplType",null),r["a"]([Object(T["b"])()],u.prototype,"EmitGetList",null),u=r["a"]([Object(T["a"])({name:"ModifyMailTpl"})],u);var f=u,y=f,I=l("4023"),m=Object(I["a"])(y,a,i,!1,null,"49f6a974",null);t["default"]=m.exports}}]);