(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7876b156","chunk-2d231201","chunk-6737bd6e","chunk-2d0a3c8d","chunk-2d224c4b","chunk-2d216fd3","chunk-2d0b653b","chunk-344965bc","chunk-461d2cd2","chunk-2d0b9823","chunk-2d0cbb04","chunk-2d0a439b","chunk-2d0b68d8","chunk-2d0dda6c","chunk-2d2101fc","chunk-2d0cca72","chunk-2d0abded","chunk-2d0d6800","chunk-2d0e9aea","chunk-2d0d059d","chunk-2d0d699d","chunk-2d21aedb","chunk-2d0d61fa","chunk-2d2218a0","chunk-2d0e8c24","chunk-2d20f2c7","chunk-2d0bff14","chunk-2d208d8b","chunk-2d216777","chunk-74b52645","chunk-2d210648","chunk-2d2136e8","chunk-2d0d7273","chunk-2d0e55b1","chunk-2d0cbb10","chunk-2d22d978","chunk-2d2134e8","chunk-2d238603","chunk-2d21d6b0","chunk-2d0d07d5","chunk-2d0c7b13","chunk-2d22293a","chunk-2d216f74","chunk-2d22d78d","chunk-2d0cebb3","chunk-2d0efc7e","chunk-2d21b469"],{"043f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("添加备注")]),r("Modal",{attrs:{title:"添加备注","mask-closable":!1},on:{"on-cancel":e.CancelModal},model:{value:e.ShipOrderRemarkModal,callback:function(t){e.ShipOrderRemarkModal=t},expression:"ShipOrderRemarkModal"}},[r("Form",{ref:"ShipOrderRemark",attrs:{model:e.ShipOrderRemark,rules:e.RemarkRules}},[r("FormItem",{attrs:{prop:"Remark"}},[r("Input",{ref:"Remark",attrs:{type:"textarea",placeholder:"备注",autosize:{maxRows:5,minRows:5}},model:{value:e.ShipOrderRemark.Remark,callback:function(t){e.$set(e.ShipOrderRemark,"Remark",t)},expression:"ShipOrderRemark.Remark"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.ValidateRemark}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},i=[],n=r("3231"),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("a349"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.ShipOrderRemarkModal=!1,e.ShipOrderRemark={Remark:""},e.RemarkRules={Remark:[{required:!0,message:"请输入备注"}]},e}return Object(o["a"])(r,[{key:"EmitOperateSuccess",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"Trigger",value:function(){var e=this;this.$set(this,"ShipOrderRemarkModal",!0),this.$nextTick((function(){e.$refs.Remark.focus()}))}},{key:"CancelModal",value:function(){var e=this;this.$refs.ShipOrderRemark.resetFields(),this.$nextTick((function(){e.$set(e,"ShipOrderRemarkModal",!1)}))}},{key:"ValidateRemark",value:function(){var e=this;this.$refs.ShipOrderRemark.validate((function(t){t&&e.PostAddRemark()}))}},{key:"PostAddRemark",value:function(){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.ShipOrderAddRemark,Login:!0},Data:{OrderId:this.SHIP_ORDER_INFO.Id,Content:this.ShipOrderRemark.Remark},Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success","添加备注成功"),e.CancelModal(),e.EmitOperateSuccess("ShipOrder/UPDATE_SHIP_ORDER_REMARK")):(e.$UI.Loading.Hide(),e.$Request.Error(t))}})}},{key:"SHIP_ORDER_INFO",get:function(){return this["ShipOrder/SHIP_ORDER_INFO"]}}]),r}(u["d"]);l["a"]([Object(u["b"])()],p.prototype,"EmitOperateSuccess",null),l["a"]([d["a"]],p.prototype,"ShipOrder/UPDATE_SHIP_ORDER_REMARK",void 0),l["a"]([d["b"]],p.prototype,"ShipOrder/SHIP_ORDER_INFO",void 0),p=l["a"]([Object(u["a"])({name:"AddShipOrderRemark"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,"427e2d8a",null);t["default"]=m.exports},"0610":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("取消LMA包裹单")])],1)},i=[],n=r("3231"),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("a349"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(n["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"Trigger",value:function(){var e=this;this.$UI.Tips.Modal({Type:"confirm",Content:"是否确认取消LMA包裹单",Callback:function(t){t&&(e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Warehouse,Api:{Address:e.$Api.CancelLMAShipOrder,Login:!0},Data:e["SHIP_ORDER_INFO"].Id,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success","取消LMA包裹单成功"),e["ShipOrder/UPDATE_SHIP_ORDER_INFO"]()):(e.$UI.Loading.Hide(),e.$Request.Error(t))}}))}})}},{key:"SHIP_ORDER_INFO",get:function(){return this["ShipOrder/SHIP_ORDER_INFO"]}}]),r}(u["d"]);l["a"]([d["a"]],p.prototype,"ShipOrder/UPDATE_SHIP_ORDER_INFO",void 0),l["a"]([d["b"]],p.prototype,"ShipOrder/SHIP_ORDER_INFO",void 0),p=l["a"]([Object(u["a"])({name:"CancelLMA"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,null,null);t["default"]=m.exports},"073c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Row",{staticClass:"P-Inline-Block"},[r("Col",{attrs:{span:"24"}},[e.Powers.ImportLogisticsAnomalyRecord?r("Import",{staticClass:"P-MB-10",on:{"emit-operate-success":e.OperateSuccess}}):e._e(),e.Powers.ChangeLogisticsCustomerStatus?r("ChangeProcessStatus",{ref:"ChangeCustomerStatus",staticClass:"P-MB-10 P-ML-10",on:{"emit-operate-success":e.OperateSuccess,"emit-get-selected":e.GetSelected}}):e._e(),e.Powers.AddLogisticsRemark?r("AddRemark",{ref:"AddRemark",staticClass:"P-MB-10 P-ML-10",on:{"emit-get-selected":e.GetSelected,"emit-cancel-select":e.CancelSelected}}):e._e(),r("ShipOrderDetails",{ref:"ShipOrderDetails"}),e.Powers.BatchSendMail?r("Button",{staticClass:"P-MB-10 P-ML-10 P-VA-T",attrs:{type:"primary"},on:{click:function(t){return e.TriggerOperations("SendEmail")}}},[e._v("发送邮件")]):e._e(),e.Powers.BatchSendMail?r("SendEmail",{ref:"SendEmail",on:{"emit-handle-success":e.OperateSuccess}}):e._e(),r("SendStationMail",{ref:"EbayMsgSend",staticClass:"P-MB-10 P-ML-10",on:{"trigger-operations":e.TriggerOperations,"emit-operate-success":e.OperateSuccess}})],1),r("Col",{attrs:{span:"24"}},[r("Table",{ref:"List",staticClass:"P-MB-10",attrs:{columns:e.Cols,data:e.List,stripe:"",height:e.CalculateHeight()}})],1),r("Col",{attrs:{span:"24"}},[r("Page",{attrs:{current:e.Pager.PageIndex,total:e.Pager.TotalItems,"page-size":e.Pager.PageSize,"page-size-opts":e.Pager.PageOpt,"show-total":"","show-sizer":"","show-elevator":""},on:{"on-change":e.ChangePage,"on-page-size-change":e.ChangePageSize}})],1)],1)},i=[],n=(r("d9b9"),r("5e8c"),r("76bb"),r("6bf8"),r("a815"),r("9b6f"),r("3231")),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("db83"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.Powers={},e.List=[],e.Pager=new d["a"].Pager,e.Cols=[{type:"selection",width:60,align:"center"},{title:"发货单号/订单号",width:140,render:function(t,r){return t("div",[t("a",{on:{click:function(){e.CancelSelected(),e.$nextTick((function(){e.TriggerOperations("ShipOrderView",r.row)}))}}},r.row.OrderCode),t("p",r.row.PlatformOrderId)])}},{title:"发货仓",key:"WarehouseName",width:140},{title:"国家",key:"Country",width:140},{title:"物流渠道/跟踪号",key:"",render:function(e,t){var r=[{Key:"物",Value:t.row.ShipMethodName||"-"},{Key:"跟",Value:t.row.TrackingNumber||"-"}];return e("div",r.map((function(t){return e("p",[e("span",{class:"P-Table-Tip P-BG-Primary"},t.Key),e("span",t.Value)])})))}},{title:"平台/店铺/买家ID",key:"",render:function(t,r){var a=[{Key:"平",Value:e.$Enums.Sales.Platform[r.row.Platform]||"-"},{Key:"店",Value:r.row.StoreName||"-"},{Key:"买",Value:r.row.BuyerId||"-"}];return t("div",a.map((function(e){return t("p",[t("span",{class:"P-Table-Tip P-BG-Primary"},e.Key),t("span",e.Value)])})))}},{title:"物流状态/物流信息/异常原因",width:300,render:function(t,r){var a=[{Key:"状",Value:e.$Enums.CustomerService.LogisticsStatus[r.row.LogisticsStatus]||"-"},{Key:"流",Value:r.row.LogisticsInfo||"-"},{Key:"异",Value:r.row.LogisticsAnomalyReason||"-"}],i=[],n=a.map((function(e){return i.push(t("p","[".concat(e.Key,"] ").concat(e.Value))),t("p",{class:"P-LINE-1"},[t("span",{class:"P-Table-Tip P-BG-Primary"},e.Key),t("span",e.Value)])})),o=t("div",{slot:"content"},i);return t("Tooltip",{class:"P-W-100-Percent P-MT-5"},n.concat(o))}},{title:"下单/付款/发货时间",width:180,render:function(t,r){var a=[{Key:"下",Value:e.$UI.Render.Date(r.row.CreatedTime,!0)},{Key:"付",Value:e.$UI.Render.Date(r.row.PayTime,!0)},{Key:"发",Value:e.$UI.Render.Date(r.row.ShipTime,!0)}];return t("div",a.map((function(e){return t("p",[t("span",{class:"P-Table-Tip P-BG-Primary"},e.Key),t("span",e.Value)])})))}},{title:"客服联系状态",width:120,render:function(t,r){return t("span",e.$Enums.CustomerService.CustomerHandleProcess[r.row.CustomerStatus])}},{title:"添加时间",width:160,render:function(t,r){return t("span",e.$UI.Render.Date(r.row.OrderTime,!0))}},{title:"操作",width:100,render:e.RenderOperates}],e}return Object(o["a"])(r,[{key:"EmitPagerChange",value:function(e){}},{key:"mounted",value:function(){this.$set(this,"Powers",this.$Utils.GetUserResource.call(this,["ImportLogisticsAnomalyRecord","ReplyLogisticsAnomalyRecord","AddLogisticsRemark","ChangeLogisticsCustomerStatus","BatchSendMail"]))}},{key:"CalculateHeight",value:function(){return this.$UI.FullHeight()-(Object.values(this.Powers).includes(!0)?255:210)}},{key:"RenderOperates",value:function(e,t){var r=this,a=[{Key:"查看",Value:"ShipOrderView"}];return this.Powers.AddLogisticsRemark&&a.push({Key:"添加备注",Value:"AddRemark"}),this.Powers.ChangeLogisticsCustomerStatus&&a.push({Key:"更改客服联系状态",Value:"ChangeCustomerStatus"}),e("Dropdown",{on:{"on-click":function(e){r.CancelSelected(),r.$nextTick((function(){r.TriggerOperations(e,t.row)}))}}},[e("a",[e("span",{class:"P-MR-5"},"操作"),e("Icon",{props:{type:"ios-arrow-down"}})]),e("DropdownMenu",{slot:"list"},a.map((function(t){return e("DropdownItem",{props:{name:t.Value},class:"P-TA-C"},t.Key)})))])}},{key:"ChangePage",value:function(e){this.$set(this.Pager,"PageIndex",e),this.EmitPagerChange(this.Pager)}},{key:"ChangePageSize",value:function(e){this.$set(this.Pager,"PageSize",e),this.EmitPagerChange(this.Pager)}},{key:"GetSelected",value:function(e){this.$refs[e].TriggerSelected(this.$refs.List.getSelection())}},{key:"CancelSelected",value:function(){this.$refs.List.selectAll(!1)}},{key:"TriggerOperations",value:function(e,t){switch(e){case"SendEmail":case"EbayMsgSend":this.ValidateSelected(e);break;case"ShipOrderView":this.$refs.ShipOrderDetails.Validate({OrderId:t.Id,OrderCode:t.OrderCode});break;default:this.$refs[e].TriggerSelected([t]);break}}},{key:"ValidateSelected",value:function(e){var t=this.$refs.List.getSelection();t.length?this.$refs[e].TriggerLogisticsWrite(t):this.$UI.Tips.Floating("warning","请选择订单进行操作")}},{key:"OperateSuccess",value:function(){this.EmitPagerChange(this.Pager)}}]),r}(u["d"]);l["a"]([Object(u["b"])()],p.prototype,"EmitPagerChange",null),p=l["a"]([Object(u["a"])({name:"LogisticsExceptionOrder",components:{Import:function(){return r.e("chunk-2d216fd3").then(r.bind(null,"c58c"))},ChangeProcessStatus:function(){return r.e("chunk-2d224c4b").then(r.bind(null,"e219"))},AddRemark:function(){return r.e("chunk-2d0b653b").then(r.bind(null,"1d4f"))},ShipOrderDetails:function(){return r.e("chunk-1c5a19f1").then(r.bind(null,"6652"))},SendEmail:function(){return r.e("chunk-2d22dbe5").then(r.bind(null,"f995"))},SendStationMail:function(){return r.e("chunk-2d0c5b2b").then(r.bind(null,"3fce"))}}})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,"0fadbf9e",null);t["default"]=m.exports},"16b4":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("导出发货单")]),r("Modal",{attrs:{title:"导出发货单"},on:{"on-cancel":e.CancelModal},model:{value:e.ExportModal,callback:function(t){e.ExportModal=t},expression:"ExportModal"}},[e.IsExportShiped?r("Form",{ref:"ExportShiped",attrs:{model:e.ExportShiped,rules:e.ExportRules,"label-width":100,onsubmit:"return false;"}},[r("FormItem",{attrs:{label:"发货时间：",prop:"StartTime"}},[r("DatePicker",{staticClass:"P-W-100-Percent",attrs:{type:"datetime",placeholder:"开始时间"},model:{value:e.ExportShiped.StartTime,callback:function(t){e.$set(e.ExportShiped,"StartTime",t)},expression:"ExportShiped.StartTime"}})],1),r("FormItem",{attrs:{label:"",prop:"EndTime"}},[r("DatePicker",{staticClass:"P-W-100-Percent",attrs:{type:"datetime",placeholder:"结束时间"},model:{value:e.ExportShiped.EndTime,callback:function(t){e.$set(e.ExportShiped,"EndTime",t)},expression:"ExportShiped.EndTime"}})],1),r("FormItem",{attrs:{label:"发货仓："}},[r("Select",{attrs:{placeholder:"发货仓",options:e.WarehouseDrop},model:{value:e.ExportShiped.ShipWarehouseId,callback:function(t){e.$set(e.ExportShiped,"ShipWarehouseId",t)},expression:"ExportShiped.ShipWarehouseId"}})],1),r("FormItem",{attrs:{label:"平台："}},[r("Select",{attrs:{placeholder:"平台",options:e.PlatformDrop,onChange:e.GetStoreDrop},model:{value:e.ExportShiped.Platform,callback:function(t){e.$set(e.ExportShiped,"Platform",t)},expression:"ExportShiped.Platform"}})],1),r("FormItem",{attrs:{label:"店铺："}},[r("Select",{attrs:{placeholder:"店铺",options:e.StoreDrop},model:{value:e.ExportShiped.StoreId,callback:function(t){e.$set(e.ExportShiped,"StoreId",t)},expression:"ExportShiped.StoreId"}})],1),r("FormItem",{attrs:{label:"国家："}},[r("Select",{attrs:{placeholder:"国家",options:e.COUNTRY_DROP,optionValKey:"CountryCode",optionKey:"CountryNameCn"},model:{value:e.ExportShiped.Country,callback:function(t){e.$set(e.ExportShiped,"Country",t)},expression:"ExportShiped.Country"}})],1),r("FormItem",{attrs:{label:"物流渠道："}},[r("Select",{attrs:{placeholder:"物流渠道",options:e.MethodDrop,optionValKey:"Id",optionKey:"Name",multiple:""},model:{value:e.ExportShiped.ShipMethodId,callback:function(t){e.$set(e.ExportShiped,"ShipMethodId",t)},expression:"ExportShiped.ShipMethodId"}})],1),r("FormItem",{attrs:{label:"导出明细：",prop:"ExportType"}},[r("Select",{attrs:{placeholder:"导出明细",options:e.ExportItemTypeDrop},model:{value:e.ExportShiped.ExportType,callback:function(t){e.$set(e.ExportShiped,"ExportType",t)},expression:"ExportShiped.ExportType"}})],1)],1):r("Form",{ref:"ExportOrder",attrs:{model:e.ExportOrder,rules:e.ExportOrderRules,"label-width":80,onsubmit:"return false;"}},[r("FormItem",{attrs:{label:"发货仓：",prop:"WarehouseId"}},[r("Select",{attrs:{placeholder:"发货仓",options:e.WarehouseDrop},model:{value:e.ExportOrder.WarehouseId,callback:function(t){e.$set(e.ExportOrder,"WarehouseId",t)},expression:"ExportOrder.WarehouseId"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("导出")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},i=[],n=(r("6bf8"),r("b449"),r("5d83")),o=r("3231"),s=r("064d"),c=r("46d7"),l=r("631e"),u=r("4a81"),d=r("d11d"),p=r("a349"),h=r("1459"),f=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(o["a"])(this,r),e=t.apply(this,arguments),e.ExportModal=!1,e.IsExportShiped=!1,e.PlatformDrop=e.$Utils.GetEnumArr(e.$Enums.Sales.Platform),e.ExportItemTypeDrop=e.$Utils.GetEnumArr(e.$Enums.Warehouse.ExportItemType),e.WarehouseDrop=[],e.MethodDrop=[],e.StoreDrop=[],e.ExportShiped=new h["a"].ExportShiped,e.ExportOrder=new h["a"].ExportOrder,e.ExportRules={StartTime:[{required:!0,message:"请选择开始时间"}],EndTime:[{required:!0,message:"请选择结束时间"}],ExportType:[{required:!0,message:"请选择导出明细",trigger:"change",type:"number"}]},e.ExportOrderRules={WarehouseId:[{required:!0,message:"请选择发货仓",trigger:"change",type:"number"}]},e}return Object(s["a"])(r,[{key:"EmitOperateSuccess",value:function(){}},{key:"GetDropList",value:function(e,t,r){var a=this;return new Promise((function(i){a.$Request.Post({Server:e,Api:{Address:t},Data:r,Callback:function(e){e.IsSuccess||a.$Request.Error(e),i(e.Data.DropList||[])}})}))}},{key:"GetDrops",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this,e.t1=this,e.next=4,this.GetDropList(this.$Server.Settings,this.$Api.GetWarehouseDropList,!0);case 4:if(e.t2=e.sent,e.t0.$set.call(e.t0,e.t1,"WarehouseDrop",e.t2),!this.IsExportShiped){e.next=13;break}return e.t3=this,e.t4=this,e.next=11,this.GetDropList(this.$Server.Logistics,this.$Api.ChannelDropList,0);case 11:e.t5=e.sent,e.t3.$set.call(e.t3,e.t4,"MethodDrop",e.t5);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"GetStoreDrop",value:function(e){var t=this;e?this.GetDropList(this.$Server.Sales,this.$Api.Sales[String(e)].StoreDrop,"").then((function(e){t.$set(t,"StoreDrop",e)})):(this.$set(this,"StoreDrop",[]),this.ExportShiped.StoreId=0)}},{key:"Trigger",value:function(){this.$set(this,"ExportModal",!0),this.$set(this,"IsExportShiped","Shiped"===this.Page),this.WarehouseDrop.length||this.GetDrops()}},{key:"Validate",value:function(){this.IsExportShiped?this.ValidateExportShiped():this.ValidateExport()}},{key:"ValidateExportShiped",value:function(){var e=this;this.$refs.ExportShiped.validate((function(t){if(t){var r=JSON.parse(JSON.stringify(e.ExportShiped)),a=+new Date(r.StartTime),i=+new Date(r.EndTime);if(a>i)return void e.$UI.Tips.Floating("warning","开始时间不能晚于结束时间");if(i-a>26784e5)return void e.$UI.Tips.Floating("warning","发货时间区间不能超过31天");r.StartTime=e.$UI.Render.NewDate(r.StartTime),r.EndTime=e.$UI.Render.NewDate(r.EndTime),e.PostExport(r)}}))}},{key:"ValidateExport",value:function(){var e=this;this.$refs.ExportOrder.validate((function(t){if(t){var r=JSON.parse(JSON.stringify(e.ExportOrder));r.ExportType="WaitPick"===e.Page?3:"Picked"===e.Page?4:"Packed"===e.Page?5:0,e.PostExport(r)}}))}},{key:"PostExport",value:function(e){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.IsExportShiped?this.$Api.ExportHasConfirmShipOrders:this.$Api.ExportHasOperationShipOrders,Login:!0},Data:e,Callback:function(e){t.$UI.Loading.Hide(),e.IsSuccess?(t.CancelModal(),setTimeout((function(){t.$UI.Tips.Modal({Type:"success",Content:"创建导出发货订单任务成功。请到报表-导出管理模块查看目前正在进行的导出任务，并在导出成功后可以下载对应数据。"})}),500)):t.$Request.Error(e)}})}},{key:"CancelModal",value:function(){this.$set(this,"ExportModal",!1),this.IsExportShiped?(this.$set(this,"ExportShiped",new h["a"].ExportShiped),this.$refs.ExportShiped.resetFields()):(this.$set(this,"ExportOrder",new h["a"].ExportOrder),this.$refs.ExportOrder.resetFields())}},{key:"COUNTRY_DROP",get:function(){return this["Base/COUNTRY_DROP"]}}]),r}(d["d"]);u["a"]([Object(d["c"])(String)],f.prototype,"Page",void 0),u["a"]([Object(d["b"])()],f.prototype,"EmitOperateSuccess",null),u["a"]([p["b"]],f.prototype,"Base/COUNTRY_DROP",void 0),f=u["a"]([Object(d["a"])({name:"ExportShipOrder"})],f);var S=f,m=S,O=r("4023"),v=Object(O["a"])(m,a,i,!1,null,null,null);t["default"]=v.exports},"18f0":function(e,t,r){},"1d4f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Row",{staticClass:"P-Inline-Block"},[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("添加备注")]),r("Modal",{attrs:{title:"添加备注",width:600},on:{"on-cancel":e.CancelModal},model:{value:e.AddModal,callback:function(t){e.AddModal=t},expression:"AddModal"}},[r("Form",{ref:"AddForm",attrs:{model:e.AddForm,onsubmit:"return false","label-width":60}},[r("FormItem",{attrs:{label:"备注：",prop:"content",rules:{required:!0,message:"请输入备注"}}},[r("Input",{ref:"Ipt",attrs:{placeholder:"请输入备注",type:"textarea",autosize:{minRows:6,maxRows:6}},model:{value:e.AddForm.content,callback:function(t){e.$set(e.AddForm,"content",t)},expression:"AddForm.content"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},i=[],n=(r("76bb"),r("3231")),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("4606"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.AddModal=!1,e.AddForm=new d["a"].AddRemarkBatch,e}return Object(o["a"])(r,[{key:"EmitGetSelected",value:function(e){}},{key:"EmitCancelSelect",value:function(){}},{key:"Trigger",value:function(){this.EmitGetSelected("AddRemark")}},{key:"TriggerSelected",value:function(e){var t=this;e.length?(this.$set(this.AddForm,"orderCodes",e.map((function(e){return e.OrderCode}))),this.$set(this,"AddModal",!0),this.$nextTick((function(){t.$refs.Ipt.focus()}))):this.$UI.Tips.Floating("warning","请选择订单进行操作")}},{key:"Validate",value:function(){var e=this;this.$refs.AddForm.validate((function(t){t&&e.PostAddRemark()}))}},{key:"PostAddRemark",value:function(){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.AddRemarkBatch,Login:!0},Data:this.AddForm,Callback:function(t){e.$UI.Loading.Hide(),t.IsSuccess?(e.$UI.Tips.Floating("success","添加备注成功"),e.EmitCancelSelect(),e.CancelModal()):e.$Request.Error(t)}})}},{key:"CancelModal",value:function(){var e=this;this.$set(this,"AddModal",!1),this.$set(this,"AddForm",new d["a"].ChangeCustomerStatus),this.$nextTick((function(){e.$refs.AddForm.resetFields()}))}}]),r}(u["d"]);l["a"]([Object(u["b"])()],p.prototype,"EmitGetSelected",null),l["a"]([Object(u["b"])()],p.prototype,"EmitCancelSelect",null),p=l["a"]([Object(u["a"])({name:"LogisticsExcaptionAddRemark"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,"a9c194d0",null);t["default"]=m.exports},"1e3a":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("检查")])],1)},i=[],n=(r("76bb"),r("6ed5"),r("3231")),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(n["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("ToNoCheck")}},{key:"Validate",value:function(e){var t=this;e.some((function(e){return 99!==e.ShipOrder.Status}))?this.$UI.Tips.Floating("warning","请选择状态为已取消的发货订单进行操作"):this.$UI.Tips.Modal({Type:"confirm",Content:"是否将发货订单状态变更为待检查",Callback:function(r){if(r){t.$UI.Loading.Show();var a={OrderId:e.map((function(e){return e.ShipOrder.Id})),Targetstatus:1,Remark:""};t.$Request.Post({Server:t.$Server.Warehouse,Api:{Address:t.$Api.ShipOrderChangeStatus,Login:!0},Data:a,Callback:function(e){e.IsSuccess?(t.$UI.Tips.Floating("success","发货订单状态已变更为待检查"),t.EmitOperateSuccess()):(t.$UI.Loading.Hide(),t.$Request.Error(e))}})}}})}}]),r}(u["d"]);l["a"]([Object(u["b"])()],d.prototype,"TriggerOperations",null),l["a"]([Object(u["b"])()],d.prototype,"EmitOperateSuccess",null),d=l["a"]([Object(u["a"])({name:"CheckOrder"})],d);var p=d,h=p,f=r("4023"),S=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=S.exports},"240b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Row",[e._l(e.Disputeds,(function(t,a){return r("Col",{directives:[{name:"show",rawName:"v-show",value:e.$Enums.CustomerService.AfterSalesType[a],expression:"$Enums.CustomerService.AfterSalesType[Index]"}],key:a,staticClass:"Dispted-Item",attrs:{span:"24"}},[r("b",[e._v(e._s(e.$Enums.CustomerService.AfterSalesType[a])+"：")]),e._l(t,(function(t,i){return r("a",{key:i,staticClass:"P-MR-10",attrs:{href:"javascript:void(0);"},on:{click:function(r){return e.EmitDisputedDetails(t.Id,e.$Enums.CustomerService.DisputedDetailsType[a])}}},[e._v(e._s(t.Code||t.AfterSaleCode||t.TicketId||t.OrderSn||t.ReturnSn))])}))],2)})),e.Disputeds.Items&&e.Disputeds.Items.length?r("Col",{staticClass:"P-MB-10",attrs:{span:"24"}},[r("Table",{attrs:{columns:e.Cols,data:e.Disputeds.Items,stripe:"",size:"small",height:250}})],1):e._e(),r("Col",{attrs:{span:"24"}},[e.Powers.AfterSaleOrdCreat?r("Button",{attrs:{type:"primary"},on:{click:e.EmitAfterSalesOrder}},[e._v("添加售后单")]):e._e(),e.Powers.CancelRequest&&1===e.Platform?r("CancelRequest",{staticClass:"P-ML-5"}):e._e(),e.Powers.CancelShopeeOrder&&4===e.Platform?r("ShopeeCancelBackOrder",{staticClass:"P-ML-5"}):e._e(),e.Powers.CancelBackOrder&&5===e.Platform?r("CancelBackOrder",{staticClass:"P-ML-5"}):e._e(),[5,17].includes(e.Platform)&&e.Powers.EmailWrite?r("Button",{staticClass:"P-ML-5",attrs:{type:"primary"},on:{click:e.TriggerWriteEmail}},[e._v("发送邮件")]):e._e(),[5,17].includes(e.Platform)&&e.Powers.EmailWrite?r("WriteEmail",{ref:"WriteEmail"}):e._e(),r("WriteStationMail",{ref:"WriteStationMail",attrs:{IsBtn:!1}})],1)],2)},i=[],n=(r("6bf8"),r("3231")),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("a349"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.Powers={},e.Init=!0,e.Platform=0,e.Disputeds={},e.Cols=[{title:"SKU编号",key:"SkuCode",width:135},{title:"SKU名称",render:function(e,t){return e("Tooltip",{props:{content:t.row.SkuName},class:"P-LINE-1"},t.row.SkuName)}},{title:"购买数量",key:"BuyCount",width:100},{title:"评价",key:"Evaluate"},{title:"评价内容",key:"Content"},{title:"操作",width:100,render:e.RenderOperates}],e}return Object(o["a"])(r,[{key:"EmitDisputedDetails",value:function(){}},{key:"EmitAfterSalesOrder",value:function(){}},{key:"mounted",value:function(){this.$set(this,"Powers",this.$Utils.GetUserResource.call(this,["EbayMsgSend","AfterSaleOrdCreat","CancelRequest","CancelShopeeOrder","CancelBackOrder","EmailWrite"]))}},{key:"Trigger",value:function(e,t){var r=this;this.Init&&(this.$set(this,"Platform",e),this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:this.$Api.Sales[String(e)].DisputedDetails,Login:!0},Data:t,Callback:function(e){r.$UI.Loading.Hide(),e.IsSuccess?(r.$set(r,"Init",!1),r.$set(r,"Disputeds",e.Data.Data)):r.$Request.Error(e)}}))}},{key:"RenderOperates",value:function(e,t){var r=this;return this.Powers.EbayMsgSend?e("a",{on:{click:function(){r.TriggerWriteMail(t.row)}}},"发送站内信"):""}},{key:"TriggerWriteEmail",value:function(){this.$refs.WriteEmail.TriggerWrite(this["ShipOrder/SHIP_ORDER_INFO"].BuyerEmail)}},{key:"TriggerWriteMail",value:function(e){this.$refs.WriteStationMail.ItemIdWrite(this["ShipOrder/SHIP_ORDER_INFO"].OrderCode,e.ItemId)}},{key:"Reset",value:function(){this.$set(this,"Init",!0),this.$set(this,"Disputeds",{}),this.$set(this,"Platform",0)}}]),r}(u["d"]);l["a"]([Object(u["b"])()],p.prototype,"EmitDisputedDetails",null),l["a"]([Object(u["b"])()],p.prototype,"EmitAfterSalesOrder",null),l["a"]([d["b"]],p.prototype,"ShipOrder/SHIP_ORDER_INFO",void 0),p=l["a"]([Object(u["a"])({name:"ShipOrderAfterSales",components:{CancelRequest:function(){return r.e("chunk-2d21d7e9").then(r.bind(null,"d216"))},ShopeeCancelBackOrder:function(){return r.e("chunk-2d0c8c35").then(r.bind(null,"55ed"))},CancelBackOrder:function(){return r.e("chunk-2d0d699e").then(r.bind(null,"72f3"))},WriteEmail:function(){return r.e("chunk-2d22dbe5").then(r.bind(null,"f995"))},WriteStationMail:function(){return r.e("chunk-2d0c5b2b").then(r.bind(null,"3fce"))}}})],p);var h=p,f=h,S=(r("5bd4"),r("4023")),m=Object(S["a"])(f,a,i,!1,null,"452e903e",null);t["default"]=m.exports},"2b6e":function(e,t,r){var a=r("ab04"),i=r("4ad5"),n=r("5f98"),o=r("7bd7").f,s=function(e){return function(t){var r,s=n(t),c=i(s),l=c.length,u=0,d=[];while(l>u)r=c[u++],a&&!o.call(s,r)||d.push(e?[r,s[r]]:s[r]);return d}};e.exports={entries:s(!0),values:s(!1)}},"32f4":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("取消")])],1)},i=[],n=(r("76bb"),r("6ed5"),r("430a")),o=r("e24e"),s=r("3231"),c=r("064d"),l=r("46d7"),u=r("631e"),d=r("4a81"),p=r("d11d"),h=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(c["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("ToCancel")}},{key:"Validate",value:function(e){var t,r=this,a=Object(o["a"])(e);try{var i=function(){var e=t.value;if(![1,7,8,9].some((function(t){return t===e.ShipOrder.Status})))return r.$UI.Tips.Floating("warning","请选择状态为待检查、缺货、已拦截、联系客户的发货订单进行操作"),{v:void 0}};for(a.s();!(t=a.n()).done;){var s=i();if("object"===Object(n["a"])(s))return s.v}}catch(c){a.e(c)}finally{a.f()}this.$UI.Tips.Modal({Type:"confirm",Content:"是否将发货订单状态变更为取消",Callback:function(t){if(t){r.$UI.Loading.Show();var a={OrderId:e.map((function(e){return e.ShipOrder.Id})),Targetstatus:99,Remark:""};r.$Request.Post({Server:r.$Server.Warehouse,Api:{Address:r.$Api.ShipOrderChangeStatus,Login:!0},Data:a,Callback:function(e){e.IsSuccess?(r.$UI.Tips.Floating("success","发货订单状态已变更为取消"),r.EmitOperateSuccess()):(r.$UI.Loading.Hide(),r.$Request.Error(e))}})}}})}}]),r}(p["d"]);d["a"]([Object(p["b"])()],h.prototype,"TriggerOperations",null),d["a"]([Object(p["b"])()],h.prototype,"EmitOperateSuccess",null),h=d["a"]([Object(p["a"])({name:"CancelOrder"})],h);var f=h,S=f,m=r("4023"),O=Object(m["a"])(S,a,i,!1,null,null,null);t["default"]=O.exports},4057:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("重发")])],1)},i=[],n=(r("76bb"),r("e24e")),o=r("3231"),s=r("064d"),c=r("46d7"),l=r("631e"),u=r("4a81"),d=r("d11d"),p=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(o["a"])(this,r),t.apply(this,arguments)}return Object(s["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("ReSentOrder")}},{key:"Validate",value:function(e){var t,r=this,a=Object(n["a"])(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(6!==i.ShipOrder.Status)return void this.$UI.Tips.Floating("warning","请选择状态为已发货的发货订单进行操作");this.$UI.Tips.Modal({Type:"confirm",Content:"是否重发发货订单",Callback:function(t){if(t){r.$UI.Loading.Show();var a=e.map((function(e){return e.ShipOrder.Id}));r.$Request.Post({Server:r.$Server.Warehouse,Api:{Address:r.$Api.ResendOrder,Login:!0},Data:a,Callback:function(e){e.IsSuccess?(r.$UI.Tips.Floating("success","重发发货订单成功"),r.EmitOperateSuccess()):(r.$UI.Loading.Hide(),r.$Request.Error(e))}})}}})}}catch(o){a.e(o)}finally{a.f()}}}]),r}(d["d"]);u["a"]([Object(d["b"])()],p.prototype,"TriggerOperations",null),u["a"]([Object(d["b"])()],p.prototype,"EmitOperateSuccess",null),p=u["a"]([Object(d["a"])({name:"ResentOrder"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,null,null);t["default"]=m.exports},"4b6b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{attrs:{model:e.SHIP_ORDER_ADDRESS,"label-width":90,inline:""}},[r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"买家ID："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.BuyerUserId||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"收件人："}},[r("p",[e._v(e._s(e.SHIP_ORDER_ADDRESS.BuyerFullName||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"国家："}},[r("p",[e._v(e._s((e.SHIP_ORDER_ADDRESS.Country?e.SHIP_ORDER_ADDRESS.Country.CountryNameCn:"-")+"("+(e.SHIP_ORDER_ADDRESS.Country?e.SHIP_ORDER_ADDRESS.Country.CountryName:"-")+")"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"省/州："}},[r("p",[e._v(e._s(e.SHIP_ORDER_ADDRESS.BuyerState||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"城市："}},[r("p",[e._v(e._s(e.SHIP_ORDER_ADDRESS.BuyerCity||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"地址1："}},[r("p",[e._v(e._s(e.SHIP_ORDER_ADDRESS.BuyerStreet1||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"地址2："}},[r("p",[e._v(e._s(e.SHIP_ORDER_ADDRESS.BuyerStreet2||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"邮编："}},[r("p",[e._v(e._s(e.SHIP_ORDER_ADDRESS.BuyerZipCode||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"买家Email："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.BuyerEmail||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"电话："}},[r("p",[e._v(e._s(e.SHIP_ORDER_ADDRESS.BuyerPhone||"-"))])])],1)},i=[],n=r("3231"),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("a349"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(n["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"SHIP_ORDER_ADDRESS",get:function(){return this["ShipOrder/SHIP_ORDER_ADDRESS"]}},{key:"SHIP_ORDER_INFO",get:function(){return this["ShipOrder/SHIP_ORDER_INFO"]}}]),r}(u["d"]);l["a"]([d["b"]],p.prototype,"ShipOrder/SHIP_ORDER_ADDRESS",void 0),l["a"]([d["b"]],p.prototype,"ShipOrder/SHIP_ORDER_INFO",void 0),p=l["a"]([Object(u["a"])({name:"ShipOrderBaseADDRESS"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,"6400c08a",null);t["default"]=m.exports},"4b77":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("取消FLS包裹单")])],1)},i=[],n=r("3231"),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("a349"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(n["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"Trigger",value:function(){var e=this;this.$UI.Tips.Modal({Type:"confirm",Content:"是否确认取消FLS包裹单",Callback:function(t){t&&(e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Warehouse,Api:{Address:e.$Api.CancelFlsShipOrder,Login:!0},Data:e["SHIP_ORDER_INFO"].Id,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success","取消FLS包裹单成功"),e["ShipOrder/UPDATE_SHIP_ORDER_INFO"]()):(e.$UI.Loading.Hide(),e.$Request.Error(t))}}))}})}},{key:"SHIP_ORDER_INFO",get:function(){return this["ShipOrder/SHIP_ORDER_INFO"]}}]),r}(u["d"]);l["a"]([d["a"]],p.prototype,"ShipOrder/UPDATE_SHIP_ORDER_INFO",void 0),l["a"]([d["b"]],p.prototype,"ShipOrder/SHIP_ORDER_INFO",void 0),p=l["a"]([Object(u["a"])({name:"CancelFLS"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,null,null);t["default"]=m.exports},"4f9c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("生成拣货批次")])],1)},i=[],n=(r("76bb"),r("6ed5"),r("6bf8"),r("7623"),r("522a"),r("52af"),r("430a")),o=r("e24e"),s=r("3231"),c=r("064d"),l=r("46d7"),u=r("631e"),d=r("4a81"),p=r("d11d"),h=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(c["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("CreateBatchOrder")}},{key:"Validate",value:function(e){var t,r=this,a=[],i=[],s=Object(o["a"])(e);try{var c=function(){var e=t.value;return 2!==e.ShipOrder.Status?(r.$UI.Tips.Floating("warning","请选择状态为已确认的发货订单进行操作"),{v:void 0}):e.ShipOrder.IsException?(r.$UI.Tips.Floating("warning","请选择非异常的发货订单进行操作"),{v:void 0}):[15,16,17].some((function(t){return t===e.ShipOrder.ApiType}))?(r.$UI.Tips.Floating("warning","请选择非海外仓的发货订单进行操作"),{v:void 0}):([9,27,80,81,85,86,99,101,105,107,113,118,119,120,148,150,151,154,156,157,158,161,162,170,171,172,173,174,184].some((function(t){return t===e.ShipOrder.ShippingMethodId}))?a.push(15):[28,108,138,147,176,177].some((function(t){return t===e.ShipOrder.ShippingMethodId}))?a.push(20):a.push(10),void(e.ShipOrder.ItemType<=3?i.push(1):i.push(2)))};for(s.s();!(t=s.n()).done;){var l=c();if("object"===Object(n["a"])(l))return l.v}}catch(p){s.e(p)}finally{s.f()}var u=new Set(a),d=new Set(i);u.size>1?this.$UI.Tips.Floating("warning","请选择面单大小一致的发货订单进行操作"):d.size>1?this.$UI.Tips.Floating("warning","请选择明细类型相同的发货订单进行操作"):1===i[0]&&e.length>500?this.$UI.Tips.Floating("warning","明细类型为单品的发货订单单次生成拣货批次不可超过500条"):2===i[0]&&e.length>100?this.$UI.Tips.Floating("warning","明细类型为多品的发货订单单次生成拣货批次不可超过100条"):this.$UI.Tips.Modal({Type:"confirm",Content:"是否确认生成拣货批次",Callback:function(t){t&&(r.$UI.Loading.Show(),r.$Request.Post({Server:r.$Server.Warehouse,Api:{Address:r.$Api.CreateBatchOrder,Login:!0},Data:e.map((function(e){return e.ShipOrder.Id})),Callback:function(e){r.$UI.Loading.Hide(),e.IsSuccess?setTimeout((function(){r.$UI.Tips.Modal({Type:"success",Content:"生成拣货批次成功，批次号为：".concat(e.Data.BatchCode),Callback:function(e){r.EmitOperateSuccess()}})}),500):r.$Request.Error(e)}}))}})}}]),r}(p["d"]);d["a"]([Object(p["b"])()],h.prototype,"TriggerOperations",null),d["a"]([Object(p["b"])()],h.prototype,"EmitOperateSuccess",null),h=d["a"]([Object(p["a"])({name:"CreateBatch"})],h);var f=h,S=f,m=r("4023"),O=Object(m["a"])(S,a,i,!1,null,null,null);t["default"]=O.exports},5266:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{attrs:{model:e.SHIP_ORDER_INFO,"label-width":90,inline:""}},[r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"发货仓库："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.WarehouseName||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"物流渠道："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.MethodName||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"拣货批次："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.BatchNumber))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"跟踪号："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.TrackingNumber||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"重量："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.Weight||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"运费："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.ShipFee||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"发货员："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.ShipUserName||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"发货时间："}},[r("p",[e._v(e._s(e.$UI.Render.Date(e.SHIP_ORDER_INFO.ShipedTime||"")))])])],1)},i=[],n=r("3231"),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("a349"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(n["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"SHIP_ORDER_INFO",get:function(){return this["ShipOrder/SHIP_ORDER_INFO"]}}]),r}(u["d"]);l["a"]([d["b"]],p.prototype,"ShipOrder/SHIP_ORDER_INFO",void 0),p=l["a"]([Object(u["a"])({name:"ShipOrderBaseADDRESS"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,"1f9a687a",null);t["default"]=m.exports},"5bd4":function(e,t,r){"use strict";var a=r("a6f0"),i=r.n(a);i.a},6168:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("更新eDIS包裹单")])],1)},i=[],n=r("3231"),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(n["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("UpdEdisPackage")}},{key:"Validate",value:function(e){var t=this;this.$UI.Tips.Modal({Type:"confirm",Content:"是否确认更新eDIS包裹单",Callback:function(r){r&&(t.$UI.Loading.Show(),t.$Request.Post({Server:t.$Server.Warehouse,Api:{Address:t.$Api.ReSendEdisLogisticsOrder,Login:!0},Data:e[0].ShipOrder.Id,Callback:function(e){e.IsSuccess?(t.$UI.Tips.Floating("success","更新eDIS包裹单成功"),t.EmitOperateSuccess()):(t.$UI.Loading.Hide(),t.$Request.Error(e))}}))}})}}]),r}(u["d"]);l["a"]([Object(u["b"])()],d.prototype,"TriggerOperations",null),l["a"]([Object(u["b"])()],d.prototype,"EmitOperateSuccess",null),d=l["a"]([Object(u["a"])({name:"UpdateEdis"})],d);var p=d,h=p,f=r("4023"),S=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=S.exports},"67ca":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Table",{attrs:{columns:e.Cols,data:e.SHIP_ORDER_ITEMS,size:"small",stripe:"",height:e.CalculateHeight()}}),r("ShowBigPic",{ref:"ShowBigPic"})],1)},i=[],n=(r("d9b9"),r("76bb"),r("6bf8"),r("3231")),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("a349"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.Cols=[{title:" ",width:60,align:"center",render:function(t,r){return t("div",{class:"P-Pointer P-List-Img",style:{"background-image":"url(".concat(e.$Server.File,"/").concat(r.row.Sku.DefaultImage,")")},on:{click:function(){e.$refs.ShowBigPic.Trigger(r.row.Sku.DefaultImage)}}})}},{title:"SKU编号/产品名称",width:180,render:function(e,t){return e("Tooltip",{class:"P-LINE-1",props:{content:t.row.Sku.SkuName}},[e("p",t.row.SkuCode),e("p",{class:"P-LINE-1"},t.row.Sku.SkuName)])}},{title:"ItemID",key:"ItemId",render:function(t,r){return e.RenderItemId(t,r)}},{title:"平台单号/平台交易号",width:200,render:function(e,t){var r=[{Key:"单",Value:t.row.PlatformOrderId||"-"},{Key:"交",Value:t.row.PlatformTransactionId||"-"}],a=[],i=r.map((function(t){return a.push(e("p","[".concat(t.Key,"] ").concat(t.Value))),e("p",{class:"P-LINE-1"},[e("span",{class:"P-Table-Tip P-BG-Primary"},t.Key),e("span",t.Value)])})),n=e("div",{slot:"content"},a);return e("Tooltip",{class:"P-W-100-Percent P-MT-5"},i.concat(n))}},{title:"交易金额",render:function(e,t){return e("p","".concat(t.row.PayAmount," ").concat(t.row.PayCurrency))}},{title:"数量",key:"Quantity"},{title:"到货单号",key:"PaoCode",render:function(e,t){return e("span",t.row.PaoCode||"-")}},{title:"当前库存/在途库存",render:function(e,t){var r=[{Key:"当",Value:t.row.UsableQuantity||"-"},{Key:"途",Value:t.row.PurchasingQuantity||"-"}],a=[],i=r.map((function(t){return a.push(e("p","[".concat(t.Key,"] ").concat(t.Value))),e("p",{class:"P-LINE-1"},[e("span",{class:"P-Table-Tip P-BG-Primary"},t.Key),e("span",t.Value)])})),n=e("div",{slot:"content"},a);return e("Tooltip",{class:"P-W-100-Percent P-MT-5"},i.concat(n))}},{title:"货架号",key:"LocationCode",render:function(e,t){return e("span",t.row.LocationCode||"-")}}],e}return Object(o["a"])(r,[{key:"CalculateHeight",value:function(){return 500}},{key:"RenderItemId",value:function(e,t){return this.$Enums.Sales.ItemIdLink[this.SHIP_ORDER_INFO.Platform]?e("a",{attrs:{href:"".concat(this.$Enums.Sales.ItemIdLink[this.SHIP_ORDER_INFO.Platform]).concat(t.row.ItemId),target:"_blank"}},t.row.ItemId):e("p",t.row.ItemId)}},{key:"SHIP_ORDER_INFO",get:function(){return this["ShipOrder/SHIP_ORDER_INFO"]}},{key:"SHIP_ORDER_ITEMS",get:function(){return this["ShipOrder/SHIP_ORDER_ITEMS"]}}]),r}(u["d"]);l["a"]([d["b"]],p.prototype,"ShipOrder/SHIP_ORDER_INFO",void 0),l["a"]([d["b"]],p.prototype,"ShipOrder/SHIP_ORDER_ITEMS",void 0),p=l["a"]([Object(u["a"])({name:"ShipOrderItems",components:{ShowBigPic:function(){return r.e("chunk-c0a1d894").then(r.bind(null,"6156"))}}})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,"7bfa1bf8",null);t["default"]=m.exports},6838:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("导入发货单")]),r("Modal",{attrs:{title:"导入发货单"},on:{"on-cancel":e.CancelModal},model:{value:e.ImportModal,callback:function(t){e.ImportModal=t},expression:"ImportModal"}},[r("Form",{attrs:{"label-width":100,onsubmit:"return false;"}},[r("FormItem",{attrs:{label:"上传文件："}},[r("Upload",{attrs:{action:"","before-upload":e.HandleSelect,accept:"application/vnd.ms-excel",format:["xls","xlsx"]}},[r("Button",{attrs:{type:"primary"}},[e._v("选择文件")]),r("p",{staticClass:"P-Text-Info"},[e._v(e._s(e.File.name))])],1)],1),r("FormItem",{attrs:{label:"下载模板："}},[r("a",{attrs:{href:e.$Server.Warehouse+"/Template/ShipOrder_Template.xlsx",download:""}},[e._v("发货单导入模板.xlsx")])])],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},i=[],n=(r("d9b9"),r("1ff3"),r("3231")),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.ImportModal=!1,e.File={},e}return Object(o["a"])(r,[{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.$set(this,"ImportModal",!0)}},{key:"HandleSelect",value:function(e){return(new this.$Validate.Xls).Valid(e)?this.$set(this,"File",e):this.$UI.Tips.Floating("warning","请选择格式为xls/xlsx的文件"),!1}},{key:"Validate",value:function(){this.File.name?this.PostImport():this.$UI.Tips.Floating("warning","请选择上传文件")}},{key:"PostImport",value:function(){var e=this;this.$UI.Loading.Show();var t=new FormData;t.append("File",this.File),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.ShipOrderImport,Login:!0},Data:t,Form:!0,Callback:function(t){if(e.$UI.Loading.Hide(),t.IsSuccess){var r="";t.Data.Data.FailCount<1?(r="本次所有发货订单均导入成功，共导入[".concat(t.Data.Data.SuccessCount,"]个发货订单。"),e.CancelModal()):r="本次导入成功[".concat(t.Data.Data.SuccessCount,"]个发货订单，导入失败[").concat(t.Data.Data.FailCount,']个发货订单，详情请下载导入失败发货订单表格进行查看。<a download href="').concat(e.$Server.Warehouse).concat(t.Data.Data.Url,'" target="_blank">导入失败发货订单.xls</a>'),setTimeout((function(){e.$UI.Tips.Modal({Type:"success",Content:r,Callback:function(r){t.Data.Data.SuccessCount>0&&e.EmitOperateSuccess()}})}),500)}else e.$Request.Error(t)}})}},{key:"CancelModal",value:function(){this.$set(this,"ImportModal",!1),this.File={}}}]),r}(u["d"]);l["a"]([Object(u["b"])()],d.prototype,"EmitOperateSuccess",null),d=l["a"]([Object(u["a"])({name:"ImportShipOrder"})],d);var p=d,h=p,f=r("4023"),S=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=S.exports},"70e0":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("重打面单")])],1)},i=[],n=(r("9660"),r("0b78"),r("3231")),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("216d"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(n["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("PrintLable")}},{key:"Validate",value:function(e){var t=this;this.$UI.Tips.Modal({Type:"confirm",Content:"是否对选中的订单进行重打面单操作？",Callback:function(r){if(r){var a=[],i=[],n=[];e.forEach((function(e){6==e.ShipOrder.ApiType?a.push(e.ShipOrder.Id):(i.push(e.Address.OrderId),n.push(e.ShipOrder.OrderCode))})),a.length>0&&t.GetPmsPrintData(a,i),i.length>0&&t.GetPrintData(i,n)}}})}},{key:"GetPmsPrintData",value:function(e,t){var r=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.ShipOrderPrintPms,Login:!0},Data:{OrderId:e,IsRePrint:!0},Callback:function(e){r.$UI.Loading.Hide(),e.IsSuccess?(Object(d["b"])(e.Data.Data),0==t.length&&r.$UI.Tips.Floating("success","订单重打面单成功")):r.$Request.Error(e)}})}},{key:"GetPrintData",value:function(e,t){var r=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.ShipOrderGetPrintData,Login:!0},Data:{OrderCode:t,OrderId:e},Callback:function(e){r.$UI.Loading.Hide(),e.IsSuccess?(Object(d["a"])(e.Data.Data),r.$UI.Tips.Floating("success","重打面单成功")):r.$Request.Error(e)}})}}]),r}(u["d"]);l["a"]([Object(u["b"])()],p.prototype,"TriggerOperations",null),l["a"]([Object(u["b"])()],p.prototype,"EmitOperateSuccess",null),p=l["a"]([Object(u["a"])({name:"PrintLabel"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,null,null);t["default"]=m.exports},"72f2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("合并")])],1)},i=[],n=(r("d9b9"),r("5d9d"),r("6ed5"),r("cee1"),r("6bf8"),r("7623"),r("522a"),r("52af"),r("430a")),o=r("e24e"),s=r("3231"),c=r("064d"),l=r("46d7"),u=r("631e"),d=r("4a81"),p=r("d11d"),h=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(c["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("MergeShipOrder")}},{key:"Validate",value:function(e){var t=this;if(e.length<2)this.$UI.Tips.Floating("warning","请选择两条以上状态为已确认、缺货、已拦截或联系客户的发货订单进行操作");else{var r,a=[],i=[],s=[],c=[],l=Object(o["a"])(e);try{var u=function(){var e=r.value;if(![2,7,8,9].some((function(t){return t===e.ShipOrder.Status})))return t.$UI.Tips.Floating("warning","请选择状态为已确认、缺货、已拦截、联系客户的发货订单进行操作"),{v:void 0};a.push(e.ShipOrder.Status),i.push("Platform:".concat(e.ShipOrder.Platform,",Warehouse:").concat(e.ShipOrder.ShipWarehouseId,",Country:").concat(e.Address.Country?e.Address.Country.CountryCode:"",",\n                    BuyerUserId:").concat(e.ShipOrder.BuyerUserId,",BuyerFullName:").concat(e.Address.BuyerFullName,",BuyerState:").concat(e.Address.BuyerState,",BuyerCity:").concat(e.Address.BuyerCity,",\n                    BuyerStreet1:").concat(e.Address.BuyerStreet1,",BuyerStreet2:").concat(e.Address.BuyerStreet2,",BuyerPhone:").concat(e.Address.BuyerPhone,",BuyerZipCode:").concat(e.Address.BuyerZipCode)),s.push(new Date(e.ShipOrder.PlatOrderTime).getTime()),c.push(e.ShipOrder.Id)};for(l.s();!(r=l.n()).done;){var d=u();if("object"===Object(n["a"])(d))return d.v}}catch(f){l.e(f)}finally{l.f()}var p=new Set(a),h=new Set(i);p.size>1?this.$UI.Tips.Floating("warning","请选择同一状态的发货订单进行操作"):h.size>1?this.$UI.Tips.Floating("warning","订单信息不一致，无法合并"):this.$UI.Tips.Modal({Type:"confirm",Content:"是否合并发货订单",Callback:function(e){if(e){t.$UI.Loading.Show();var r=Math.min.apply(Math,s),a=s.indexOf(r),i={TargetOrderId:c.splice(a,1)[0],SourceId:c};t.$Request.Post({Server:t.$Server.Warehouse,Api:{Address:t.$Api.MergeOrder,Login:!0},Data:i,Callback:function(e){e.IsSuccess?(t.$UI.Tips.Floating("success","合并发货订单成功"),t.EmitOperateSuccess()):(t.$UI.Loading.Hide(),t.$Request.Error(e))}})}}})}}}]),r}(p["d"]);d["a"]([Object(p["b"])()],h.prototype,"TriggerOperations",null),d["a"]([Object(p["b"])()],h.prototype,"EmitOperateSuccess",null),h=d["a"]([Object(p["a"])({name:"MergeOrder"})],h);var f=h,S=f,m=r("4023"),O=Object(m["a"])(S,a,i,!1,null,null,null);t["default"]=O.exports},"738f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("导出明细错误订单")])],1)},i=[],n=r("3231"),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("1459"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(n["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"EmitOperateSuccess",value:function(){}},{key:"Validate",value:function(){var e=this;this.$UI.Tips.Modal({Type:"confirm",Content:"是否确认执行导出明细错误订单操作",Callback:function(t){t&&(e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Warehouse,Api:{Address:e.$Api.ShipOrderSkuErrorExport,Login:!0},Data:new d["a"].ShipOrderSearch({Status:1}),Callback:function(t){e.$UI.Loading.Hide(),t.IsSuccess?setTimeout((function(){e.$UI.Tips.Modal({Type:"success",Content:"创建导出发货订单任务成功。请到报表-导出管理模块查看目前正在进行的导出任务，并在导出成功后可以下载对应数据。"})}),500):e.$Request.Error(t)}}))}})}}]),r}(u["d"]);l["a"]([Object(u["b"])()],p.prototype,"EmitOperateSuccess",null),p=l["a"]([Object(u["a"])({name:"ExportSkuErrorOrder"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,null,null);t["default"]=m.exports},7631:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("设置缺货")])],1)},i=[],n=(r("76bb"),r("6ed5"),r("3231")),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(n["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("ToOutStock")}},{key:"Validate",value:function(e){var t=this;e.some((function(e){return 3!==e.ShipOrder.Status}))?this.$UI.Tips.Floating("warning","请选择状态为待拣货的发货订单进行操作"):this.$UI.Tips.Modal({Type:"confirm",Content:"是否将发货订单状态变更为缺货",Callback:function(r){if(r){t.$UI.Loading.Show();var a={OrderId:e.map((function(e){return e.ShipOrder.Id})),Targetstatus:7,Remark:""};t.$Request.Post({Server:t.$Server.Warehouse,Api:{Address:t.$Api.ShipOrderChangeStatus,Login:!0},Data:a,Callback:function(e){e.IsSuccess?(t.$UI.Tips.Floating("success","发货订单状态已变更为缺货"),t.EmitOperateSuccess()):(t.$UI.Loading.Hide(),t.$Request.Error(e))}})}}})}}]),r}(u["d"]);l["a"]([Object(u["b"])()],d.prototype,"TriggerOperations",null),l["a"]([Object(u["b"])()],d.prototype,"EmitOperateSuccess",null),d=l["a"]([Object(u["a"])({name:"Stockout"})],d);var p=d,h=p,f=r("4023"),S=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=S.exports},"7adcd":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("审核通过")])],1)},i=[],n=(r("5e8c"),r("76bb"),r("9b6f"),r("e24e")),o=r("3231"),s=r("064d"),c=r("46d7"),l=r("631e"),u=r("4a81"),d=r("d11d"),p=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(o["a"])(this,r),t.apply(this,arguments)}return Object(s["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("ReviewShipOrder")}},{key:"Validate",value:function(e){var t,r=this,a=Object(n["a"])(e);try{for(a.s();!(t=a.n()).done;){var i=t.value,o=i.ShipOrder.Platform,s=i.ShipOrder.AutoMatchRemark.toLowerCase();if(!(1===o&&s.includes("收款账号")||2===o&&s.includes("风控")))return void this.$UI.Tips.Floating("warning","请选择eBay收款账号错误或Wish风控订单进行操作");this.$UI.Tips.Modal({Type:"confirm",Content:"是否确认执行审核通过操作",Callback:function(t){t&&(r.$UI.Loading.Show(),r.$Request.Post({Server:r.$Server.Warehouse,Api:{Address:r.$Api.CleanAutoMatchRemark,Login:!0},Data:e.map((function(e){return e.ShipOrder.Id})),Callback:function(e){e.IsSuccess?(r.$UI.Tips.Floating("success","审核成功"),r.EmitOperateSuccess()):(r.$UI.Loading.Hide(),r.$Request.Error(e))}}))}})}}catch(c){a.e(c)}finally{a.f()}}}]),r}(d["d"]);u["a"]([Object(d["b"])()],p.prototype,"TriggerOperations",null),u["a"]([Object(d["b"])()],p.prototype,"EmitOperateSuccess",null),p=u["a"]([Object(d["a"])({name:"ReviewOrder"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,null,null);t["default"]=m.exports},"81fc":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("确认")])],1)},i=[],n=(r("76bb"),r("6ed5"),r("430a")),o=r("e24e"),s=r("3231"),c=r("064d"),l=r("46d7"),u=r("631e"),d=r("4a81"),p=r("d11d"),h=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(c["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("ToConfirmed")}},{key:"Validate",value:function(e){var t,r=this,a=Object(o["a"])(e);try{var i=function(){var a=t.value;return[1,7,8,9].some((function(e){return e===a.ShipOrder.Status}))?a.ShipOrder.ShipWarehouseId&&a.ShipOrder.ShippingMethodId?void r.$UI.Tips.Modal({Type:"confirm",Content:"是否将发货订单状态变更为已确认",Callback:function(t){if(t){r.$UI.Loading.Show();var a={OrderId:e.map((function(e){return e.ShipOrder.Id})),Targetstatus:2,Remark:""};r.$Request.Post({Server:r.$Server.Warehouse,Api:{Address:r.$Api.ShipOrderChangeStatus,Login:!0},Data:a,Callback:function(e){e.IsSuccess?(r.$UI.Tips.Floating("success","发货订单状态已变更为已确认"),r.EmitOperateSuccess()):(r.$UI.Loading.Hide(),r.$Request.Error(e))}})}}}):(r.$UI.Tips.Floating("warning","请选择已分配发货仓和物流渠道的发货订单进行操作"),{v:void 0}):(r.$UI.Tips.Floating("warning","请选择状态为待检查、缺货、已拦截、联系客户的发货订单进行操作"),{v:void 0})};for(a.s();!(t=a.n()).done;){var s=i();if("object"===Object(n["a"])(s))return s.v}}catch(c){a.e(c)}finally{a.f()}}}]),r}(p["d"]);d["a"]([Object(p["b"])()],h.prototype,"TriggerOperations",null),d["a"]([Object(p["b"])()],h.prototype,"EmitOperateSuccess",null),h=d["a"]([Object(p["a"])({name:"ConfirmOrder"})],h);var f=h,S=f,m=r("4023"),O=Object(m["a"])(S,a,i,!1,null,null,null);t["default"]=O.exports},"8b48":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("重新下单")])],1)},i=[],n=(r("76bb"),r("3231")),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(n["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("OrderReCreate")}},{key:"Validate",value:function(e){var t=this;this.$UI.Tips.Modal({Type:"confirm",Content:"是否确认重新下单",Callback:function(r){r&&(t.$UI.Loading.Show(),t.$Request.Post({Server:t.$Server.Warehouse,Api:{Address:t.$Api.ReCreateShipOrder,Login:!0},Data:e.map((function(e){return e.ShipOrder.Id})),Callback:function(e){e.IsSuccess?(t.$UI.Tips.Floating("success","重新下单成功"),t.EmitOperateSuccess()):(t.$UI.Loading.Hide(),t.$Request.Error(e))}}))}})}}]),r}(u["d"]);l["a"]([Object(u["b"])()],d.prototype,"TriggerOperations",null),l["a"]([Object(u["b"])()],d.prototype,"EmitOperateSuccess",null),d=l["a"]([Object(u["a"])({name:"OrderReCreate"})],d);var p=d,h=p,f=r("4023"),S=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=S.exports},"8f28":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("拦截")]),r("Modal",{attrs:{title:"拦截",width:600},on:{"on-cancel":e.CancelModal},model:{value:e.HoldUpModal,callback:function(t){e.HoldUpModal=t},expression:"HoldUpModal"}},[r("Form",{ref:"HoldUpForm",attrs:{model:e.HoldUpForm,"label-width":80,onsubmit:"return false;"}},[r("FormItem",{attrs:{label:"备注：",prop:"Remark"}},[r("Input",{ref:"RemarkIpt",attrs:{type:"textarea",placeholder:"拦截备注",rows:5,autosize:{minRows:5,maxRows:5}},model:{value:e.HoldUpForm.Remark,callback:function(t){e.$set(e.HoldUpForm,"Remark",t)},expression:"HoldUpForm.Remark"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Post}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},i=[],n=(r("76bb"),r("6ed5"),r("430a")),o=r("e24e"),s=r("3231"),c=r("064d"),l=r("46d7"),u=r("631e"),d=r("4a81"),p=r("d11d"),h=r("1459"),f=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(s["a"])(this,r),e=t.apply(this,arguments),e.HoldUpModal=!1,e.HoldUpForm=new h["a"].Remark,e}return Object(c["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("ToHoldUp")}},{key:"Validate",value:function(e){var t,r=this,a=Object(o["a"])(e);try{var i=function(){var e=t.value;if(![2,3,4,5].some((function(t){return t===e.ShipOrder.Status}))||[15,16,17].some((function(t){return t===e.ShipOrder.ApiType})))return r.$UI.Tips.Floating("warning","请选择状态为已确认、待拣货、已拣货、已打包，发货仓不为海外仓的发货订单进行操作"),{v:void 0}};for(a.s();!(t=a.n()).done;){var s=i();if("object"===Object(n["a"])(s))return s.v}}catch(c){a.e(c)}finally{a.f()}this.HoldUpForm.OrderId=e.map((function(e){return e.ShipOrder.Id})),this.$set(this,"HoldUpModal",!0),this.$nextTick((function(){r.$refs.RemarkIpt.focus()}))}},{key:"Post",value:function(){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.ShipOrderSetHolUp,Login:!0},Data:this.HoldUpForm,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success","发货订单已标识为拦截"),e.EmitOperateSuccess(),e.CancelModal()):(e.$UI.Loading.Hide(),e.$Request.Error(t))}})}},{key:"CancelModal",value:function(){this.HoldUpForm=new h["a"].Remark,this.$set(this,"HoldUpModal",!1)}}]),r}(p["d"]);d["a"]([Object(p["b"])()],f.prototype,"TriggerOperations",null),d["a"]([Object(p["b"])()],f.prototype,"EmitOperateSuccess",null),f=d["a"]([Object(p["a"])({name:"HoldUpOrder"})],f);var S=f,m=S,O=r("4023"),v=Object(O["a"])(m,a,i,!1,null,null,null);t["default"]=v.exports},"93ab":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("录入跟踪号")]),r("Modal",{attrs:{title:"录入跟踪号"},on:{"on-cancel":e.CancelModal},model:{value:e.TrackingNumeberModal,callback:function(t){e.TrackingNumeberModal=t},expression:"TrackingNumeberModal"}},[r("Form",{ref:"TrackingNumberInfo",attrs:{model:e.TrackingNumberInfo,rules:e.TrackingNumberRules,"label-width":90,onsubmit:"return false;"}},[r("FormItem",{attrs:{label:"发货单号：",prop:"OrderCode"}},[r("Input",{ref:"OrderCodeIpt",attrs:{placeholder:"发货单号"},on:{"on-enter":e.Validate},model:{value:e.TrackingNumberInfo.OrderCode,callback:function(t){e.$set(e.TrackingNumberInfo,"OrderCode",t)},expression:"TrackingNumberInfo.OrderCode"}})],1),r("FormItem",{attrs:{label:"跟踪号：",prop:"TrackCode"}},[r("Input",{ref:"TrackCodeIpt",attrs:{placeholder:"跟踪号"},on:{"on-enter":e.Validate},model:{value:e.TrackingNumberInfo.TrackCode,callback:function(t){e.$set(e.TrackingNumberInfo,"TrackCode",t)},expression:"TrackingNumberInfo.TrackCode"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},i=[],n=r("3231"),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("1459"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.TrackingNumeberModal=!1,e.TrackingNumberInfo=new d["a"].SetTrackingNumber,e.TrackingNumberRules={OrderCode:[{required:!0,message:"请输入发货单号"}],TrackCode:[{required:!0,message:"请输入跟踪号"}]},e.Success=!1,e}return Object(o["a"])(r,[{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.$set(this,"TrackingNumeberModal",!0),this.ResetForm()}},{key:"Validate",value:function(){var e=this;this.TrackingNumberInfo.OrderCode?this.TrackingNumberInfo.TrackCode||this.$refs.TrackCodeIpt.focus():this.$refs.OrderCodeIpt.focus(),this.$refs.TrackingNumberInfo.validate((function(t){t&&(e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Warehouse,Api:{Address:e.$Api.SetTrackNumberByCode,Login:!0},Data:e.TrackingNumberInfo,Callback:function(t){e.$UI.Loading.Hide(),t.IsSuccess?(e.$set(e,"Success",!0),e.$UI.Tips.Floating("success","录入跟踪号成功"),e.ResetForm()):e.$Request.Error(t)}}))}))}},{key:"ResetForm",value:function(){var e=this;this.$set(this,"TrackingNumberInfo",new d["a"].SetTrackingNumber),this.$nextTick((function(){e.$refs.OrderCodeIpt.focus(),e.$refs.TrackingNumberInfo.resetFields()}))}},{key:"CancelModal",value:function(){var e=this;this.$set(this,"TrackingNumeberModal",!1),this.ResetForm(),this.Success&&(this.EmitOperateSuccess(),this.$nextTick((function(){e.$set(e,"Success",!1)})))}}]),r}(u["d"]);l["a"]([Object(u["b"])()],p.prototype,"EmitOperateSuccess",null),p=l["a"]([Object(u["a"])({name:"SetTrackNumber"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,null,null);t["default"]=m.exports},"9a22":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ShipOrder",{attrs:{SearchInit:e.SearchInit,UsableOperations:e.UsableOperations,Page:"WaitAudit"}})},i=[],n=r("3231"),o=r("46d7"),s=r("631e"),c=r("4a81"),l=r("d11d"),u=r("1459"),d=function(e){Object(o["a"])(r,e);var t=Object(s["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.SearchInit=new u["a"].ShipOrderSearch,e.UsableOperations=["ToConfirmed","ToCancel","ReviewShipOrder"],e}return r}(l["d"]);d=c["a"]([Object(l["a"])({name:"WaitAuditOrder"})],d);var p=d,h=p,f=r("4023"),S=Object(f["a"])(h,a,i,!1,null,"3a0a4283",null);t["default"]=S.exports},a6f0:function(e,t,r){},a710:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("释放订单到已确认")])],1)},i=[],n=(r("76bb"),r("6ed5"),r("430a")),o=r("e24e"),s=r("3231"),c=r("064d"),l=r("46d7"),u=r("631e"),d=r("4a81"),p=r("d11d"),h=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(c["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("ReturnGoods")}},{key:"Validate",value:function(e){var t,r=this,a=Object(o["a"])(e);try{var i=function(){var e=t.value;return[3,4,5].some((function(t){return t===e.ShipOrder.Status}))?79===e.ShipOrder.ShipWarehouseId?(r.$UI.Tips.Floating("warning","请选择非分销的发货订单进行操作"),{v:void 0}):void 0:(r.$UI.Tips.Floating("warning","请选择状态为待拣货、已拣货、已打包的发货订单进行操作"),{v:void 0})};for(a.s();!(t=a.n()).done;){var s=i();if("object"===Object(n["a"])(s))return s.v}}catch(c){a.e(c)}finally{a.f()}this.$UI.Tips.Modal({Type:"confirm",Content:"是否释放订单到已确认状态",Callback:function(t){t&&(r.$UI.Loading.Show(),r.$Request.Post({Server:r.$Server.Warehouse,Api:{Address:r.$Api.BatchOrderReturnGoods,Login:!0},Data:e.map((function(e){return e.ShipOrder.Id})),Callback:function(e){e.IsSuccess?(r.$UI.Tips.Floating("success","发货订单状态已变更为已确认"),r.EmitOperateSuccess()):(r.$UI.Loading.Hide(),r.$Request.Error(e))}}))}})}}]),r}(p["d"]);d["a"]([Object(p["b"])()],h.prototype,"TriggerOperations",null),d["a"]([Object(p["b"])()],h.prototype,"EmitOperateSuccess",null),h=d["a"]([Object(p["a"])({name:"CancelOrder"})],h);var f=h,S=f,m=r("4023"),O=Object(m["a"])(S,a,i,!1,null,null,null);t["default"]=O.exports},a815:function(e,t,r){var a=r("7b30"),i=r("2b6e").values;a({target:"Object",stat:!0},{values:function(e){return i(e)}})},abb3:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Table",{attrs:{columns:e.Cols,data:e.Items,size:"small",borderless:"",stripe:""}}),r("ShowBigPic",{ref:"ShowBigPic"})],1)},i=[],n=(r("d9b9"),r("76bb"),r("cee1"),r("6bf8"),r("b74e"),r("5c62")),o=r("3231"),s=r("064d"),c=r("46d7"),l=r("631e"),u=r("4a81"),d=r("d11d"),p=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(o["a"])(this,r),e=t.apply(this,arguments),e.Cols=[{title:"图片",width:80,align:"center",render:function(t,r){return t("div",{style:{"background-image":"url(".concat(e.$Server.File,"/").concat(r.row.Sku.DefaultImage,")")},class:"P-List-Img",on:{click:function(){e.ShowBigPic(r.row.Sku.DefaultImage)}}})}},{title:"SKU编号",key:"SkuCode",width:120},{title:"产品名",key:"SkuName",render:function(e,t){return e("Tooltip",{class:"P-LINE-1",props:{content:t.row.Sku.SkuName}},t.row.Sku.SkuName)}},{title:"ItemID",key:"ItemId",render:function(t,r){var a=e.ShipOrder.ShipOrder.Platform,i=r.row.ItemId||"-";return t("Tooltip",{class:"P-LINE-1 P-Pointer",props:{content:i}},[e.$Enums.Sales.ItemIdLink[a]?t("a",{attrs:{href:r.row.ItemId?"".concat(e.$Enums.Sales.ItemIdLink[a]).concat(i):"javascript:void(0)",target:"_blank"}},i):t("span",i)])}},{title:"平台单号/平台交易号",render:function(e,t){var r=[{Key:"单",Value:t.row.PlatformOrderId||"-"},{Key:"交",Value:t.row.PlatformTransactionId||"-"}],a=[],i=r.map((function(t){return a.push(e("p","[".concat(t.Key,"] ").concat(t.Value))),e("p",{class:"P-LINE-1"},[e("span",{class:"P-Table-Tip P-BG-Primary"},t.Key),e("span",t.Value)])})),n=e("div",{slot:"content"},a);return e("Tooltip",{class:"P-W-100-Percent P-MT-5"},i.concat(n))}},{title:"数量",key:"Quantity"},{title:"到货单号",key:"PaoCode",render:function(e,t){return e("span",t.row.PaoCode||"-")}},{title:"当前库存/在途库存",render:function(e,t){var r=[{Key:"当",Value:t.row.UsableQuantity||"-"},{Key:"途",Value:t.row.PurchasingQuantity||"-"}],a=[],i=r.map((function(t){return a.push(e("p","[".concat(t.Key,"] ").concat(t.Value))),e("p",{class:"P-LINE-1"},[e("span",{class:"P-Table-Tip P-BG-Primary"},t.Key),e("span",t.Value)])})),n=e("div",{slot:"content"},a);return e("Tooltip",{class:"P-W-100-Percent P-MT-5"},i.concat(n))}},{title:"货架号",key:"LocationCode",render:function(e,t){return e("span",t.row.LocationCode||"-")}}],e.Items=[],e}return Object(s["a"])(r,[{key:"mounted",value:function(){this.SetCols(),this.GetItems()}},{key:"SetCols",value:function(){var e={title:"Paypal交易号/交易金额",render:function(e,t){var r=[{Key:"pp",Value:t.row.PaypalTransactionId||"-"},{Key:"金",Value:"".concat(t.row.PayAmount," ").concat(t.row.PayCurrency)||"-"}],a=[],i=r.map((function(t){return a.push(e("p","[".concat(t.Key,"] ").concat(t.Value))),e("p",{class:"P-LINE-1"},[e("span",{class:"P-Table-Tip P-BG-Primary"},t.Key),e("span",t.Value)])})),n=e("div",{slot:"content"},a);return e("Tooltip",{class:"P-W-100-Percent P-MT-5"},i.concat(n))}},t={title:"交易金额",render:function(e,t){return e("span","".concat(t.row.PayAmount," ").concat(t.row.PayCurrency))}},r=this.ShipOrder.ShipOrder.OrderCode.startsWith("E");this.Cols.splice(5,0,r?e:t)}},{key:"GetItems",value:function(){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.GetShipOrderItem,Login:!0},Data:{OrderId:this.ShipOrder.ShipOrder.Id,OrderCode:this.ShipOrder.ShipOrder.OrderCode},Callback:function(t){var r;(e.$UI.Loading.Hide(),t.IsSuccess)?(r=e.Items).push.apply(r,Object(n["a"])(t.Data.Data)):e.$Request.Error(t)}})}},{key:"ShowBigPic",value:function(e){this.$refs.ShowBigPic.Trigger(e)}}]),r}(d["d"]);u["a"]([Object(d["c"])()],p.prototype,"ShipOrder",void 0),p=u["a"]([Object(d["a"])({name:"ShipOrderExpand",components:{ShowBigPic:function(){return r.e("chunk-c0a1d894").then(r.bind(null,"6156"))}}})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,"7b7c048a",null);t["default"]=m.exports},ad3b:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("设置物流渠道")]),r("Modal",{attrs:{title:"设置物流渠道",width:600},on:{"on-cancel":e.CancelModal},model:{value:e.MethodModal,callback:function(t){e.MethodModal=t},expression:"MethodModal"}},[r("Form",{ref:"MethodInfo",attrs:{model:e.MethodInfo,rules:e.MethodRules,"label-width":90,onsubmit:"return false;"}},[r("FormItem",{attrs:{label:"物流渠道：",prop:"MethodId"}},[r("Select",{attrs:{placeholder:"物流渠道",options:e.ShipMethodDrop,optionValKey:"Id",optionKey:"Name"},model:{value:e.MethodInfo.MethodId,callback:function(t){e.$set(e.MethodInfo,"MethodId",t)},expression:"MethodInfo.MethodId"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Post}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},i=[],n=(r("76bb"),r("6ed5"),r("5c62")),o=r("430a"),s=r("e24e"),c=r("3231"),l=r("064d"),u=r("46d7"),d=r("631e"),p=r("4a81"),h=r("d11d"),f=r("1459"),S=function(e){Object(u["a"])(r,e);var t=Object(d["a"])(r);function r(){var e;return Object(c["a"])(this,r),e=t.apply(this,arguments),e.MethodModal=!1,e.ShipMethodDrop=[],e.MethodInfo=new f["a"].SetShippintMethod,e.MethodRules={MethodId:[{required:!0,message:"请选择物流渠道",trigger:"change",type:"number"},{pattern:e.$Pattern.PositiveNotZeroInt,message:"请选择物流渠道",trigger:"change"}]},e}return Object(l["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("SetShippingMethod")}},{key:"Validate",value:function(e){var t,r=this,a=Object(s["a"])(e);try{var i=function(){var e=t.value;if(![4,7,9].some((function(t){return t===e.ShipOrder.Status}))||[2,3].some((function(t){return t===e.ShipOrder.Status}))&&e.ShipOrder.IsException)return r.$UI.Tips.Floating("warning","请选择状态为已拣货、缺货、联系客户的发货订单或状态为已确认、待拣货的异常发货订单进行操作"),{v:void 0}};for(a.s();!(t=a.n()).done;){var n=i();if("object"===Object(o["a"])(n))return n.v}}catch(c){a.e(c)}finally{a.f()}this.MethodInfo.OrderId=e.map((function(e){return e.ShipOrder.Id})),this.MethodInfo.MethodId=e[0].ShipOrder.ShippingMethodId,this.ShipMethodDrop.length||this.GetMethodDrop(),this.$set(this,"MethodModal",!0)}},{key:"GetMethodDrop",value:function(){var e=this;this.$Request.Post({Server:this.$Server.Logistics,Api:{Address:this.$Api.ChannelDropList},Data:0,Callback:function(t){var r;t.IsSuccess?(r=e.ShipMethodDrop).push.apply(r,Object(n["a"])(t.Data.DropList)):e.$Request.Error(t)}})}},{key:"Post",value:function(){var e=this;this.$refs.MethodInfo.validate((function(t){t&&(e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Warehouse,Api:{Address:e.$Api.ShipOrderSetShippingMethod,Login:!0},Data:e.MethodInfo,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success","设置物流渠道成功"),e.EmitOperateSuccess(),e.CancelModal()):(e.$UI.Loading.Hide(),e.$Request.Error(t))}}))}))}},{key:"CancelModal",value:function(){this.$set(this,"MethodModal",!1),this.$set(this,"MethodInfo",new f["a"].SetShippintMethod),this.$refs.MethodInfo.resetFields()}}]),r}(h["d"]);p["a"]([Object(h["b"])()],S.prototype,"TriggerOperations",null),p["a"]([Object(h["b"])()],S.prototype,"EmitOperateSuccess",null),S=p["a"]([Object(h["a"])({name:"SetShippingMethod"})],S);var m=S,O=m,v=r("4023"),I=Object(v["a"])(O,a,i,!1,null,null,null);t["default"]=I.exports},b300:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("更换面单")]),r("Modal",{attrs:{title:"更换面单","mask-closable":!1},on:{"on-cancel":e.CancelModal},model:{value:e.ReplaceModal,callback:function(t){e.ReplaceModal=t},expression:"ReplaceModal"}},[r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)])],1)},i=[],n=r("3231"),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("1459"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.ReplaceModal=!1,e.ReplaceLableInfo=new d["a"].ReplaceLable,e}return Object(o["a"])(r,[{key:"Trigger",value:function(){this.$set(this,"ReplaceModal",!0)}},{key:"Validate",value:function(){}},{key:"CancelModal",value:function(){this.$set(this,"ReplaceModal",!1)}}]),r}(u["d"]);p=l["a"]([Object(u["a"])({name:"ReplaceLogisticsLabel"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,null,null);t["default"]=m.exports},b70a:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("联系客户")]),r("Modal",{attrs:{title:"联系客户",width:600},on:{"on-cancel":e.CancelModal},model:{value:e.ContactModal,callback:function(t){e.ContactModal=t},expression:"ContactModal"}},[r("Form",{ref:"ContactForm",attrs:{model:e.ContactForm,"label-width":80,onsubmit:"return false;"}},[r("FormItem",{attrs:{label:"备注：",prop:"Remark"}},[r("Input",{ref:"RemarkIpt",attrs:{type:"textarea",placeholder:"备注",rows:5,autosize:{minRows:5,maxRows:5}},model:{value:e.ContactForm.Remark,callback:function(t){e.$set(e.ContactForm,"Remark",t)},expression:"ContactForm.Remark"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Post}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},i=[],n=(r("76bb"),r("6ed5"),r("430a")),o=r("e24e"),s=r("3231"),c=r("064d"),l=r("46d7"),u=r("631e"),d=r("4a81"),p=r("d11d"),h=r("1459"),f=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(s["a"])(this,r),e=t.apply(this,arguments),e.ContactModal=!1,e.ContactForm=new h["a"].ChangeShipOrderStatus,e}return Object(c["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("ToContact")}},{key:"Validate",value:function(e){var t,r=this,a=Object(o["a"])(e);try{var i=function(){var e=t.value;if(![2,7,8].some((function(t){return t===e.ShipOrder.Status}))||[15,16,17].some((function(t){return t===e.ShipOrder.ApiType})))return r.$UI.Tips.Floating("warning","请选择状态为已确认、缺货、已拦截，发货仓不为海外仓的发货订单进行操作"),{v:void 0}};for(a.s();!(t=a.n()).done;){var s=i();if("object"===Object(n["a"])(s))return s.v}}catch(c){a.e(c)}finally{a.f()}this.ContactForm.OrderId=e.map((function(e){return e.ShipOrder.Id})),this.$set(this,"ContactModal",!0),this.$nextTick((function(){r.$refs.RemarkIpt.focus()}))}},{key:"Post",value:function(){var e=this;this.$UI.Loading.Show(),this.ContactForm.Targetstatus=9,this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.ShipOrderChangeStatus,Login:!0},Data:this.ContactForm,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success","发货订单状态已变更为联系客户"),e.EmitOperateSuccess(),e.CancelModal()):(e.$UI.Loading.Hide(),e.$Request.Error(t))}})}},{key:"CancelModal",value:function(){this.ContactForm=new h["a"].ChangeShipOrderStatus,this.$set(this,"ContactModal",!1)}}]),r}(p["d"]);d["a"]([Object(p["b"])()],f.prototype,"TriggerOperations",null),d["a"]([Object(p["b"])()],f.prototype,"EmitOperateSuccess",null),f=d["a"]([Object(p["a"])({name:"ContactCustomer"})],f);var S=f,m=S,O=r("4023"),v=Object(O["a"])(m,a,i,!1,null,null,null);t["default"]=v.exports},b862:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("更新发货仓")]),r("Modal",{attrs:{title:"更新发货仓",width:600},on:{"on-cancel":e.CancelModal},model:{value:e.WarehouseModal,callback:function(t){e.WarehouseModal=t},expression:"WarehouseModal"}},[r("Form",{ref:"WarehouseInfo",attrs:{model:e.WarehouseInfo,rules:e.WarehouseRules,"label-width":90,onsubmit:"return false;"}},[r("FormItem",{attrs:{label:"发货仓：",prop:"WarehouseId"}},[r("Select",{attrs:{placeholder:"发货仓",options:e.WarehouseDrop,onChange:e.ChangeWarehouse},model:{value:e.WarehouseInfo.WarehouseId,callback:function(t){e.$set(e.WarehouseInfo,"WarehouseId",t)},expression:"WarehouseInfo.WarehouseId"}})],1)],1),r("Form",{ref:"MethodInfo",attrs:{model:e.MethodInfo,rules:e.MethodRules,"label-width":90,onsubmit:"return false;"}},[r("FormItem",{attrs:{label:"物流渠道：",prop:"MethodId"}},[r("Select",{ref:"MethodDrop",attrs:{placeholder:"物流渠道",options:e.ShipMethodDrop,optionValKey:"Id",optionKey:"Name"},model:{value:e.MethodInfo.MethodId,callback:function(t){e.$set(e.MethodInfo,"MethodId",t)},expression:"MethodInfo.MethodId"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Post}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},i=[],n=(r("76bb"),r("6ed5"),r("6bf8"),r("b449"),r("5d83")),o=r("5c62"),s=r("430a"),c=r("e24e"),l=r("3231"),u=r("064d"),d=r("46d7"),p=r("631e"),h=r("4a81"),f=r("d11d"),S=r("1459"),m=function(e){Object(d["a"])(r,e);var t=Object(p["a"])(r);function r(){var e;return Object(l["a"])(this,r),e=t.apply(this,arguments),e.WarehouseModal=!1,e.WarehouseDrop=[],e.WarehouseInfo=new S["a"].SetWarehouse,e.WarehouseRules={WarehouseId:[{required:!0,message:"请选择发货仓",trigger:"change",type:"number"},{pattern:e.$Pattern.PositiveNotZeroInt,message:"请选择发货仓",trigger:"change"}]},e.ShipMethodDrop=[],e.MethodInfo=new S["a"].SetShippintMethod,e.MethodRules={MethodId:[{required:!0,message:"请选择物流渠道",trigger:"change",type:"number"},{pattern:e.$Pattern.PositiveNotZeroInt,message:"请选择物流渠道",trigger:"change"}]},e}return Object(u["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("ChangeShipWarehouse")}},{key:"Validate",value:function(e){var t,r=this,a=Object(c["a"])(e);try{var i=function(){var e=t.value;if(![7,9].some((function(t){return t===e.ShipOrder.Status})))return r.$UI.Tips.Floating("warning","请选择状态为缺货、联系客户的发货订单进行操作"),{v:void 0}};for(a.s();!(t=a.n()).done;){var n=i();if("object"===Object(s["a"])(n))return n.v}}catch(o){a.e(o)}finally{a.f()}this.WarehouseInfo.OrderId=this.MethodInfo.OrderId=e.map((function(e){return e.ShipOrder.Id})),this.WarehouseInfo.WarehouseId=e[0].ShipOrder.ShipWarehouseId,this.WarehouseDrop.length||this.GetWarehouseDrop(),this.ShipMethodDrop.length||this.ChangeWarehouse(this.WarehouseInfo.WarehouseId),this.MethodInfo.MethodId=e[0].ShipOrder.ShippingMethodId,this.$set(this,"WarehouseModal",!0)}},{key:"GetWarehouseDrop",value:function(){var e=this;this.$Request.Post({Server:this.$Server.Settings,Api:{Address:this.$Api.GetWarehouseDropList},Data:!0,Callback:function(t){var r;t.IsSuccess?(r=e.WarehouseDrop).push.apply(r,Object(o["a"])(t.Data.DropList)):e.$Request.Error(t)}})}},{key:"ChangeWarehouse",value:function(e){var t=this;this.MethodInfo.MethodId=0,e?(this.$set(this,"ShipMethodDrop",[]),this.$Request.Post({Server:this.$Server.Logistics,Api:{Address:this.$Api.ChannelDropList},Data:e,Callback:function(e){var r;e.IsSuccess?(r=t.ShipMethodDrop).push.apply(r,Object(o["a"])(e.Data.DropList)):t.$Request.Error(e)}})):(this.$set(this,"ShipMethodDrop",[]),this.$refs.MethodDrop.clearSingleSelect())}},{key:"Post",value:function(){var e=this;this.$refs.WarehouseInfo.validate((function(t){t&&e.$refs.MethodInfo.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=13;break}return t.next=3,e.PostInfo(e.$Server.Warehouse,e.$Api.ShipOrderSetWarehouse,e.WarehouseInfo);case 3:if(a=t.sent,!a.IsSuccess){t.next=11;break}return t.next=7,e.PostInfo(e.$Server.Warehouse,e.$Api.ShipOrderSetShippingMethod,e.MethodInfo);case 7:i=t.sent,i.IsSuccess?(e.$UI.Tips.Floating("success","更换发货仓成功"),e.EmitOperateSuccess(),e.CancelModal()):(e.$UI.Loading.Hide(),e.$Request.Error(i)),t.next=13;break;case 11:e.$UI.Loading.Hide(),e.$Request.Error(a);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}},{key:"PostInfo",value:function(e,t,r){var a=this;return new Promise((function(i){a.$Request.Post({Server:e,Api:{Address:t,Login:!0},Data:r,Callback:function(e){i(e)}})}))}},{key:"CancelModal",value:function(){this.$set(this,"WarehouseModal",!1),this.$set(this,"WarehouseInfo",new S["a"].SetWarehouse),this.$refs.WarehouseInfo.resetFields()}}]),r}(f["d"]);h["a"]([Object(f["b"])()],m.prototype,"TriggerOperations",null),h["a"]([Object(f["b"])()],m.prototype,"EmitOperateSuccess",null),m=h["a"]([Object(f["a"])({name:"SetShipWarehouse"})],m);var O=m,v=O,I=r("4023"),b=Object(I["a"])(v,a,i,!1,null,null,null);t["default"]=b.exports},be35:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ShipOrder",{attrs:{SearchInit:e.SearchInit,UsableOperations:e.UsableOperations,Page:"PauseOutStock"}})},i=[],n=r("3231"),o=r("46d7"),s=r("631e"),c=r("4a81"),l=r("d11d"),u=r("1459"),d=function(e){Object(o["a"])(r,e);var t=Object(s["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.SearchInit=new u["a"].ShipOrderSearch,e.UsableOperations=["ToComfirmed","ToContact","ToCancel"],e}return r}(l["d"]);d=c["a"]([Object(l["a"])({name:"PauseOutStockOrder"})],d);var p=d,h=p,f=r("4023"),S=Object(f["a"])(h,a,i,!1,null,"0a688685",null);t["default"]=S.exports},bea1:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ShipOrder",{attrs:{SearchInit:e.SearchInit,UsableOperations:e.UsableOperations,Page:"WaitHoldUp"}})},i=[],n=r("3231"),o=r("46d7"),s=r("631e"),c=r("4a81"),l=r("d11d"),u=r("1459"),d=function(e){Object(o["a"])(r,e);var t=Object(s["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.SearchInit=new u["a"].ShipOrderSearch,e.UsableOperations=["ReturnGoods"],e}return r}(l["d"]);d=c["a"]([Object(l["a"])({name:"WaitHoldUpOrder"})],d);var p=d,h=p,f=r("4023"),S=Object(f["a"])(h,a,i,!1,null,"32ed0820",null);t["default"]=S.exports},c31b:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("还原打包")])],1)},i=[],n=(r("6ed5"),r("3231")),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){return Object(n["a"])(this,r),t.apply(this,arguments)}return Object(o["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("RevertPack")}},{key:"Validate",value:function(e){var t=this;e.length>1?this.$UI.Tips.Floating("warning","仅支持选择单个发货订单进行还原打包操作"):e.some((function(e){return 5!==e.ShipOrder.Status}))?this.$UI.Tips.Floating("warning","请选择状态为已打包的发货订单进行操作"):this.$UI.Tips.Modal({Type:"confirm",Content:"是否确认还原打包",Callback:function(r){if(r){t.$UI.Loading.Show();var a={OrderId:e[0].ShipOrder.Id,OrderCode:e[0].ShipOrder.OrderCode};t.$Request.Post({Server:t.$Server.Warehouse,Api:{Address:t.$Api.ShipOrderRevertPack,Login:!0},Data:a,Callback:function(e){e.IsSuccess?(t.$UI.Tips.Floating("success","还原打包成功"),t.EmitOperateSuccess()):(t.$UI.Loading.Hide(),t.$Request.Error(e))}})}}})}}]),r}(u["d"]);l["a"]([Object(u["b"])()],d.prototype,"TriggerOperations",null),l["a"]([Object(u["b"])()],d.prototype,"EmitOperateSuccess",null),d=l["a"]([Object(u["a"])({name:"RevertPack"})],d);var p=d,h=p,f=r("4023"),S=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=S.exports},c55a:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ShipOrder",{attrs:{SearchInit:e.SearchInit,UsableOperations:e.UsableOperations,Page:"SkuError"}})},i=[],n=r("3231"),o=r("46d7"),s=r("631e"),c=r("4a81"),l=r("d11d"),u=r("1459"),d=function(e){Object(o["a"])(r,e);var t=Object(s["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.SearchInit=new u["a"].ShipOrderSearch,e.UsableOperations=["ToConfirmed","ToCancel","ExportDetailsErrorOrder"],e}return r}(l["d"]);d=c["a"]([Object(l["a"])({name:"SkuErrorOrder"})],d);var p=d,h=p,f=r("4023"),S=Object(f["a"])(h,a,i,!1,null,"3de85c1c",null);t["default"]=S.exports},c58c:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Row",{staticClass:"P-Inline-Block"},[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("导入物流异常单")]),r("Modal",{attrs:{title:"导入物流异常单",width:600},on:{"on-cancel":e.CancelModal},model:{value:e.ImportModal,callback:function(t){e.ImportModal=t},expression:"ImportModal"}},[r("Form",{attrs:{onsubmit:"return false","label-width":90}},[r("FormItem",{attrs:{label:"导入文件：",required:""}},[r("Upload",{attrs:{"before-upload":e.HandleSelect,"show-upload-list":!1,accept:"application/vnd.ms-excel",format:["xls","xlsx"],action:""}},[r("Button",{attrs:{type:"primary"}},[e._v("选择文件")]),r("p",{staticClass:"P-Text-Info"},[e._v(e._s(e.File.name))])],1)],1),r("FormItem",{attrs:{label:"下载模板："}},[r("a",{attrs:{href:e.$Server.CustomerService+"/Template/物流异常订单导入模板.xlsx",download:""}},[e._v("物流异常订单导入模板.xls")])])],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},i=[],n=(r("d9b9"),r("1ff3"),r("3231")),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.ImportModal=!1,e.File={},e}return Object(o["a"])(r,[{key:"Trigger",value:function(){this.$set(this,"ImportModal",!0)}},{key:"HandleSelect",value:function(e){return(new this.$Validate.Xls).Valid(e)?this.$set(this,"File",e):this.$UI.Tips.Floating("warning","请选择格式为xls/xlsx的文件"),!1}},{key:"Validate",value:function(){this.File.name?this.PostImport():this.$UI.Tips.Floating("warning","请选择上传文件")}},{key:"PostImport",value:function(){var e=this;this.$UI.Loading.Show();var t=new FormData;t.append("File",this.File),this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:this.$Api.ImportLogisticsAnomalyRecord,Login:!0},Data:t,Form:!0,Callback:function(t){if(e.$UI.Loading.Hide(),t.IsSuccess){var r="";t.Data.Data.FailCount<1?(r="本次所有发货订单均导入成功，共导入[".concat(t.Data.Data.SuccessCount,"]个发货订单。"),e.CancelModal()):r="本次导入成功[".concat(t.Data.Data.SuccessCount,"]个发货订单，导入失败[").concat(t.Data.Data.FailCount,']个发货订单，详情请下载导入失败发货订单表格进行查看。<a download href="').concat(e.$Server.CustomerService).concat(t.Data.Data.Url,'" target="_blank">导入失败发货订单.xls</a>'),setTimeout((function(){e.$UI.Tips.Modal({Type:"success",Content:r,Callback:function(r){t.Data.Data.SuccessCount>0&&e.EmitOperateSuccess()}})}),500)}else e.$Request.Error(t)}})}},{key:"CancelModal",value:function(){this.$set(this,"ImportModal",!1),this.File={}}}]),r}(u["d"]);d=l["a"]([Object(u["a"])({name:"ImportLogisticsExceptionOrder"})],d);var p=d,h=p,f=r("4023"),S=Object(f["a"])(h,a,i,!1,null,"13ac8716",null);t["default"]=S.exports},cb7b:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("批量生成拣货批次")]),r("Modal",{attrs:{title:"批量生成拣货批次",width:800},on:{"on-cancel":e.CancelModal},model:{value:e.CreateBatchModal,callback:function(t){e.CreateBatchModal=t},expression:"CreateBatchModal"}},[r("Form",{ref:"CreateBatchInfo",attrs:{model:e.CreateBatchInfo,rules:e.CreateBatchRules,"label-width":100,onsubmit:"return false;"}},[r("FormItem",{attrs:{label:"平台：",prop:"PlatformId"}},[r("Select",{attrs:{placeholder:"平台",options:e.PlatformDrop,onChange:e.ChangePlatform},model:{value:e.CreateBatchInfo.PlatformId,callback:function(t){e.$set(e.CreateBatchInfo,"PlatformId",t)},expression:"CreateBatchInfo.PlatformId"}})],1),r("FormItem",{attrs:{label:"店铺：",prop:"StoreId"}},[r("Select",{ref:"StoreDrop",attrs:{placeholder:"店铺",options:e.StoreDrop},model:{value:e.CreateBatchInfo.StoreId,callback:function(t){e.$set(e.CreateBatchInfo,"StoreId",t)},expression:"CreateBatchInfo.StoreId"}})],1),r("FormItem",{attrs:{label:"国家：",prop:"CountryCode"}},[r("Select",{attrs:{placeholder:"国家",options:e.COUNTRY_DROP,optionValKey:"CountryCode",optionKey:"CountryNameCn"},model:{value:e.CreateBatchInfo.CountryCode,callback:function(t){e.$set(e.CreateBatchInfo,"CountryCode",t)},expression:"CreateBatchInfo.CountryCode"}})],1),r("FormItem",{attrs:{label:"发货仓：",prop:"ShipWarehouseId"}},[r("Select",{attrs:{placeholder:"发货仓",options:e.WarehouseDrop,onChange:e.ChangeWarehouse},model:{value:e.CreateBatchInfo.ShipWarehouseId,callback:function(t){e.$set(e.CreateBatchInfo,"ShipWarehouseId",t)},expression:"CreateBatchInfo.ShipWarehouseId"}})],1),r("FormItem",{attrs:{label:"物流渠道：",prop:"ShipMethodId"}},[r("Select",{ref:"MethodDrop",attrs:{placeholder:"物流渠道",options:e.MethodDrop,optionValKey:"Id",optionKey:"Name",multiple:""},model:{value:e.CreateBatchInfo.ShipMethodId,callback:function(t){e.$set(e.CreateBatchInfo,"ShipMethodId",t)},expression:"CreateBatchInfo.ShipMethodId"}})],1),r("FormItem",{attrs:{label:"订单类型：",prop:"ItemType"}},[r("Select",{attrs:{placeholder:"订单类型",options:e.ItemTypeDrop},model:{value:e.CreateBatchInfo.ItemType,callback:function(t){e.$set(e.CreateBatchInfo,"ItemType",t)},expression:"CreateBatchInfo.ItemType"}})],1),r("FormItem",{attrs:{label:"库区：",prop:"StorageFarm"}},[r("Select",{attrs:{placeholder:"库区",options:e.LocationDrop,multiple:""},model:{value:e.CreateBatchInfo.StorageFarm,callback:function(t){e.$set(e.CreateBatchInfo,"StorageFarm",t)},expression:"CreateBatchInfo.StorageFarm"}})],1),r("FormItem",{attrs:{label:"时间段：",prop:"TimeType"}},[r("Select",{attrs:{placeholder:"时间段",options:e.TimeTypeDrop},model:{value:e.CreateBatchInfo.TimeType,callback:function(t){e.$set(e.CreateBatchInfo,"TimeType",t)},expression:"CreateBatchInfo.TimeType"}})],1),r("FormItem",{staticClass:"P-Inline-Block P-W-49-Percent P-MR-0",attrs:{label:"",prop:"BeginTime"}},[r("DatePicker",{staticClass:"P-W-100-Percent",attrs:{type:"datetime",placeholder:"开始时间"},model:{value:e.CreateBatchInfo.BeginTime,callback:function(t){e.$set(e.CreateBatchInfo,"BeginTime",t)},expression:"CreateBatchInfo.BeginTime"}})],1),r("FormItem",{staticClass:"P-Inline-Block P-W-49-Percent P-MR-0",attrs:{label:"",prop:"EndTime"}},[r("DatePicker",{staticClass:"P-W-100-Percent",attrs:{type:"datetime",placeholder:"结束时间"},model:{value:e.CreateBatchInfo.EndTime,callback:function(t){e.$set(e.CreateBatchInfo,"EndTime",t)},expression:"CreateBatchInfo.EndTime"}})],1),r("FormItem",{attrs:{label:"生成规则：",prop:"OrderCount"}},[r("Input",{attrs:{placeholder:"生成规则"},model:{value:e.CreateBatchInfo.OrderCount,callback:function(t){e.$set(e.CreateBatchInfo,"OrderCount",t)},expression:"CreateBatchInfo.OrderCount"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},i=[],n=(r("0a9c"),r("6ed5"),r("6bf8"),r("7623"),r("522a"),r("52af"),r("e24e")),o=r("5c62"),s=r("3231"),c=r("064d"),l=r("46d7"),u=r("631e"),d=r("4a81"),p=r("d11d"),h=r("a349"),f=r("1459"),S=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(s["a"])(this,r),e=t.apply(this,arguments),e.CreateBatchModal=!1,e.PlatformDrop=e.$Utils.GetEnumArr(e.$Enums.Sales.Platform),e.StoreDrop=[],e.ItemTypeDrop=e.$Utils.GetEnumArr(e.$Enums.Warehouse.ItemType),e.WarehouseDrop=[],e.MethodDrop=[],e.LocationDrop=e.GetLocations(),e.TimeTypeDrop=e.$Utils.GetEnumArr(e.$Enums.Warehouse.TimeType),e.CreateBatchInfo=new f["a"].CreateBatchInfo,e.CreateBatchRules={ShipWarehouseId:[{required:!0,message:"请选择发货仓",trigger:"change",type:"number"}],ShipMethodId:[{required:!0,message:"请选择物流渠道",trigger:"change",type:"array"}],ItemType:[{required:!0,message:"请选择订单类型",trigger:"change",type:"number"}],OrderCount:[{required:!0,message:"请输入生成规则"},{pattern:/^[1-9][\d]*$/,message:"请输入正确的生成规则"}]},e}return Object(c["a"])(r,[{key:"EmitOperateSuccess",value:function(){}},{key:"GetLocations",value:function(){for(var e=[],t=1;t<=15;t++)e.push({Key:t,Value:t});return e}},{key:"GetDropLists",value:function(e,t,r){var a=this;return new Promise((function(i){a.$Request.Post({Server:e,Api:{Address:t},Data:r,Callback:function(e){e.IsSuccess?i(e.Data.DropList):a.$Request.Error(e)}})}))}},{key:"GetWarehouseDrop",value:function(){var e=this;this.GetDropLists(this.$Server.Settings,this.$Api.GetWarehouseDropList,!0).then((function(t){var r;(r=e.WarehouseDrop).push.apply(r,Object(o["a"])(t))}))}},{key:"Trigger",value:function(){this.$set(this,"CreateBatchModal",!0),this.WarehouseDrop.length||this.GetWarehouseDrop()}},{key:"ChangePlatform",value:function(e){var t=this;e?this.GetDropLists(this.$Server.Sales,this.$Api.Sales[String(e)].StoreDrop,"").then((function(e){var r;(r=t.StoreDrop).push.apply(r,Object(o["a"])(e))})):(this.$set(this,"StoreDrop",[]),this.CreateBatchInfo.StoreId=0)}},{key:"ChangeWarehouse",value:function(e){var t=this;e?this.GetDropLists(this.$Server.Logistics,this.$Api.ChannelDropList,e).then((function(e){var r;(r=t.MethodDrop).push.apply(r,Object(o["a"])(e))})):(this.$set(this,"MethodDrop",[]),this.CreateBatchInfo.ShipMethodId=[])}},{key:"Validate",value:function(){var e=this;this.$refs.CreateBatchInfo.validate((function(t){if(t&&e.ValidateRules()){e.$UI.Loading.Show();var r=JSON.parse(JSON.stringify(e.CreateBatchInfo));r.BeginTime=e.$UI.Render.NewDate(r.BeginTime),r.EndTime=e.$UI.Render.NewDate(r.EndTime),r.StorageFarm=r.StorageFarm.join(","),e.$Request.Post({Server:e.$Server.Warehouse,Api:{Address:e.$Api.QuickCreateBatchOrder,Login:!0},Data:r,Callback:function(t){e.$UI.Loading.Hide(),t.IsSuccess?setTimeout((function(){e.$UI.Tips.Modal({Type:"success",Content:"批量生成拣货批次成功，共生成".concat(t.Data.Count,"个批次"),Callback:function(t){e.EmitOperateSuccess()}})}),500):e.$Request.Error(t)}})}}))}},{key:"ValidateRules",value:function(){var e=this.CreateBatchInfo.BeginTime&&!this.CreateBatchInfo.EndTime||!this.CreateBatchInfo.BeginTime&&this.CreateBatchInfo.EndTime,t=!this.CreateBatchInfo.TimeType&&this.CreateBatchInfo.BeginTime&&this.CreateBatchInfo.EndTime;if(e||t)return this.$UI.Tips.Floating("请选择时间区间"),!1;if(+new Date(this.CreateBatchInfo.BeginTime)>+new Date(this.CreateBatchInfo.EndTime))return this.$UI.Tips.Floating("开始时间不能晚于结束时间"),!1;if(this.CreateBatchInfo.OrderCount>500&&this.CreateBatchInfo.ItemType<=3)return this.$UI.Tips.Floating("warning","明细类型为单品的发货订单单次生成拣货批次不可超过500条"),!1;if(this.CreateBatchInfo.OrderCount>100&&this.CreateBatchInfo.ItemType>3)return this.$UI.Tips.Floating("warning","明细类型为多品的发货订单单次生成拣货批次不可超过100条"),!1;var r,a=[],i=Object(n["a"])(this.CreateBatchInfo.ShipMethodId);try{var o=function(){var e=r.value;[9,27,80,81,85,86,99,101,105,107,113,118,119,120,148,150,151,154,156,157,158,161,162,170,171,172,173,174,184].some((function(t){return t===e}))?a.push(15):[28,108,138,147,176,177].some((function(t){return t===e}))?a.push(20):a.push(10)};for(i.s();!(r=i.n()).done;)o()}catch(c){i.e(c)}finally{i.f()}var s=new Set(a);return!(s.size>1)||(this.$UI.Tips.Floating("warning","请选择面单大小一致的发货订单进行操作"),!1)}},{key:"CancelModal",value:function(){var e=this;this.$set(this,"CreateBatchModal",!1),this.$nextTick((function(){e.$refs.CreateBatchInfo.resetFields()}))}},{key:"COUNTRY_DROP",get:function(){return this["Base/COUNTRY_DROP"]}}]),r}(p["d"]);d["a"]([Object(p["b"])()],S.prototype,"EmitOperateSuccess",null),d["a"]([h["b"]],S.prototype,"Base/COUNTRY_DROP",void 0),S=d["a"]([Object(p["a"])({name:"QuickCreateBatch"})],S);var m=S,O=m,v=r("4023"),I=Object(v["a"])(O,a,i,!1,null,null,null);t["default"]=I.exports},cece:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("标记发货")])],1)},i=[],n=(r("6412"),r("76bb"),r("430a")),o=r("e24e"),s=r("3231"),c=r("064d"),l=r("46d7"),u=r("631e"),d=r("4a81"),p=r("d11d"),h=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return Object(c["a"])(r,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("SignShiped")}},{key:"Validate",value:function(e){var t,r=this,a=Object(o["a"])(e);try{var i=function(){var e=t.value;if([1,4,9].every((function(t){return t!==e.ShipOrder.Platform}))&&""===e.ShipOrder.TrackingNumber)return r.$UI.Tips.Floating("warning","eBay、Fyndiq和Shopee平台以外的订单标记发货时须先获取跟踪号"),{v:void 0}};for(a.s();!(t=a.n()).done;){var s=i();if("object"===Object(n["a"])(s))return s.v}}catch(c){a.e(c)}finally{a.f()}this.$UI.Tips.Modal({Type:"confirm",Content:"是否确认标记发货",Callback:function(t){t&&(r.$UI.Loading.Show(),r.$Request.Post({Server:r.$Server.Warehouse,Api:{Address:r.$Api.ShipOrderSignShiped,Login:!0},Data:{OrderId:e.map((function(e){return e.ShipOrder.Id})),OrderCode:[]},Callback:function(e){r.$UI.Loading.Hide(),e.IsSuccess?r.$UI.Tips.Floating("success","标记发货成功"):r.$Request.Error(e)}}))}})}}]),r}(p["d"]);d["a"]([Object(p["b"])()],h.prototype,"TriggerOperations",null),d["a"]([Object(p["b"])()],h.prototype,"EmitOperateSuccess",null),h=d["a"]([Object(p["a"])({name:"SignShiped"})],h);var f=h,S=f,m=r("4023"),O=Object(m["a"])(S,a,i,!1,null,null,null);t["default"]=O.exports},d0e3:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Table",{attrs:{columns:e.Cols,data:e.SHIP_ORDER_HISTORY,size:"small",stripe:"",height:e.CalculateHeight()}})],1)},i=[],n=r("3231"),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("a349"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.Cols=[{title:"编号",width:100,key:"Id"},{title:"操作人",width:100,key:"Operator"},{title:"操作记录",render:function(e,t){return e("Tooltip",{props:{content:t.row.OperateLog},class:"P-LINE-1"},t.row.OperateLog)}},{title:"操作时间",width:160,render:function(t,r){return t("span",e.$UI.Render.Date(r.row.OperateTime,!0))}}],e}return Object(o["a"])(r,[{key:"CalculateHeight",value:function(){return 500}},{key:"SHIP_ORDER_HISTORY",get:function(){return this["ShipOrder/SHIP_ORDER_HISTORY"]}}]),r}(u["d"]);l["a"]([d["b"]],p.prototype,"ShipOrder/SHIP_ORDER_HISTORY",void 0),p=l["a"]([Object(u["a"])({name:"ShipOrderHistory"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,null,null);t["default"]=m.exports},d288:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",{staticClass:"Create-Order"},[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("添加订单")]),r("Modal",{staticClass:"Container-Tabs",attrs:{title:"添加订单",width:1200},on:{"on-cancel":e.CancelModal},model:{value:e.CreateModal,callback:function(t){e.CreateModal=t},expression:"CreateModal"}},[e.CreateModal?r("Form",{ref:"OrderInfo",attrs:{model:e.OrderInfo,rules:e.OrderRules,inline:"","label-width":100,onsubmit:"return false;"}},[r("Tabs",{attrs:{type:"card",name:"CreateOrderTabs",value:e.AcTab,animated:!1},on:{"on-click":e.ChangeTabs}},[r("TabPane",{attrs:{label:"基本信息",tab:"CreateOrderTabs",name:"Base"}},[r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"订单号：",prop:"ShipOrder.PlatformOrderId"}},[r("Input",{attrs:{placeholder:"订单号"},model:{value:e.OrderInfo.ShipOrder.PlatformOrderId,callback:function(t){e.$set(e.OrderInfo.ShipOrder,"PlatformOrderId",t)},expression:"OrderInfo.ShipOrder.PlatformOrderId"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"国家：",prop:"Address.Country.CountryCode"}},[r("Select",{attrs:{placeholder:"国家",options:e.COUNTRY_DROP,optionValKey:"CountryCode",optionKey:"CountryNameCn",transfer:""},model:{value:e.OrderInfo.Address.Country.CountryCode,callback:function(t){e.$set(e.OrderInfo.Address.Country,"CountryCode",t)},expression:"OrderInfo.Address.Country.CountryCode"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"地址2：",prop:"Address.BuyerStreet2"}},[r("Input",{attrs:{placeholder:"地址2"},model:{value:e.OrderInfo.Address.BuyerStreet2,callback:function(t){e.$set(e.OrderInfo.Address,"BuyerStreet2",t)},expression:"OrderInfo.Address.BuyerStreet2"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"地址1：",prop:"Address.BuyerStreet1"}},[r("Input",{attrs:{placeholder:"地址1"},model:{value:e.OrderInfo.Address.BuyerStreet1,callback:function(t){e.$set(e.OrderInfo.Address,"BuyerStreet1",t)},expression:"OrderInfo.Address.BuyerStreet1"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"城市：",prop:"Address.BuyerCity"}},[r("Input",{attrs:{placeholder:"城市"},model:{value:e.OrderInfo.Address.BuyerCity,callback:function(t){e.$set(e.OrderInfo.Address,"BuyerCity",t)},expression:"OrderInfo.Address.BuyerCity"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"省/州：",prop:"Address.BuyerState"}},[r("Input",{attrs:{placeholder:"省/州"},model:{value:e.OrderInfo.Address.BuyerState,callback:function(t){e.$set(e.OrderInfo.Address,"BuyerState",t)},expression:"OrderInfo.Address.BuyerState"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"邮编：",prop:"Address.BuyerZipCode"}},[r("Input",{attrs:{placeholder:"邮编"},model:{value:e.OrderInfo.Address.BuyerZipCode,callback:function(t){e.$set(e.OrderInfo.Address,"BuyerZipCode",t)},expression:"OrderInfo.Address.BuyerZipCode"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"收件人：",prop:"Address.BuyerFullName"}},[r("Input",{attrs:{placeholder:"收件人"},model:{value:e.OrderInfo.Address.BuyerFullName,callback:function(t){e.$set(e.OrderInfo.Address,"BuyerFullName",t)},expression:"OrderInfo.Address.BuyerFullName"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"买家ID：",prop:"ShipOrder.BuyerUserId"}},[r("Input",{attrs:{placeholder:"买家ID"},model:{value:e.OrderInfo.ShipOrder.BuyerUserId,callback:function(t){e.$set(e.OrderInfo.ShipOrder,"BuyerUserId",t)},expression:"OrderInfo.ShipOrder.BuyerUserId"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"电话：",prop:"Address.BuyerPhone"}},[r("Input",{attrs:{placeholder:"电话"},model:{value:e.OrderInfo.Address.BuyerPhone,callback:function(t){e.$set(e.OrderInfo.Address,"BuyerPhone",t)},expression:"OrderInfo.Address.BuyerPhone"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"付款金额：",prop:"ShipOrder.PayPrice"}},[r("Input",{attrs:{placeholder:"付款金额",prefix:"logo-usd"},model:{value:e.OrderInfo.ShipOrder.PayPrice,callback:function(t){e.$set(e.OrderInfo.ShipOrder,"PayPrice",t)},expression:"OrderInfo.ShipOrder.PayPrice"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"卖家店铺：",prop:"ShipOrder.StoreId"}},[r("Select",{attrs:{placeholder:"卖家店铺",options:e.StoreDrop,transfer:""},model:{value:e.OrderInfo.ShipOrder.StoreId,callback:function(t){e.$set(e.OrderInfo.ShipOrder,"StoreId",t)},expression:"OrderInfo.ShipOrder.StoreId"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"买家Email：",prop:"ShipOrder.BuyerEmail"}},[r("Input",{attrs:{placeholder:"买家Email"},model:{value:e.OrderInfo.ShipOrder.BuyerEmail,callback:function(t){e.$set(e.OrderInfo.ShipOrder,"BuyerEmail",t)},expression:"OrderInfo.ShipOrder.BuyerEmail"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"交易号：",prop:"ShipOrder.TransationId"}},[r("Input",{attrs:{placeholder:"交易号"},model:{value:e.OrderInfo.ShipOrder.TransationId,callback:function(t){e.$set(e.OrderInfo.ShipOrder,"TransationId",t)},expression:"OrderInfo.ShipOrder.TransationId"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"付款时间：",prop:"ShipOrder.PaidTime"}},[r("DatePicker",{staticClass:"P-W-100-Percent",attrs:{type:"datetime",placeholder:"付款时间"},model:{value:e.OrderInfo.ShipOrder.PaidTime,callback:function(t){e.$set(e.OrderInfo.ShipOrder,"PaidTime",t)},expression:"OrderInfo.ShipOrder.PaidTime"}})],1),r("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"下单时间：",prop:"ShipOrder.PlatOrderTime"}},[r("DatePicker",{staticClass:"P-W-100-Percent",attrs:{type:"datetime",placeholder:"下单时间"},model:{value:e.OrderInfo.ShipOrder.PlatOrderTime,callback:function(t){e.$set(e.OrderInfo.ShipOrder,"PlatOrderTime",t)},expression:"OrderInfo.ShipOrder.PlatOrderTime"}})],1),r("FormItem",{staticClass:"P-W-100-Percent P-MR-0",attrs:{label:"备注：",prop:"ShipOrder.Remark"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"备注"},model:{value:e.OrderInfo.ShipOrder.Remark,callback:function(t){e.$set(e.OrderInfo.ShipOrder,"Remark",t)},expression:"OrderInfo.ShipOrder.Remark"}})],1)],1),r("TabPane",{attrs:{label:"订单明细",tab:"CreateOrderTabs",name:"Items"}},[r("Table",{attrs:{columns:e.ItemCols,data:e.OrderInfo.Items,size:"small",height:519,stripe:"",borderless:""}}),r("Col",{staticClass:"P-TA-R P-MT-10",attrs:{span:"24"}},[r("Button",{attrs:{type:"primary"},on:{click:e.TriggerEnableSku}},[e._v("添加SKU")])],1)],1)],1)],1):e._e(),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1),e.CreateModal?r("EnableSku",{ref:"EnableSku",on:{"handle-res-msg":e.HandleSelectSku}}):e._e()],1)},i=[],n=(r("cee1"),r("6bf8"),r("e24e")),o=r("5c62"),s=r("3231"),c=r("064d"),l=r("46d7"),u=r("631e"),d=r("4a81"),p=r("d11d"),h=r("a349"),f=r("1459"),S=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(s["a"])(this,r),e=t.apply(this,arguments),e.CreateModal=!1,e.AcTab="Base",e.StoreDrop=[],e.OrderInfo=new f["a"].ShipOrderInfo,e.OrderRules={"ShipOrder.PlatformOrderId":[{required:!0,message:"请输入订单号"}],"Address.Country.CountryCode":[{required:!0,message:"请选择国家",trigger:"change"}],"Address.BuyerStreet1":[{required:!0,message:"请输入地址1"}],"Address.BuyerCity":[{required:!0,message:"请输入城市"}],"Address.BuyerZipCode":[{required:!0,message:"请输入邮编"}],"Address.BuyerFullName":[{required:!0,message:"请输入收件人"}],"Address.BuyerPhone":[{required:!0,message:"请输入电话"},{pattern:/^[\\+]{0,1}([A-Za-z\d\-\(\)\s\*#]+)$/,message:"电话号码格式不正确"}],"ShipOrder.PayPrice":[{required:!0,message:"请输入付款金额"},{pattern:/^[+]{0,1}([1-9]{0,1}[0-9]+)$|^[+]{0,1}(\d+\.\d+)$/,message:"请输入正确格式的付款金额"}],"ShipOrder.PaidTime":[{required:!0,message:"请选择付款时间"}],"ShipOrder.PlatOrderTime":[{required:!0,message:"请选择下单时间"}]},e.ItemCols=[{title:"SKU编号",key:"SkuCode"},{title:"SKU名称",key:"SkuName",render:function(e,t){return e("Tooltip",{class:"P-LINE-1",props:{content:t.row.Sku.SkuName}},t.row.Sku.SkuName)}},{title:"ItemId",render:function(t,r){return t("Input",{class:"P-W-100-Percent",attrs:{placeholder:"请输入ItemId",value:r.row.ItemId},on:{input:function(t){e.ChangeVal("ItemId",r.row._index,t)}}})}},{title:"平台单号",render:function(t,r){return t("Input",{class:"P-W-100-Percent",attrs:{placeholder:"请输入平台单号",value:r.row.PlatformOrderId},on:{input:function(t){e.ChangeVal("PlatformOrderId",r.row._index,t)}}})}},{title:"平台交易号",render:function(t,r){return t("Input",{class:"P-W-100-Percent",attrs:{placeholder:"请输入平台交易号",value:r.row.PlatformTransactionId},on:{input:function(t){e.ChangeVal("PlatformTransactionId",r.row._index,t)}}})}},{title:"Paypal交易号",render:function(t,r){return t("Input",{class:"P-W-100-Percent",attrs:{placeholder:"请输入Paypal交易号",value:r.row.PaypalTransactionId},on:{input:function(t){e.ChangeVal("PaypalTransactionId",r.row._index,t)}}})}},{title:"数量",render:function(t,r){return t("Input",{class:"P-W-100-Percent",attrs:{placeholder:"请输入数量",value:r.row.Quantity},on:{input:function(t){e.ChangeVal("Quantity",r.row._index,t)}}})}},{title:"操作",width:80,align:"center",render:function(t,r){return t("Button",{props:{size:"small",type:"error"},on:{click:function(){e.DelItem(r.row._index)}}},"删除")}}],e}return Object(c["a"])(r,[{key:"EmitOperateSuccess",value:function(){}},{key:"GetStoreDrop",value:function(){var e=this;this.$Request.Post({Server:this.$Server.Sales,Api:{Address:this.$Api.Sales[String(this.$Enums.Sales.Platform[this.Page])].StoreDrop,Login:!1},Data:"",Callback:function(t){var r;t.IsSuccess&&(r=e.StoreDrop).push.apply(r,Object(o["a"])(t.Data.DropList))}})}},{key:"ChangeTabs",value:function(e){this.$set(this,"AcTab",e)}},{key:"Trigger",value:function(){this.$set(this,"CreateModal",!0),this.COUNTRY_DROP.length||this["Base/UPDATE_BASE_INFO"]("COUNTRY",""),this.StoreDrop.length||this.GetStoreDrop()}},{key:"TriggerEnableSku",value:function(){this.$refs["EnableSku"].Trigger(!1)}},{key:"HandleSelectSku",value:function(e){var t,r=Object(n["a"])(e);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o=!0,s=Object(n["a"])(this.OrderInfo.Items);try{for(s.s();!(a=s.n()).done;){var c=a.value;i.Id===c.Sku.Id&&(o=!1)}}catch(u){s.e(u)}finally{s.f()}if(o){var l=new f["a"].ShipOrderItem;l.Sku=i,l.SkuCode=i.SkuCode,l.Quantity=1,this.OrderInfo.Items.push(l)}}}catch(u){r.e(u)}finally{r.f()}}},{key:"ChangeVal",value:function(e,t,r){this.OrderInfo.Items[t][e]=r}},{key:"DelItem",value:function(e){this.OrderInfo.Items.splice(e,1)}},{key:"Validate",value:function(){var e=this;this.$refs.OrderInfo.validate((function(t){if(t){if(e.OrderInfo.Items.length<1)return void e.$UI.Tips.Floating("warning","请补充订单明细");var r,a=Object(n["a"])(e.OrderInfo.Items);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(!(new e.$Validate.PositiveInt).Valid(i.Quantity)||i.Quantity<1)return void e.$UI.Tips.Floating("warning","订单明细数量必须是大于0的整数")}}catch(o){a.e(o)}finally{a.f()}e.OrderInfo.ShipOrder.Platform=e.Platform,e.PostOrderInfo()}}))}},{key:"PostOrderInfo",value:function(){var e=this;this.$UI.Loading.Show();var t=JSON.parse(JSON.stringify(this.OrderInfo));t.ShipOrder.PlatOrderTime=this.$UI.Render.NewDate(t.ShipOrder.PlatOrderTime,!0),t.ShipOrder.PaidTime=this.$UI.Render.NewDate(t.ShipOrder.PaidTime,!0),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.ShipOrderCreate,Login:!0},Data:t,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success","添加发货订单成功"),e.CancelModal(),e.EmitOperateSuccess()):(e.$UI.Loading.Hide(),e.$Request.Error(t))}})}},{key:"CancelModal",value:function(){this.$set(this,"CreateModal",!1),this.$set(this,"AcTab","Base"),this.$set(this,"OrderInfo",new f["a"].ShipOrderInfo),this.$refs.OrderInfo.resetFields()}},{key:"COUNTRY_DROP",get:function(){return this["Base/COUNTRY_DROP"]}}]),r}(p["d"]);d["a"]([Object(p["c"])(String)],S.prototype,"Page",void 0),d["a"]([Object(p["b"])()],S.prototype,"EmitOperateSuccess",null),d["a"]([h["a"]],S.prototype,"Base/UPDATE_BASE_INFO",void 0),d["a"]([h["b"]],S.prototype,"Base/COUNTRY_DROP",void 0),S=d["a"]([Object(p["a"])({name:"ShipOrderCreate",components:{EnableSku:function(){return r.e("chunk-2d0dd9de").then(r.bind(null,"81c2"))}}})],S);var m=S,O=m,v=(r("d752"),r("4023")),I=Object(v["a"])(O,a,i,!1,null,null,null);t["default"]=I.exports},d2b9:function(e,t,r){var a={"./AddRemark.vue":"043f","./Cancel.vue":"32f4","./CancelFLS.vue":"4b77","./CancelLMA.vue":"0610","./ChangeCustomerProcessType.vue":"e219","./Check.vue":"1e3a","./Confirm.vue":"81fc","./Contact.vue":"b70a","./Create.vue":"d288","./CreateBatch.vue":"4f9c","./Export.vue":"16b4","./ExportSkuErrorOrder.vue":"738f","./HoldUp.vue":"8f28","./ImportLogisticsExceptionOrder.vue":"c58c","./ImportShipOrder.vue":"6838","./LogisticsExceptionAddRemark.vue":"1d4f","./LogisticsExceptionOrderList.vue":"073c","./Merge.vue":"72f2","./ModifyOrder.vue":"ac1a","./PauseOutStockOrder.vue":"be35","./PrintLabel.vue":"70e0","./QuickCreateBatch.vue":"cb7b","./ReCreate.vue":"8b48","./ReplaceLogisticsLabel.vue":"b300","./Resent.vue":"4057","./ReturnGoods.vue":"a710","./RevertPack.vue":"c31b","./Review.vue":"7adcd","./SearchShipOrder.vue":"eee0","./SetShipWarehouse.vue":"b862","./SetShippingMethod.vue":"ad3b","./SetStockout.vue":"7631","./SetTrackingNumber.vue":"93ab","./ShipOrderAddress.vue":"4b6b","./ShipOrderAfterSales.vue":"240b","./ShipOrderBaseInfo.vue":"f7c4","./ShipOrderDetails.vue":"6652","./ShipOrderDetailsOperate.vue":"55c4","./ShipOrderExpand.vue":"abb3","./ShipOrderGrossProfits.vue":"feb0","./ShipOrderHistory.vue":"d0e3","./ShipOrderItems.vue":"67ca","./ShipOrderList.vue":"ca18","./ShipOrderLogistics.vue":"5266","./SignShiped.vue":"cece","./SkuErrorOrder.vue":"c55a","./Split.vue":"2123","./UnMatchWarehouseOrder.vue":"f849","./UpdateEdis.vue":"6168","./WaitAuditOrder.vue":"9a22","./WaitHoldUpOrder.vue":"bea1"};function i(e){var t=n(e);return r(t)}function n(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=n,e.exports=i,i.id="d2b9"},d752:function(e,t,r){"use strict";var a=r("18f0"),i=r.n(a);i.a},e219:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Row",{staticClass:"P-Inline-Block"},[r("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("更改客服联系状态")]),r("Modal",{attrs:{title:"更改客服联系状态",width:600},on:{"on-cancel":e.CancelModal},model:{value:e.ChangeModal,callback:function(t){e.ChangeModal=t},expression:"ChangeModal"}},[r("Form",{ref:"ChangeForm",attrs:{model:e.ChangeForm,onsubmit:"return false","label-width":110}},[r("FormItem",{attrs:{label:"客服联系状态：",prop:"customerStatus",rules:{required:!0,message:"请选择客服联系状态",trigger:"change",pattern:e.$Pattern.PositiveNotZero}}},[r("Select",{attrs:{placeholder:"客服联系状态",options:e.ProcessDrop},model:{value:e.ChangeForm.customerStatus,callback:function(t){e.$set(e.ChangeForm,"customerStatus",t)},expression:"ChangeForm.customerStatus"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("提交")]),r("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},i=[],n=(r("76bb"),r("3231")),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("4606"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.ChangeModal=!1,e.ProcessDrop=e.$Utils.GetEnumArr(e.$Enums.CustomerService.CustomerHandleProcess),e.ChangeForm=new d["a"].ChangeCustomerStatus,e}return Object(o["a"])(r,[{key:"EmitGetSelected",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.EmitGetSelected("ChangeCustomerStatus")}},{key:"TriggerSelected",value:function(e){e.length?(this.$set(this.ChangeForm,"ids",e.map((function(e){return e.Id}))),this.$set(this,"ChangeModal",!0)):this.$UI.Tips.Floating("warning","请选择订单进行操作")}},{key:"Validate",value:function(){var e=this;this.$refs.ChangeForm.validate((function(t){t&&e.PostChange()}))}},{key:"PostChange",value:function(){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:this.$Api.ChangeLogisticsCustomerStatus,Login:!0},Data:this.ChangeForm,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success","更改成功"),e.CancelModal(),e.EmitOperateSuccess()):(e.$UI.Loading.Hide(),e.$Request.Error(t))}})}},{key:"CancelModal",value:function(){var e=this;this.$set(this,"ChangeModal",!1),this.$set(this,"ChangeForm",new d["a"].ChangeCustomerStatus),this.$nextTick((function(){e.$refs.ChangeForm.resetFields()}))}}]),r}(u["d"]);l["a"]([Object(u["b"])()],p.prototype,"EmitGetSelected",null),l["a"]([Object(u["b"])()],p.prototype,"EmitOperateSuccess",null),p=l["a"]([Object(u["a"])({name:"ChangeCustomerProcessType"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,"0873da76",null);t["default"]=m.exports},eee0:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"P-Search-Group",attrs:{span:"24"}},[r("Form",{ref:"SearchFilter",attrs:{inline:""},model:{value:e.SearchFilter,callback:function(t){e.SearchFilter=t},expression:"SearchFilter"}},[r("Dropdown",{attrs:{trigger:"custom",visible:e.AccurateSearch}},[r("Button",{attrs:{type:"primary"},on:{click:e.TriggerSearch}},[e._v(" 精准搜索 "),r("Icon",{attrs:{type:"ios-arrow-down"}})],1),r("Col",{staticClass:"P-P-10",attrs:{slot:"list",span:"24"},slot:"list"},[e.IsFromSales?e._e():r("Select",{staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"筛选平台",onChange:e.GetStoreDrop,options:e.PlatformDrop},model:{value:e.SearchFilter.Platform,callback:function(t){e.$set(e.SearchFilter,"Platform",t)},expression:"SearchFilter.Platform"}}),r("Select",{ref:"StoreDrop",staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"筛选店铺",options:e.StoreDrop},model:{value:e.SearchFilter.StoreId,callback:function(t){e.$set(e.SearchFilter,"StoreId",t)},expression:"SearchFilter.StoreId"}}),e.IsStatusFilter?r("Select",{staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"筛选状态",options:e.StatusDrop},model:{value:e.SearchFilter.Status,callback:function(t){e.$set(e.SearchFilter,"Status",t)},expression:"SearchFilter.Status"}}):e._e(),r("Select",{staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"筛选国家",options:e.COUNTRY_DROP,optionValKey:"CountryCode",optionKey:"CountryName"},model:{value:e.SearchFilter.Country,callback:function(t){e.$set(e.SearchFilter,"Country",t)},expression:"SearchFilter.Country"}}),r("Select",{staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"筛选发货仓",options:e.WarehouseDrop,onChange:e.GetShipMethodDrop},model:{value:e.SearchFilter.ShipWarehouseId,callback:function(t){e.$set(e.SearchFilter,"ShipWarehouseId",t)},expression:"SearchFilter.ShipWarehouseId"}}),r("Select",{ref:"ShipMethodDrop",staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"筛选物流渠道",options:e.ShipMethodDrop,optionValKey:"Id",optionKey:"Name"},model:{value:e.SearchFilter.ShipMethodId,callback:function(t){e.$set(e.SearchFilter,"ShipMethodId",t)},expression:"SearchFilter.ShipMethodId"}}),"LogisticsException"===e.Page?r("Select",{staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"筛选物流状态",options:e.LogisticsStatusDrop},model:{value:e.SearchFilter.LogisticsStatus,callback:function(t){e.$set(e.SearchFilter,"LogisticsStatus",t)},expression:"SearchFilter.LogisticsStatus"}}):e._e(),"LogisticsException"===e.Page?r("Select",{staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"筛选客服联系状态",options:e.CustomerProcessDrop},model:{value:e.SearchFilter.CustomerStatus,callback:function(t){e.$set(e.SearchFilter,"CustomerStatus",t)},expression:"SearchFilter.CustomerStatus"}}):e._e(),e.IsFromSales?r("Select",{staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"筛选异常单",options:e.ExceptionDrop},model:{value:e.SearchFilter.IsException,callback:function(t){e.$set(e.SearchFilter,"IsException",t)},expression:"SearchFilter.IsException"}}):e._e(),e.IsWarehouseWork?r("Select",{staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"筛选明细类型",options:e.ItemTypeDrop},model:{value:e.SearchFilter.ItemType,callback:function(t){e.$set(e.SearchFilter,"ItemType",t)},expression:"SearchFilter.ItemType"}}):e._e(),e.IsLocation?r("Select",{staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"筛选库区（可多选）",options:e.Locations,multiple:""},model:{value:e.SearchFilter.Location,callback:function(t){e.$set(e.SearchFilter,"Location",t)},expression:"SearchFilter.Location"}}):e._e(),e.IsReview?r("Select",{staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"筛选审核规则",options:e.RulesDrop},model:{value:e.SearchFilter.RuleId,callback:function(t){e.$set(e.SearchFilter,"RuleId",t)},expression:"SearchFilter.RuleId"}}):e._e(),r("Select",{staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"时间类型",options:e.TimeTypeDrop},model:{value:e.SearchFilter.TimeType,callback:function(t){e.$set(e.SearchFilter,"TimeType",t)},expression:"SearchFilter.TimeType"}}),r("DatePicker",{staticClass:"P-W-200 P-ML-10 P-MB-10 P-VA-T",attrs:{type:"datetime",placeholder:"开始时间"},model:{value:e.SearchFilter.StartTime,callback:function(t){e.$set(e.SearchFilter,"StartTime",t)},expression:"SearchFilter.StartTime"}}),r("DatePicker",{staticClass:"P-W-200 P-ML-10 P-MB-10 P-VA-T",attrs:{type:"datetime",placeholder:"结束时间"},model:{value:e.SearchFilter.EndTime,callback:function(t){e.$set(e.SearchFilter,"EndTime",t)},expression:"SearchFilter.EndTime"}}),e.IsSort?r("Select",{staticClass:"P-W-200 P-ML-10 P-MB-10",attrs:{placeholder:"筛选排序方式",options:e.SortDrop},model:{value:e.SortOrder,callback:function(t){e.SortOrder=t},expression:"SortOrder"}}):e._e()],1)],1),r("FormItem",{staticClass:"P-ML-10 P-MB-10"},[r("Input",{staticClass:"P-W-400",attrs:{placeholder:"搜索关键字"},on:{"on-enter":e.SearchList},model:{value:e.SearchFilter.SearchKey,callback:function(t){e.$set(e.SearchFilter,"SearchKey",t)},expression:"SearchFilter.SearchKey"}},[r("Select",{staticClass:"P-W-100 P-TA-L",attrs:{slot:"prepend",placeholder:"搜索关键词",options:e.SearchKeyType},slot:"prepend",model:{value:e.SearchFilter.SearchKeyType,callback:function(t){e.$set(e.SearchFilter,"SearchKeyType",t)},expression:"SearchFilter.SearchKeyType"}}),r("Button",{attrs:{slot:"append",type:"primary"},on:{click:e.SearchList},slot:"append"},[e._v("搜索")])],1)],1),r("FormItem",{staticClass:"P-ML-10 P-MB-10"},[r("Button",{attrs:{type:"warning"},on:{click:e.ResetList}},[e._v("重置")])],1)],1)],1)},i=[],n=(r("d9b9"),r("02cc"),r("5e8c"),r("0a9c"),r("cee1"),r("9b6f"),r("5c62")),o=r("3231"),s=r("064d"),c=r("46d7"),l=r("631e"),u=r("4a81"),d=r("d11d"),p=r("a349"),h=r("1459"),f=r("db83"),S=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(o["a"])(this,r),e=t.apply(this,arguments),e.AccurateSearch=!1,e.PlatformDrop=e.$Utils.GetEnumArr(e.$Enums.Sales.Platform),e.StoreDrop=[],e.WarehouseDrop=[],e.ShipMethodDrop=[],e.RulesDrop=[],e.ItemTypeDrop=e.$Utils.GetEnumArr(e.$Enums.Warehouse.ItemType),e.Locations=e.GetLocations(),e.TimeTypeDrop=e.$Utils.GetEnumArr(e.$Enums.Warehouse.TimeType),e.StatusDrop=e.$Utils.GetEnumArr(e.$Enums.Warehouse.ShipOrderStatus),e.ExceptionDrop=e.$Utils.GetEnumArr(e.$Enums.Public.YesNo),e.LogisticsStatusDrop=e.$Utils.GetEnumArr(e.$Enums.CustomerService.LogisticsStatus),e.CustomerProcessDrop=e.$Utils.GetEnumArr(e.$Enums.CustomerService.CustomerHandleProcess),e.SortDrop=e.$Utils.GetEnumArr(e.$Enums.Warehouse.SortType),e.SearchKeyType=e.$Utils.GetEnumArr(e.$Enums.Warehouse.ShipOrderKeyType),e.SearchFilter=new h["a"].ShipOrderSearch,e.SortField="",e.SortOrder=0,e.ListApi=e.$Api.ShipOrderGetList,e.ListApis=[{Key:"ClearOutStock",Value:e.$Api.GetExistClearStockoutList},{Key:"LogisticsException",Value:e.$Api.LogisticsAnomalyRecordList},{Key:"WaitHoldUp",Value:e.$Api.GetWaitHoldUpOrderList},{Key:"WaitAudit",Value:e.$Api.GetWaitAuditList},{Key:"SkuError",Value:e.$Api.GetShipOrderSkuErrorList},{Key:"NoMatchWarehouse",Value:e.$Api.GetUnmatchWareHouseList}],e.IsWarehouseWork=!1,e.IsFromSales=!1,e.IsStatusFilter=!1,e.IsLocation=!1,e.IsReview=!1,e.IsSort=!1,e}return Object(s["a"])(r,[{key:"EmitList",value:function(e,t){}},{key:"EmitPagerChange",value:function(e,t){}},{key:"mounted",value:function(){var e=this;this.$set(this,"SearchFilter",JSON.parse(JSON.stringify(this.SearchInit))),this.SetFilterFlag();var t=this.ListApis.filter((function(t){return t.Key===e.Page}))[0];this.ListApi=t?t.Value:this.ListApi,this.SearchList(),this.COUNTRY_DROP.length||this["Base/UPDATE_BASE_INFO"]("COUNTRY"),this.WarehouseDrop.length||this.GetWarehouseDrop(),this.IsFromSales&&this.SearchFilter.Platform&&this.GetStoreDrop(this.SearchFilter.Platform)}},{key:"SetFilterFlag",value:function(){this.$set(this,"IsFromSales",this.$Enums.Sales.Platform[this.Page]>0);var e=["Confirmed","WaitPick","Picked","Packed","Shiped","StockOut","HoldUp","ClearOutStock","PauseOutStock","Exception"],t=["WaitAudit","OneDayNoTrackingNumber","TwoDaysNotShiped","FiveDaysNotShiped","WaitHoldUp"];this.$set(this,"IsWarehouseWork",e.concat(t).concat(["SkuError","NoMatchWarehouse"]).includes(this.Page));var r=e.concat(["Contact","SkuError","NoMatchWarehouse"]);this.$set(this,"IsStatusFilter",!r.includes(this.Page));var a=e.concat(["ClearOutStock","WaitHoldUp","PauseOutStock"]);this.$set(this,"IsLocation",a.includes(this.Page)),this.$set(this,"IsReview","WaitAudit"===this.Page),this.$set(this,"IsSort","StockOut"===this.Page),this.IsReview&&this.GetReviewRulesDrop()}},{key:"GetStoreDrop",value:function(e){var t=this;this.$refs.StoreDrop.clearSingleSelect(),e&&this.$Api.Sales[String(e)].StoreDrop?this.$Request.Post({Server:this.$Server.Sales,Api:{Address:this.$Api.Sales[String(e)].StoreDrop,Login:!1},Data:"",Callback:function(e){e.IsSuccess?t.$set(t,"StoreDrop",e.Data.DropList):t.$Request.Error(e)}}):this.$set(this,"StoreDrop",[])}},{key:"GetWarehouseDrop",value:function(){var e=this;this.$Request.Post({Server:this.$Server.Settings,Api:{Address:this.$Api.GetWarehouseDropList,Login:!1},Data:!0,Callback:function(t){var r;t.IsSuccess?(r=e.WarehouseDrop).push.apply(r,Object(n["a"])(t.Data.DropList)):e.$Request.Error(t)}})}},{key:"GetShipMethodDrop",value:function(e){var t=this;this.$refs.ShipMethodDrop.clearSingleSelect(),e?this.$Request.Post({Server:this.$Server.Logistics,Api:{Address:this.$Api.ChannelDropList,Login:!1},Data:e,Callback:function(e){var r;e.IsSuccess?(r=t.ShipMethodDrop).splice.apply(r,[0,t.ShipMethodDrop.length].concat(Object(n["a"])(e.Data.DropList))):t.$Request.Error(e)}}):this.$set(this,"ShipMethodDrop",[])}},{key:"GetLocations",value:function(){for(var e=[],t=1;t<=15;t++)e.push({Key:t,Value:t});return e}},{key:"GetReviewRulesDrop",value:function(){var e=this;this.$Request.Post({Server:this.$Server.Settings,Api:{Address:this.$Api.AuditRulesDropList,Login:!1},Data:"",Callback:function(t){var r;t.IsSuccess?(r=e.RulesDrop).splice.apply(r,[0,e.RulesDrop.length].concat(Object(n["a"])(t.Data.DropList))):e.$Request.Error(t)}})}},{key:"TriggerSearch",value:function(){this.$set(this,"AccurateSearch",!this.AccurateSearch)}},{key:"CloseSearch",value:function(){this.$set(this,"AccurateSearch",!1)}},{key:"SearchList",value:function(){var e=this;this.$UI.Loading.Show();var t=JSON.parse(JSON.stringify(this.SearchFilter));t.Location=t.Location.join(","),t.StartTime=t.StartTime?this.$UI.Render.NewDate(t.StartTime):"",t.EndTime=t.EndTime?this.$UI.Render.NewDate(t.StartTime):"",this.$Request.Post({Server:"LogisticsException"===this.Page?this.$Server.CustomerService:this.$Server.Warehouse,Api:{Address:this.ListApi,Login:!0},Data:{PageIndex:this.Pager.PageIndex,PageSize:this.Pager.PageSize,SortField:this.SortOrder?"Price":"",SortOrder:1===this.SortOrder?"desc":2===this.SortOrder?"asc":"",Conditions:t},Callback:function(t){e.$UI.Loading.Hide(),e.CloseSearch(),t.IsSuccess?e.EmitList(t.Data.PageModel.Items,t.Data.PageModel.TotalItems):e.$Request.Error(t)}})}},{key:"ResetList",value:function(){this.$set(this,"SearchFilter",new h["a"].ShipOrderSearch(this.SearchInit)),this.$set(this,"SortOrder",0),this.EmitPagerChange(new f["a"].Pager,!0)}},{key:"COUNTRY_DROP",get:function(){return this["Base/COUNTRY_DROP"]}}]),r}(d["d"]);u["a"]([p["a"]],S.prototype,"Base/UPDATE_BASE_INFO",void 0),u["a"]([p["b"]],S.prototype,"Base/COUNTRY_DROP",void 0),u["a"]([Object(d["c"])(h["a"].ShipOrderSearch)],S.prototype,"SearchInit",void 0),u["a"]([Object(d["c"])(f["a"].Pager)],S.prototype,"Pager",void 0),u["a"]([Object(d["c"])(String)],S.prototype,"Page",void 0),u["a"]([Object(d["b"])()],S.prototype,"EmitList",null),u["a"]([Object(d["b"])()],S.prototype,"EmitPagerChange",null),S=u["a"]([Object(d["a"])({})],S);var m=S,O=m,v=r("4023"),I=Object(v["a"])(O,a,i,!1,null,null,null);t["default"]=I.exports},f7c4:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",{attrs:{span:"24"}},[e.SHIP_ORDER_REMARK.length?r("Table",{staticClass:"P-MB-10",attrs:{size:"small",columns:e.Cols,data:e.SHIP_ORDER_REMARK,"show-header":!1}}):e._e(),r("Form",{attrs:{model:e.SHIP_ORDER_INFO,"label-width":90,inline:""}},[r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"发货单号："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.OrderCode))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"订单号："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.OrderCode))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"卖家店铺："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.StoreName||"-"))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"交易号："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.PlatformOrderId))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"原付金额："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.PayPrice)+" "+e._s(e.SHIP_ORDER_INFO.PayCurrency))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"美金金额："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.TotalPrice))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"状态："}},[r("p",[e._v(e._s(e.$Enums.Warehouse.ShipOrderStatus[e.SHIP_ORDER_INFO.Status]))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"下单时间："}},[r("p",[e._v(e._s(e.$UI.Render.Date(e.SHIP_ORDER_INFO.CreateTime||"")))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"付款时间："}},[r("p",[e._v(e._s(e.$UI.Render.Date(e.SHIP_ORDER_INFO.PaidTime||"")))])]),r("FormItem",{staticClass:"P-W-50-Percent P-MR-0 P-MB-10",attrs:{label:"发货时间："}},[r("p",[e._v(e._s(e.$UI.Render.Date(e.SHIP_ORDER_INFO.ShipedTime||"")))])]),r("FormItem",{staticClass:"P-W-100-Percent P-MR-0 P-MB-10",attrs:{label:"买家备注："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.BuyerRemark||"-"))])]),r("FormItem",{staticClass:"P-W-100-Percent P-MR-0 P-MB-10",attrs:{label:"操作备注："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.Remark||"-"))])]),r("FormItem",{staticClass:"P-W-100-Percent P-MR-0 P-MB-10",attrs:{label:"异常备注："}},[r("p",[e._v(e._s(e.SHIP_ORDER_INFO.AutoMatchRemark||"-"))])])],1)],1)},i=[],n=(r("d9b9"),r("b916"),r("9bdd"),r("3231")),o=r("064d"),s=r("46d7"),c=r("631e"),l=r("4a81"),u=r("d11d"),d=r("a349"),p=function(e){Object(s["a"])(r,e);var t=Object(c["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.Cols=[{title:"备注",tooltip:!0,render:function(e,t){return e("span","".concat(t.row.Created.replace("T"," ")," ").concat(t.row.UserName,"：").concat(t.row.Content))}},{title:"操作",width:78,render:function(t,r){return t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.DelRemark(r.row._index)}}},"删除")}}],e}return Object(o["a"])(r,[{key:"EmitOperateSuccess",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"DelRemark",value:function(e){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.ShipOrderDelRemark,Login:!0},Data:this.SHIP_ORDER_REMARK[e].Id,Callback:function(e){t.$UI.Loading.Hide(),e.IsSuccess?(t.$UI.Tips.Floating("success","删除备注成功"),t.EmitOperateSuccess("ShipOrder/UPDATE_SHIP_ORDER_REMARK")):t.$Request.Error(e)}})}},{key:"SHIP_ORDER_INFO",get:function(){return this["ShipOrder/SHIP_ORDER_INFO"]}},{key:"SHIP_ORDER_REMARK",get:function(){return this["ShipOrder/SHIP_ORDER_REMARK"]}}]),r}(u["d"]);l["a"]([Object(u["b"])()],p.prototype,"EmitOperateSuccess",null),l["a"]([d["b"]],p.prototype,"ShipOrder/SHIP_ORDER_INFO",void 0),l["a"]([d["b"]],p.prototype,"ShipOrder/SHIP_ORDER_REMARK",void 0),p=l["a"]([Object(u["a"])({name:"ShipOrderBaseInfo"})],p);var h=p,f=h,S=r("4023"),m=Object(S["a"])(f,a,i,!1,null,"352c9598",null);t["default"]=m.exports},f849:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ShipOrder",{attrs:{SearchInit:e.SearchInit,UsableOperations:e.UsableOperations,Page:"UnMatchWarehouse"}})},i=[],n=r("3231"),o=r("46d7"),s=r("631e"),c=r("4a81"),l=r("d11d"),u=r("1459"),d=function(e){Object(o["a"])(r,e);var t=Object(s["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.SearchInit=new u["a"].ShipOrderSearch,e.UsableOperations=["ToConfirmed","ToCancel","ExportDetailsErrorOrder"],e}return r}(l["d"]);d=c["a"]([Object(l["a"])({name:"SkuErrorOrder"})],d);var p=d,h=p,f=r("4023"),S=Object(f["a"])(h,a,i,!1,null,"4893b6c0",null);t["default"]=S.exports},feb0:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",[r("Table",{attrs:{columns:e.Cols,data:e.Profits,size:"small",stripe:"",height:e.CalculateHeight()}})],1)},i=[],n=r("5c62"),o=r("3231"),s=r("064d"),c=r("46d7"),l=r("631e"),u=r("4a81"),d=r("d11d"),p=r("a349"),h=r("1b1c"),f=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(o["a"])(this,r),e=t.apply(this,arguments),e.Profits=[],e.Cols=[{title:"订单金额(USD)",key:"OrderTotal"},{title:"汇损(USD)",key:"ExchangeLoss"},{title:"平台佣金(USD)",key:"PlatformCommission"},{title:"Paypal手续费(USD)",key:"PaypalServiceCharge"},{title:"成本(USD)",key:"OrderCost"},{title:"运费(USD)",key:"OrderFreight"},{title:"退款金额",key:"RefundAmount"},{title:"毛利",key:"Profit"},{title:"毛利率",render:function(e,t){return e("span","".concat(t.row.ProfitRate,"%"))}}],e}return Object(s["a"])(r,[{key:"CalculateHeight",value:function(){return 500}},{key:"Trigger",value:function(){var e=this;if(!this.Profits.length){this.$UI.Loading.Show();var t=new h["a"].GrossProfitSearch;t.IsConfirm=!1,t.SearchKey=this.SHIP_ORDER_INFO.OrderCode,t.SearchKeyType=1,this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.StatisticsSalesTradingProfit,Login:!0},Data:{PageIndex:1,PageSize:99999,Conditions:t},Callback:function(t){var r;(e.$UI.Loading.Hide(),t.IsSuccess)?(r=e.Profits).push.apply(r,Object(n["a"])(t.Data.PageModel.Items)):e.$Request.Error(t)}})}}},{key:"SHIP_ORDER_INFO",get:function(){return this["ShipOrder/SHIP_ORDER_INFO"]}}]),r}(d["d"]);u["a"]([p["b"]],f.prototype,"ShipOrder/SHIP_ORDER_INFO",void 0),f=u["a"]([Object(d["a"])({name:"ShipOrderGrossProfits"})],f);var S=f,m=S,O=r("4023"),v=Object(O["a"])(m,a,i,!1,null,"42e2fb94",null);t["default"]=v.exports}}]);