(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221c54"],{cc86:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Row",{staticClass:"P-Inline-Block"},[o("Col",[o("Button",{staticClass:"P-Inline-Block P-MR-10",attrs:{type:"primary"},on:{click:e.OpenModal}},[e._v("打印SKU标签")]),o("Modal",{attrs:{title:"打印SKU标签","mask-closable":!1,width:600},on:{"on-cancel":function(t){return e.ClearModal(0)}},model:{value:e.ModifyModal,callback:function(t){e.ModifyModal=t},expression:"ModifyModal"}},[o("Row",[o("Form",{ref:"PrintSkuForm",attrs:{"label-width":100,model:e.PrintSkuForm,rules:e.BatchPrintSkuRule,inline:"",onsubmit:"return false"}},[o("FormItem",{staticClass:"P-W-100-Percent P-MB-10",attrs:{label:"到货单号：",prop:"Code"}},[o("Input",{ref:"PrintSkuLabelCode",attrs:{placeholder:"到货单号"},on:{"on-enter":e.CheckPrintSkuData},model:{value:e.PrintSkuForm.Code,callback:function(t){e.$set(e.PrintSkuForm,"Code",t)},expression:"PrintSkuForm.Code"}})],1)],1)],1),o("footer",{staticClass:"P-TA-R",attrs:{slot:"footer"},slot:"footer"},[o("Button",{on:{click:function(t){return e.ClearModal(0)}}},[e._v("取消")])],1)],1)],1)],1)},n=[],i=o("3231"),r=o("064d"),l=o("46d7"),u=o("631e"),s=o("4a81"),m=o("d11d"),d=o("c638"),c=o("2437"),S=function(e){Object(l["a"])(o,e);var t=Object(u["a"])(o);function o(){var e;return Object(i["a"])(this,o),e=t.apply(this,arguments),e.PrintSkuSize="60*40",e.ModifyModal=!1,e.PrintSkuForm=new d["a"].SingleCodeForm,e.BatchPrintSkuRule={Code:[{required:!0,message:" "}]},e}return Object(r["a"])(o,[{key:"HandleResMsg",value:function(e){}},{key:"Trigger",value:function(){var e=this;this.ModifyModal=!0,this.$nextTick((function(){e.$refs["PrintSkuLabelCode"].focus()}))}},{key:"OpenModal",value:function(){this.HandleResMsg(2)}},{key:"CheckPrintSkuData",value:function(){var e=this;this.$refs["PrintSkuForm"].validate((function(t){t&&e.GetPaoItems()}))}},{key:"GetPaoItems",value:function(){var e=this;this.$refs["PrintSkuLabelCode"].blur(),this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.GetPAOInfoByCode,Login:!0},Data:this.PrintSkuForm.Code,Callback:function(t){if(e.$UI.Loading.Hide(),t.IsSuccess){if(0==t.Data.PageModel.Id)return e.$UI.Tips.Floating("warning","系统中不存在到货单[".concat(e.PrintSkuForm.Code,"]，请重新输入/扫描到货单号")),void(e.PrintSkuForm.Code="");var o={SkuCode:t.Data.PageModel.SkuCode,SkuName:t.Data.PageModel.SkuName,LocationCode:t.Data.PageModel.LocationCode,ArrvialQuantity:t.Data.PageModel.ArrvialQuantity};e.PrintSingleSku(o),e.$refs["PrintSkuLabelCode"].focus()}else e.$Request.Error(t)}})}},{key:"PrintSingleSku",value:function(e){for(var t=Object(c["a"])(),o=Math.ceil(e.ArrvialQuantity/40),a=1;a<=o;a++){t.PRINT_INITA("0mm","0mm","60mm","40mm",""),t.SET_PRINT_PAGESIZE(0,"60mm","40mm",""),t.SET_PRINT_MODE("PRINT_NOCOLLATE",1);for(var n=this.ComputedSkuLabelAmount(a,e.ArrvialQuantity,40),i=0;i<n;i++)this.DesignSkuLabel(t,e.SkuCode,e.SkuCode,e.SkuName,e.LocationCode);t.PRINT()}this.$UI.Tips.Floating("success","打印SKU标签成功"),this.EmptyContent()}},{key:"ComputedSkuLabelAmount",value:function(e,t,o){return e*o>t?t-(e-1)*o:o}},{key:"DesignSkuLabel",value:function(e,t,o,a,n){e.NewPage(),e.ADD_PRINT_BARCODE("4.26mm","10%","80%","13.15mm","128Auto",t),e.SET_PRINT_STYLEA(0,"ShowBarText",0),e.ADD_PRINT_TEXT("19.82mm","25.51mm","32.54mm","6.56mm",o),e.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),e.SET_PRINT_STYLEA(0,"Alignment",2),e.SET_PRINT_STYLEA(0,"Bold",1),e.ADD_PRINT_TEXT("28.84mm","1.59mm","57.68mm","9.79mm",a),e.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),e.SET_PRINT_STYLEA(0,"FontSize",10),e.SET_PRINT_STYLEA(0,"Alignment",2),e.SET_PRINT_STYLEA(0,"Bold",1),e.ADD_PRINT_TEXT("19.82mm","2.01mm","23.5mm","5.29mm",n),e.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),e.SET_PRINT_STYLEA(0,"Bold",1)}},{key:"EmptyContent",value:function(){this.PrintSkuForm.Code="",this.$refs["PrintSkuForm"].resetFields()}},{key:"ClearModal",value:function(e){this.EmptyContent(),this.ModifyModal=!1,this.HandleResMsg(e)}}]),o}(m["d"]);s["a"]([Object(m["c"])()],S.prototype,"ShowModal",void 0),s["a"]([Object(m["b"])()],S.prototype,"HandleResMsg",null),S=s["a"]([Object(m["a"])({name:"PrintSkuLabel"})],S);var P=S,k=P,T=o("4023"),f=Object(T["a"])(k,a,n,!1,null,null,null);t["default"]=f.exports}}]);