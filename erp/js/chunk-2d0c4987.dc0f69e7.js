(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4987"],{"3c01":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Row",{staticClass:"P-Inline-Block"},[r("Button",{staticClass:"P-MB-10 P-MR-10 P-Inline-Block",attrs:{type:"primary"},on:{click:function(t){e.ShowModal=!0}}},[e._v("导出")]),r("Modal",{attrs:{title:"导出","mask-closable":!1,width:"600"},on:{"on-ClearModal":e.ClearModal},model:{value:e.ShowModal,callback:function(t){e.ShowModal=t},expression:"ShowModal"}},[r("Form",{ref:"exportOrdForm",attrs:{onsubmit:"return false","label-width":90,rules:e.exportOrdRules,model:e.exportOrdForm}},[r("FormItem",{attrs:{label:"时间类型：",prop:"SearchTimeType"}},[r("RadioGroup",{model:{value:e.exportOrdForm.SearchTimeType,callback:function(t){e.$set(e.exportOrdForm,"SearchTimeType",t)},expression:"exportOrdForm.SearchTimeType"}},[r("Radio",{attrs:{label:"1"}},[e._v("发货时间")]),r("Radio",{attrs:{label:"2"}},[e._v("付款时间")])],1)],1),r("FormItem",{staticClass:"ivu-form-item-required",attrs:{label:"时间区间："}},[r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{prop:"BeginTime"}},[r("DatePicker",{staticClass:"P-W-100-Percent",attrs:{type:"datetime",placeholder:"开始时间"},model:{value:e.exportOrdForm.BeginTime,callback:function(t){e.$set(e.exportOrdForm,"BeginTime",t)},expression:"exportOrdForm.BeginTime"}})],1)],1),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[e._v("-")]),r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{prop:"EndTime"}},[r("DatePicker",{staticClass:"P-W-100-Percent",attrs:{type:"datetime",placeholder:"结束时间"},model:{value:e.exportOrdForm.EndTime,callback:function(t){e.$set(e.exportOrdForm,"EndTime",t)},expression:"exportOrdForm.EndTime"}})],1)],1)],1)],1),r("Form-item",{attrs:{label:"平台："}},[r("Select",{attrs:{placeholder:"筛选平台",options:e.platformList},model:{value:e.exportOrdForm.Platform,callback:function(t){e.$set(e.exportOrdForm,"Platform",t)},expression:"exportOrdForm.Platform"}})],1),r("Form-item",{attrs:{label:"店铺："}},[r("Select",{ref:"Store",attrs:{placeholder:"筛选店铺",options:e.storeList},model:{value:e.exportOrdForm.StoreId,callback:function(t){e.$set(e.exportOrdForm,"StoreId",t)},expression:"exportOrdForm.StoreId"}})],1),r("Form-item",{attrs:{label:"国家："}},[r("Select",{attrs:{placeholder:"筛选国家",options:e.CountryList,optionValKey:"CountryCode",optionKey:"CountryNameCn"},model:{value:e.exportOrdForm.CountryCode,callback:function(t){e.$set(e.exportOrdForm,"CountryCode",t)},expression:"exportOrdForm.CountryCode"}})],1),r("Form-item",{attrs:{label:"状态："}},[r("Select",{attrs:{placeholder:"筛选包裹状态",options:e.packageStatusList},model:{value:e.exportOrdForm.PackageStatus,callback:function(t){e.$set(e.exportOrdForm,"PackageStatus",t)},expression:"exportOrdForm.PackageStatus"}})],1),r("Form-item",{attrs:{label:"仓库："}},[r("Select",{attrs:{placeholder:"筛选发货仓",options:e.WarehouseList},model:{value:e.exportOrdForm.WarehouseId,callback:function(t){e.$set(e.exportOrdForm,"WarehouseId",t)},expression:"exportOrdForm.WarehouseId"}})],1),r("Form-item",{attrs:{label:"渠道："}},[r("Select",{attrs:{placeholder:"筛选物流渠道",multiple:"",options:e.ShipMethodList,optionValKey:"Id",optionKey:"Name"},model:{value:e.exportOrdForm.ShippingMethodId,callback:function(t){e.$set(e.exportOrdForm,"ShippingMethodId",t)},expression:"exportOrdForm.ShippingMethodId"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.exportData}},[e._v("导出")]),r("Button",{on:{click:e.ClearModal}},[e._v("取消")])],1)],1)],1)},a=[],i=(r("e8f2"),r("b916"),r("9bdd"),r("3231")),s=r("064d"),l=r("46d7"),n=r("631e"),p=r("4a81"),d=r("d11d"),c=r("eb54"),m=function(e){Object(l["a"])(r,e);var t=Object(n["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.platformList=e.$Utils.GetEnumArr(e.$Enums.Sales.Platform),e.storeList=[],e.packageStatusList=e.$Utils.GetEnumArr(e.$Enums.Logistics.TrackingmoreStatus),e.exportOrdForm=new c["a"].ExportData,e.ShowModal=!1,e.exportOrdRules={BeginTime:[{required:!0,message:"请选择开始发货时间",trigger:"change",type:"date"}],EndTime:[{required:!0,message:"请选择结束发货时间",trigger:"change",type:"date"}],SearchTimeType:[{required:!0,message:"请选择时间类型",trigger:"change",type:"string"}]},e}return Object(s["a"])(r,[{key:"ChangePlatForm",value:function(e){this.exportOrdForm.StoreId="",0!=this.storeList.length&&this.$refs.Store.clearSingleSelect(),this.storeList=[],""!=e&&this.GetStoreDropList(e)}},{key:"GetStoreDropList",value:function(e){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Sales,Api:{Address:this.$Api.Sales[e].StoreDrop},Data:"",Callback:function(e){t.$UI.Loading.Hide(),e.IsSuccess?t.storeList=e.Data.DropList:t.$Request.Error(e)}})}},{key:"ClearModal",value:function(){this.ShowModal=!1,this.$refs["exportOrdForm"].resetFields()}},{key:"exportData",value:function(){var e=this;this.$refs["exportOrdForm"].validate((function(t){if(t){var r=new Date(e.exportOrdForm.BeginTime).getTime(),o=new Date(e.exportOrdForm.EndTime).getTime();if(r>o)return void e.$UI.Tips.Floating("warning","开始时间不能大于结束时间");if((o-r)/864e5>30)return void e.$UI.Tips.Floating("warning","筛选订单时间区间最多只能30天");e.PostExport()}}))}},{key:"PostExport",value:function(){var e=this,t=JSON.parse(JSON.stringify(this.exportOrdForm));t.SearchTimeType=Number(t.SearchTimeType),this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Logistics,Api:{Address:this.$Api.ChannelTrackingmoreExport,Login:!0},Data:t,Callback:function(t){e.$UI.Loading.Hide(),t.IsSuccess?(e.$UI.Tips.Floating("success","导出数据成功"),window.open(e.$Server.Logistics+"/"+t.Data.Url.replace(/zip/,"xls")),e.ClearModal()):e.$Request.Error(t)}})}}]),r}(d["d"]);p["a"]([Object(d["c"])()],m.prototype,"CountryList",void 0),p["a"]([Object(d["c"])()],m.prototype,"WarehouseList",void 0),p["a"]([Object(d["c"])()],m.prototype,"ShipMethodList",void 0),p["a"]([Object(d["e"])("exportOrdForm.Platform")],m.prototype,"ChangePlatForm",null),m=p["a"]([Object(d["a"])({name:"ExportTrackingMore",components:{}})],m);var u=m,h=u,x=r("4023"),S=Object(x["a"])(h,o,a,!1,null,null,null);t["default"]=S.exports}}]);