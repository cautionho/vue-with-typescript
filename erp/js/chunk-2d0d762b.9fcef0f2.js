(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d762b"],{"771f":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Col",[o("Modal",{attrs:{title:3===t.Type?"美工处理":"拍摄需求审核","mask-closable":!1,width:t.IsBatch?450:700},on:{"on-cancel":function(e){return t.ChangeMsg(!1)}},model:{value:t.ShowModal,callback:function(e){t.ShowModal=e},expression:"ShowModal"}},[t.IsBatch?o("section",[o("span",{staticClass:"P-Inline-Block P-MT-5"},[t._v("更换美工：")]),o("Select",{staticClass:"P-W-300 P-ML-10 P-Inline-Block",attrs:{placeholder:"更换美工",options:t.DropOperator},model:{value:t.Operator,callback:function(e){t.Operator=e},expression:"Operator"}})],1):o("section",[o("PhotoRequestInfo",{ref:"PhotoRequestInfo",attrs:{OpeStatus:t.Type}}),o("Input",{ref:"Remark",attrs:{placeholder:"请输入备注",type:"textarea",autosize:{minRows:4,maxRows:5}},model:{value:t.Remark,callback:function(e){t.Remark=e},expression:"Remark"}})],1),3===t.Type?o("div",{attrs:{slot:"footer"},slot:"footer"},[t.IsBatch?t._e():o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.PostComit(3)}}},[t._v("提交销售审核")]),t.IsBatch?t._e():o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.PostComit(1)}}},[t._v("需求退回修改")]),t.IsBatch?o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.PostComit(2,!0)}}},[t._v("提交")]):t._e(),o("Button",{on:{click:function(e){return t.ChangeMsg(!1)}}},[t._v("返回")])],1):t._e(),4===t.Type?o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.PostComit(4)}}},[t._v("通过")]),o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.PostComit(2)}}},[t._v("图片退回修改")]),o("Button",{on:{click:function(e){return t.ChangeMsg(!1)}}},[t._v("返回")])],1):t._e()])],1)},r=[],s=(o("76bb"),o("6bf8"),o("3231")),n=o("064d"),i=o("46d7"),c=o("631e"),u=o("4a81"),h=o("d11d"),l=function(t){Object(i["a"])(o,t);var e=Object(c["a"])(o);function o(){var t;return Object(s["a"])(this,o),t=e.apply(this,arguments),t.Operator=0,t.IsBatch=!1,t.DropOperator=[],t.CurrOpeData=[],t.Type=0,t.ShowModal=!1,t.Remark="",t}return Object(n["a"])(o,[{key:"ChangeMsg",value:function(t){var e=this;this.ShowModal=!1,this.$nextTick((function(){e.Remark="",e.Operator=0,e.IsBatch=!1}))}},{key:"TriggerModal",value:function(t,e,o){var a=this;this.Type=e,this.CurrOpeData=t,this.$refs.PhotoRequestInfo.InfoData=t[0],this.ShowModal=!0,null!==o&&3==e?(this.DropOperator=o,this.IsBatch=!0):this.$nextTick((function(){a.$refs.Remark.focus()}))}},{key:"PostComit",value:function(t,e){var o=this;if(!this.IsBatch&&this.$refs.PhotoRequestInfo.IsChangeImg){if(this.$refs.PhotoRequestInfo.InfoData.SkuImage.length<1)return void this.$UI.Tips.Floating("warning"," 请上传图片");this.UploadPic(),this.$refs.PhotoRequestInfo.IsChangeImg=!1}this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.PhotoRequestChangeStatus,Login:!0},Data:{Id:this.CurrOpeData.map((function(t){return t.Id})),Remark:this.Remark,Status:t,Operator:this.IsBatch?this.Operator:this.CurrOpeData[0].Operator},Callback:function(a){a.IsSuccess?(o.$UI.Tips.Floating("success","".concat(1===t?"需求退回修改":2===t?e?"提交美工处理":"图片退回修改":3===t?"提交销售审核":"审核通过","成功")),o.ChangeMsg(!0)):(o.$Request.Error(a),o.$UI.Loading.Hide())}})}},{key:"UploadPic",value:function(){var t=this;this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.PhotoRequestUpload,Login:!0},Data:{Id:this.CurrOpeData.map((function(t){return t.Id})),Images:this.$refs.PhotoRequestInfo.InfoData.SkuImage},Callback:function(e){e.IsSuccess||t.$Request.Error(e)}})}}]),o}(h["d"]);u["a"]([Object(h["b"])()],l.prototype,"ChangeMsg",null),l=u["a"]([Object(h["a"])({name:"OperaPhotoRequest",components:{PhotoRequestInfo:function(){return o.e("chunk-d89bd8ec").then(o.bind(null,"c222"))}}})],l);var p=l,f=p,d=o("4023"),I=Object(d["a"])(f,a,r,!1,null,null,null);e["default"]=I.exports}}]);