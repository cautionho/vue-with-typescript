(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d2f06"],{"5b47":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Col",{staticClass:"P-Float-Right P-PL-10 P-PR-10 P-MR-10 P-Pointer"},[s("Dropdown",[s("span",{staticClass:"P-Text-White P-Hover-White",attrs:{href:"javascript:void(0)"}},[e._v("当前用户："+e._s(e.UserName)+" "),s("Icon",{staticClass:"P-ML-5",attrs:{type:"ios-arrow-down"}})],1),s("Dropdown-menu",{staticStyle:{width:"140px"},attrs:{slot:"list"},slot:"list"},[s("Dropdown-item",[s("span",{staticClass:"P-Block",on:{click:e.ModifyPwdEntrance}},[s("span",[e._v("修改密码")])])]),s("Dropdown-item",[s("span",{staticClass:"P-Block",on:{click:e.Logout}},[s("span",[e._v("退出系统")])])])],1)],1),s("Modal",{attrs:{title:"修改密码",closable:!1,"mask-closable":!1},model:{value:e.ModifyModal,callback:function(t){e.ModifyModal=t},expression:"ModifyModal"}},[s("Form",{ref:"ModifyPwdMsg",attrs:{onsubmit:"return false",model:e.ModifyPwdMsg,rules:e.RuleValidate,"label-width":100}},[s("Form-item",{attrs:{label:"原密码：",prop:"OldPwd"}},[s("Input",{ref:"OldPwdInput",staticClass:"P-W-100-Percent",attrs:{type:"password",placeholder:"请输入原密码"},on:{"on-enter":e.ValidateModifyPwd},model:{value:e.ModifyPwdMsg.OldPwd,callback:function(t){e.$set(e.ModifyPwdMsg,"OldPwd",t)},expression:"ModifyPwdMsg.OldPwd"}})],1),s("Form-item",{attrs:{label:"新密码：",prop:"NewPwd"}},[s("Input",{ref:"NewPwdInput",staticClass:"P-W-100-Percent",attrs:{type:"password",placeholder:"请输入长度为14~25位新密码"},on:{"on-enter":e.ValidateModifyPwd},model:{value:e.ModifyPwdMsg.NewPwd,callback:function(t){e.$set(e.ModifyPwdMsg,"NewPwd",t)},expression:"ModifyPwdMsg.NewPwd"}})],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:e.ValidateModifyPwd}},[e._v("提交")]),s("Button",{staticClass:"P-ML-10",attrs:{type:"default"},on:{click:e.ModifyCancel}},[e._v("取消")])],1)],1)],1)],1)},d=[],o=s("3231"),a=s("064d"),l=s("46d7"),n=s("631e"),r=s("4a81"),c=s("d11d"),f=function(e){Object(l["a"])(s,e);var t=Object(n["a"])(s);function s(){var e;return Object(o["a"])(this,s),e=t.apply(this,arguments),e.UserName="",e.ModifyModal=!1,e.RuleValidate={OldPwd:[{required:!0,message:"请填写原密码",trigger:"blur"},{type:"string",min:8,message:"密码长度不能小于8位"}],NewPwd:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:14,message:"密码长度不能小于14位"},{type:"string",max:25,message:"密码长度不能大于25位"}]},e.ModifyPwdMsg={OldPwd:"",NewPwd:""},e}return Object(a["a"])(s,[{key:"mounted",value:function(){this.UserName=JSON.parse(this.$Cookie.Get("frler_user")).UserName}},{key:"Logout",value:function(){var e=this;this.$UI.Tips.Modal({Type:"confirm",Content:"是否退出系统",Enter:!1,Callback:function(t){t&&e.$Log.Out()}})}},{key:"ModifyPwdEntrance",value:function(){this.$refs["ModifyPwdMsg"].resetFields(),this.ModifyModal=!0,this.$nextTick((function(){this.$refs["OldPwdInput"].focus()}))}},{key:"ValidateModifyPwd",value:function(){var e=this;this.$refs["ModifyPwdMsg"].validate((function(t){t?e.PostModifyPwd():e.ModifyPwdMsg.OldPwd?(e.$refs["NewPwdInput"].$el.children[1].select(),e.$refs["NewPwdInput"].focus()):e.$refs["OldPwdInput"].focus()}))}},{key:"PostModifyPwd",value:function(){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Admin,Api:{Address:this.$Api.UserChangePwd,Login:!0},Data:this.ModifyPwdMsg,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success","修改密码成功"),e.ModifyCancel()):e.$Request.Error(t),e.$UI.Loading.Hide()}})}},{key:"ModifyCancel",value:function(){this.$set(this,"ModifyModal",!1),this.$refs["ModifyPwdMsg"].resetFields()}}]),s}(c["d"]);f=r["a"]([Object(c["a"])({name:"UserMsg"})],f);var u=f,w=u,P=s("4023"),M=Object(P["a"])(w,i,d,!1,null,null,null);t["default"]=M.exports}}]);