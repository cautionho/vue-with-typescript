(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54b3aa46"],{2266:function(t,o,e){"use strict";var n=e("7b30"),i=e("ce83").findIndex,a=e("2e3e"),s="findIndex",l=!0;s in[]&&Array(1)[s]((function(){l=!1})),n({target:"Array",proto:!0,forced:l},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},"42b3":function(t,o,e){"use strict";var n=e("439f"),i=e.n(n);i.a},"439f":function(t,o,e){},"9ae0":function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("Row",{staticClass:"P-Inline-Block"},[e("Col",{attrs:{span:"24"}},[e("Modal",{attrs:{title:t.ModalTitle,width:1200},on:{"on-cancel":t.CancelModal},model:{value:t.CustomRulesModal,callback:function(o){t.CustomRulesModal=o},expression:"CustomRulesModal"}},[e("Row",[e("Col",{attrs:{span:"24"}},[e("Form",{ref:"RuleInfo",attrs:{model:t.RuleInfo,rules:t.RuleInfoRules,inline:"",onsubmit:"return false;","label-width":90}},[e("FormItem",{staticClass:"P-W-400",attrs:{label:"规则名称：",prop:"RuleName"}},[e("Input",{ref:"RuleNameIpt",attrs:{placeholder:"规则名称"},model:{value:t.RuleInfo.RuleName,callback:function(o){t.$set(t.RuleInfo,"RuleName",o)},expression:"RuleInfo.RuleName"}})],1),"ManMade"!==t.Type?e("FormItem",{staticClass:"P-W-400",attrs:{label:"Warehouse"===t.Type?"仓库":"虚拟渠道",prop:"SelectedValue"}},["Warehouse"===t.Type?e("Select",{attrs:{placeholder:"仓库",options:t.WarehouseDrop},model:{value:t.RuleInfo.SelectedValue,callback:function(o){t.$set(t.RuleInfo,"SelectedValue",o)},expression:"RuleInfo.SelectedValue"}}):t._e(),"Logistics"===t.Type?e("Select",{attrs:{placeholder:"虚拟渠道",options:t.MethodDrop,optionValKey:"Id",optionKey:"Name"},model:{value:t.RuleInfo.SelectedValue,callback:function(o){t.$set(t.RuleInfo,"SelectedValue",o)},expression:"RuleInfo.SelectedValue"}}):t._e()],1):t._e()],1)],1),e("Col",{attrs:{span:"18"}},[e("Table",{attrs:{size:"small",columns:t.Cols,data:t.SelectedConditions,height:"600"}})],1),e("Col",{attrs:{span:"6"}},[e("Table",{ref:"ConditionsList",attrs:{size:"small",columns:t.ConditionsCol,data:t.ConditionsList,height:"600"},on:{"on-selection-change":t.SetSelectedConditions}})],1)],1),e("footer",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"primary"},on:{click:t.Validate}},[t._v("提交")]),e("Button",{on:{click:t.CancelModal}},[t._v("取消")])],1)],1),e("Modal",{attrs:{title:t.ConditionModalTitle,width:900},on:{"on-cancel":t.CancelConditionModal},model:{value:t.ConditionModal,callback:function(o){t.ConditionModal=o},expression:"ConditionModal"}},[e("Row",{staticClass:"P-Inline-Block Condition-Modal P-W-100-Percent"},[e("Col",{directives:[{name:"show",rawName:"v-show",value:t.ConditionModalFlags[1],expression:"ConditionModalFlags[1]"}],attrs:{span:"24"}},[e("PlatformStoreTree",{ref:"PlatformStoreTree"})],1),t.ConditionModalFlags[2]?e("Col",{attrs:{span:"24"}},[e("EbaySiteCondition",{ref:"EbaySiteCondition"})],1):t._e(),e("Col",{directives:[{name:"show",rawName:"v-show",value:t.ConditionModalFlags[3]||t.ConditionModalFlags[30]||t.ConditionModalFlags[33],expression:"ConditionModalFlags[3] || ConditionModalFlags[30] || ConditionModalFlags[33]"}],attrs:{span:"24"}},[30===t.ModifyConditionId?e("h4",{staticClass:"P-MB-10"},[t._v("eBay：")]):t._e(),3===t.ModifyConditionId?e("F-CheckboxGroup",{attrs:{width:200,options:t.GetCountryDrop()},model:{value:t.ConditionVal,callback:function(o){t.ConditionVal=o},expression:"ConditionVal"}}):30===t.ModifyConditionId?e("CheckboxGroup",{model:{value:t.ConditionVal,callback:function(o){t.ConditionVal=o},expression:"ConditionVal"}},t._l(t.DisputedDrop,(function(o,n){return e("Checkbox",{key:n,staticClass:"P-W-200",attrs:{label:o.Value}},[t._v(t._s(o.Key))])})),1):e("CheckboxGroup",{model:{value:t.ConditionVal,callback:function(o){t.ConditionVal=o},expression:"ConditionVal"}},t._l(t.PlatformDrop,(function(o,n){return e("Checkbox",{key:n,staticClass:"P-W-200",attrs:{label:o.Value}},[t._v(t._s(o.Key))])})),1)],1),t.ConditionModalFlags[4]||t.ConditionModalFlags[5]||t.ConditionModalFlags[6]||t.ConditionModalFlags[7]||t.ConditionModalFlags[8]||t.ConditionModalFlags[9]?e("Col",{attrs:{span:"24"}},[e("Form",{attrs:{"label-width":100,onsubmit:"return false;"}},[e("FormItem",{attrs:{label:t.ConditionsList[t.ModifyConditionId-1].ClickString+"："}},[7!==t.ModifyConditionId?e("Input",{ref:"TagInput",staticClass:"P-W-400",attrs:{placeholder:"输入字符"},on:{"on-enter":t.AddTags},model:{value:t.InputVals[0],callback:function(o){t.$set(t.InputVals,0,o)},expression:"InputVals[0]"}},[e("Button",{attrs:{slot:"append"},on:{click:t.AddTags},slot:"append"},[t._v("添加")])],1):t._e(),7===t.ModifyConditionId?e("InputNumber",{ref:"NumInput",staticClass:"P-W-400",attrs:{min:0,placeholder:"输入整数"},model:{value:t.InputVals[0],callback:function(o){t.$set(t.InputVals,0,o)},expression:"InputVals[0]"}}):t._e()],1)],1),7!==t.ModifyConditionId?e("Col",{attrs:{span:"24"}},t._l(t.ConditionVal,(function(o,n){return e("Tag",{key:n,staticClass:"P-MB-10",attrs:{size:"medium",color:"success",name:o,closable:""},on:{"on-close":function(o){return t.DelTags(n)}}},[t._v(t._s(o))])})),1):t._e()],1):t._e(),t.ConditionModalFlags[10]||t.ConditionModalFlags[12]||t.ConditionModalFlags[14]||t.ConditionModalFlags[16]||t.ConditionModalFlags[17]||t.ConditionModalFlags[18]||t.ConditionModalFlags[19]||t.ConditionModalFlags[20]||t.ConditionModalFlags[27]||t.ConditionModalFlags[34]?e("Col",{attrs:{span:"24"}},[t._v(" "+t._s(t.ConditionsList[t.ModifyConditionId-1].ConditionName+"满足以下条件：")+" "),e("CheckboxGroup",{staticClass:"P-MT-20",model:{value:t.ConditionVal,callback:function(o){t.ConditionVal=o},expression:"ConditionVal"}},[e("Checkbox",{attrs:{label:1}},[t._v("＞")]),e("InputNumber",{staticClass:"P-W-200",attrs:{min:-1e5,max:1e5,placeholder:"请输入最小值"},model:{value:t.InputVals[0],callback:function(o){t.$set(t.InputVals,0,o)},expression:"InputVals[0]"}}),e("br"),e("Checkbox",{staticClass:"P-MT-20",attrs:{label:2}},[t._v("＜")]),e("InputNumber",{staticClass:"P-W-200",attrs:{min:-1e5,max:1e5,placeholder:"请输入最大值"},model:{value:t.InputVals[1],callback:function(o){t.$set(t.InputVals,1,o)},expression:"InputVals[1]"}})],1)],1):t._e(),t.ConditionModalFlags[11]?e("Col",{attrs:{span:"24"}},[t._v(" 利润：＜ "),e("InputNumber",{staticClass:"P-W-200",attrs:{min:-1e5,max:1e5,placeholder:"请输入最大值"},model:{value:t.InputVals[1],callback:function(o){t.$set(t.InputVals,1,o)},expression:"InputVals[1]"}}),t._v(" USD ")],1):t._e(),t.ConditionModalFlags[13]?e("Col",{attrs:{span:"24"}},[e("Button",{attrs:{type:"primary"},on:{click:t.TriggerSkuModal}},[t._v("选择SKU")]),e("div",{staticClass:"P-MT-10"},t._l(t.ConditionVal,(function(o,n){return e("Tag",{key:n,staticClass:"P-MB-5 P-MR-5",attrs:{size:"medium",color:"success",name:o,closable:""},on:{"on-close":function(o){return t.DelTags(n)}}},[t._v(t._s(o))])})),1)],1):t._e(),t.ConditionModalFlags[15]||t.ConditionModalFlags[21]||t.ConditionModalFlags[22]||t.ConditionModalFlags[23]||t.ConditionModalFlags[24]||t.ConditionModalFlags[25]||t.ConditionModalFlags[26]||t.ConditionModalFlags[28]||t.ConditionModalFlags[29]||t.ConditionModalFlags[31]||t.ConditionModalFlags[32]?e("Col",{attrs:{span:"24"}},[e("Form",{attrs:{inline:"","label-width":220,onsubmit:"return false;"}},[15!==t.ModifyConditionId&&29!==t.ModifyConditionId?e("FormItem",{attrs:{label:""+t.ConditionsList[t.ModifyConditionId-1].ConditionName}},[e("Select",{staticClass:"P-W-300",attrs:{placeholder:"请选择"+t.ConditionsList[t.ModifyConditionId-1].ConditionName.slice(0,-1),options:t.BooleanDrop},model:{value:t.InputVals[0],callback:function(o){t.$set(t.InputVals,0,o)},expression:"InputVals[0]"}})],1):29===t.ModifyConditionId?e("FormItem",{attrs:{label:t.ConditionsList[t.ModifyConditionId-1].ConditionName+"："}},[e("Select",{staticClass:"P-W-300",attrs:{placeholder:"请选择"+t.ConditionsList[t.ModifyConditionId-1].ConditionName,options:t.MethodDrop,optionValKey:"Id",optionKey:"Name"},model:{value:t.InputVals[0],callback:function(o){t.$set(t.InputVals,0,o)},expression:"InputVals[0]"}})],1):e("FormItem",{attrs:{label:t.ConditionsList[t.ModifyConditionId-1].ConditionName+"："}},[e("Select",{staticClass:"P-W-400",attrs:{placeholder:"请选择"+t.ConditionsList[t.ModifyConditionId-1].ConditionName,multiple:"",options:t.AttributeDrop},model:{value:t.ConditionVal,callback:function(o){t.ConditionVal=o},expression:"ConditionVal"}})],1)],1)],1):t._e()],1),e("footer",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"primary"},on:{click:t.PostModifyCondition}},[t._v("提交")]),e("Button",{on:{click:t.CancelConditionModal}},[t._v("取消")])],1)],1),e("EnableSku",{ref:"EnableSku",on:{"handle-res-msg":t.GetSelectedSku}})],1)],1)},i=[],a=(e("d9b9"),e("02cc"),e("2266"),e("0a9c"),e("76bb"),e("6ed5"),e("cee1"),e("e8f2"),e("6bf8"),e("b916"),e("d088"),e("e24e")),s=e("5c62"),l=e("3231"),d=e("064d"),r=e("46d7"),u=e("631e"),c=e("4a81"),C=e("d11d"),p=e("a349"),h=e("1f41"),f=function(t){Object(r["a"])(e,t);var o=Object(u["a"])(e);function e(){var t;return Object(l["a"])(this,e),t=o.apply(this,arguments),t.IsInit=!0,t.CustomRulesModal=!1,t.ModalTitle="添加规则",t.SelectedConditions=[],t.RuleInfo=new h["a"].CustomRulesList,t.ConditionModal=!1,t.ConditionModalTitle="",t.ModifyConditionId=0,t.ConditionVal=[],t.InputVals=[],t.ConditionModalFlags=new Array(33),t.AttributeDrop=[],t.PlatformDrop=t.$Utils.GetEnumArr(t.$Enums.Sales.Platform),t.DisputedDrop=t.$Utils.GetEnumArr(t.$Enums.Warehouse.DisputedType),t.BooleanDrop=t.$Utils.GetEnumArr(t.$Enums.Public.YesNo),t.RuleInfoRules={RuleName:[{required:!0,message:"请输入规则名称"}],SelectedValue:[{required:!0,message:"请选择".concat("Warehouse"===t.Type?"仓库":"虚拟渠道"),trigger:"change",type:"number"},{pattern:t.$Pattern.PositiveNotZeroInt,message:"请选择".concat("Warehouse"===t.Type?"仓库":"虚拟渠道")}]},t.Cols=[{title:"条件",width:200,render:function(t,o){return t("Tooltip",{props:{content:"".concat(o.row.ConditionName)},class:"P-LINE-1"},"".concat(o.row.ConditionName))}},{title:"详情",key:"ConditionValueText"},{title:"操作",width:80,render:function(o,e){return o("Button",{props:{size:"small",type:"primary"},on:{click:function(){t.TriggerConditionModal(e.row)}}},"编辑")}}],t.ConditionsCol=[{type:"selection",width:60,align:"center"},{title:"可选条件",render:function(t,o){return t("Tooltip",{props:{content:"".concat(o.row.ConditionName).concat(o.row.ClickString)},class:"P-LINE-1"},"".concat(o.row.ConditionName).concat(o.row.ClickString))}}],t}return Object(d["a"])(e,[{key:"EmitCustomRules",value:function(){}},{key:"GetAttributeDrop",value:function(){var t=this;this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.AttributeDropList},Data:!0,Callback:function(o){var e;o.IsSuccess?(e=t.AttributeDrop).push.apply(e,Object(s["a"])(o.Data.DropList)):t.$Request.Error(o)}})}},{key:"GetCountryDrop",value:function(){return this.COUNTRY_DROP.map((function(t){return{Key:"".concat(t.CountryNameCn,"(").concat(t.CountryCode,")"),Value:"".concat(t.CountryNameCn,"(").concat(t.CountryCode,")")}}))}},{key:"Trigger",value:function(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new h["a"].CustomRulesList;this.$set(this,"ModalTitle",o.Id?"编辑规则":"添加规则"),this.$set(this,"RuleInfo",o),this.RuleInfo.Id&&this.SetDefaultSelected(),this.COUNTRY_DROP.length||this["Base/UPDATE_BASE_INFO"]("COUNTRY",!0),this.$set(this,"IsInit",!1),this.$set(this,"CustomRulesModal",!0),this.$nextTick((function(){o.Id||t.$refs.RuleInfo.resetFields(),t.$refs.RuleNameIpt.focus()}))}},{key:"SetDefaultSelected",value:function(){var t,o=Object(a["a"])(this.RuleInfo.Conditions);try{for(o.s();!(t=o.n()).done;){var e=t.value;this.$refs.ConditionsList.toggleSelect(e.ConditionId-1),e.ConditionName="".concat(e.ConditionName).concat(this.ConditionsList[e.ConditionId-1].ClickString)}}catch(n){o.e(n)}finally{o.f()}this.$set(this,"SelectedConditions",this.RuleInfo.Conditions)}},{key:"SetSelectedConditions",value:function(t){if(!this.Init){var o,e=[],n=Object(a["a"])(t);try{for(n.s();!(o=n.n()).done;){var i,s=o.value,l=!0,d=Object(a["a"])(this.SelectedConditions);try{for(d.s();!(i=d.n()).done;){var r=i.value;s.ConditionId===r.ConditionId&&(l=!1,e.push(r))}}catch(u){d.e(u)}finally{d.f()}l&&e.push({RuleId:this.RuleInfo.Id,ConditionId:s.ConditionId,ConditionName:"".concat(s.ConditionName).concat(this.ConditionsList[s.ConditionId-1].ClickString),ConditionMatchType:s.ConditionMatchType,ConditionValue:"",ConditionValueText:""})}}catch(u){n.e(u)}finally{n.f()}this.$set(this,"SelectedConditions",e)}}},{key:"TriggerConditionModal",value:function(t){var o=this;this.$set(this,"ModifyConditionId",t.ConditionId),this.$set(this,"ConditionModalTitle",t.ConditionName),this.ConditionModalFlags[t.ConditionId]=!0,this.$set(this,"ConditionModal",!0),this.$nextTick((function(){o.GetConditionsSettings(t)}))}},{key:"AddTags",value:function(){var t=this;this.ConditionVal.some((function(o){return o===t.InputVals[0]}))?this.$UI.Tips.Floating("warning","输入项已存在"):this.ConditionVal.push(this.InputVals[0]),this.$set(this.InputVals,0,"")}},{key:"DelTags",value:function(t){this.ConditionVal.splice(t,1)}},{key:"TriggerSkuModal",value:function(){this.$refs.EnableSku.Trigger("",!1)}},{key:"GetSelectedSku",value:function(t){var o,e=this,n=Object(a["a"])(t);try{var i=function(){var t=o.value;e.ConditionVal.some((function(o){return o===t.SkuCode}))||e.ConditionVal.push(t.SkuCode)};for(n.s();!(o=n.n()).done;)i()}catch(s){n.e(s)}finally{n.f()}}},{key:"GetConditionsSettings",value:function(t){var o=this;switch(this.ModifyConditionId){case 1:this.$refs.PlatformStoreTree.Trigger(t.ConditionValue);break;case 2:var e=[];if(t.ConditionValue){var n=t.ConditionValue.split(","),i=t.ConditionValueText.split(",");n.map((function(t,o){e.push({Key:i[o],Value:n[o]})}))}setTimeout((function(){o.$refs.EbaySiteCondition.Trigger(e)}),300);break;case 3:this.ConditionVal=t.ConditionValueText.split(",");break;case 4:case 5:case 6:case 8:case 9:this.$set(this.InputVals,0,""),this.ConditionVal=t.ConditionValue.split(",").filter((function(t){return Boolean(t)})),this.$nextTick((function(){o.$refs.TagInput.focus()}));break;case 7:this.$set(this.InputVals,0,t.ConditionValue||0),this.$nextTick((function(){var t=o.$refs.NumInput.$el.getElementsByTagName("input")[0];t.focus(),t.select()}));break;case 11:this.$set(this.InputVals,0,0),t.ConditionValue?this.$set(this.InputVals,1,Number(t.ConditionValue.split(",")[3])):this.$set(this.InputVals,1,0);case 10:case 12:case 14:case 16:case 17:case 18:case 19:case 20:case 27:case 34:if(t.ConditionValue){var a=t.ConditionValue.split(",");this.$set(this.InputVals,0,Number(a[0])),this.$set(this.InputVals,1,Number(a[3])),this.ConditionVal.push(1,2)}else this.$set(this.InputVals,0,0),this.$set(this.InputVals,1,0);break;case 15:this.ConditionVal=t.ConditionValue.split(",").map((function(t){return Number(t)})),this.AttributeDrop.length||this.GetAttributeDrop();break;case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 31:case 32:this.$set(this.InputVals,0,""===t.ConditionValue?"":"true"===t.ConditionValue||t.ConditionValue?1:0);break;case 29:this.$set(this.InputVals,0,Number(t.ConditionValue));break;case 30:this.ConditionVal=t.ConditionValue.split(",").map((function(t){return Number(t)}));break;case 33:this.ConditionVal=t.ConditionValue.split(",").map((function(t){return Number(t)}));break}}},{key:"PostModifyCondition",value:function(){var t,o=this,e=Object(a["a"])(this.SelectedConditions);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.ConditionId===this.ModifyConditionId){var i=[],s=[];switch(this.ModifyConditionId){case 1:var l,d=this.$refs.PlatformStoreTree.GetSelected(),r=Object(a["a"])(d);try{for(r.s();!(l=r.n()).done;){var u=l.value;i.push("".concat(u.platform,"-").concat(u.value)),s.push(u.title)}}catch(F){r.e(F)}finally{r.f()}n.ConditionValue=i.join(","),n.ConditionValueText=s.join(",");break;case 2:var c,C=this.$refs.EbaySiteCondition.GetSelected(),p=Object(a["a"])(C);try{for(p.s();!(c=p.n()).done;){var h=c.value;i.push(h.Value),s.push(h.Key)}}catch(F){p.e(F)}finally{p.f()}n.ConditionValue=i.join(","),n.ConditionValueText=s.join(",");break;case 3:var f,I=Object(a["a"])(this.ConditionVal);try{for(I.s();!(f=I.n()).done;){var m=f.value;if(m){var V=m.split("(");i.push(V[0]),s.push(m)}}}catch(F){I.e(F)}finally{I.f()}n.ConditionValue=i.join(","),n.ConditionValueText=s.join(",");break;case 4:case 5:case 6:case 8:case 9:n.ConditionValue=n.ConditionValueText=this.ConditionVal.join(",");break;case 7:n.ConditionValue=n.ConditionValueText=this.InputVals[0];break;case 11:this.ConditionVal.push(2);case 10:case 12:case 14:case 16:case 17:case 18:case 19:case 20:case 27:case 34:if(this.ConditionVal.length){var b=-1e5,y=1e5;if(this.ConditionVal.findIndex((function(t){return 1===t}))>=0&&(b=this.InputVals[0]),this.ConditionVal.findIndex((function(t){return 2===t}))>=0&&(y=this.InputVals[1]),b>=y)return void this.$UI.Tips.Floating("warning","最小值不能大于或等于最大值");n.ConditionValue="".concat(b,",>,<,").concat(y),n.ConditionValueText="＞".concat(b,",＜").concat(y)}else n.ConditionValue=n.ConditionValueText="";break;case 13:n.ConditionValue=n.ConditionValueText=this.ConditionVal.join(",");break;case 15:n.ConditionValue=this.ConditionVal.join(",");var v,M=Object(a["a"])(this.AttributeDrop);try{var g=function(){var t=v.value;o.ConditionVal.some((function(o){return o===t.Value}))&&s.push(t.Key)};for(M.s();!(v=M.n()).done;)g()}catch(F){M.e(F)}finally{M.f()}n.ConditionValueText=s.join(",");break;case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 31:case 32:""===this.InputVals[0]||void 0===this.InputVals[0]?n.ConditionValue=n.ConditionValueText="":(n.ConditionValue=Boolean(this.InputVals[0]),n.ConditionValueText=this.$Enums.Public.YesNo[this.InputVals[0]]);break;case 29:this.InputVals[0]?(n.ConditionValue=this.InputVals[0],n.ConditionValueText=this.MethodDrop.filter((function(t){return t.Id===o.InputVals[0]}))[0].Name):(n.ConditionValue=0,n.ConditionValueText="");break;case 30:var k,T=Object(a["a"])(this.ConditionVal);try{for(T.s();!(k=T.n()).done;){var $=k.value;$&&(i.push($),s.push(this.$Enums.Warehouse.DisputedType[$]))}}catch(F){T.e(F)}finally{T.f()}n.ConditionValue=i.join(","),n.ConditionValueText=s.join(",");break;case 33:var S,R=Object(a["a"])(this.ConditionVal);try{for(R.s();!(S=R.n()).done;){var x=S.value;x&&(i.push(x),s.push(this.$Enums.Sales.Platform[x]))}}catch(F){R.e(F)}finally{R.f()}n.ConditionValue=i.join(","),n.ConditionValueText=s.join(",")}}}}catch(F){e.e(F)}finally{e.f()}this.CancelConditionModal()}},{key:"CancelConditionModal",value:function(){this.$set(this,"ConditionModal",!1),this.$set(this,"ConditionVal",[]),this.$set(this,"ConditionModalFlags",new Array(33))}},{key:"Validate",value:function(){var t=this;this.$refs.RuleInfo.validate((function(o){if(o){if(!t.SelectedConditions.length)return void t.$UI.Tips.Floating("warning","请选择该规则的条件");var e,n=Object(a["a"])(t.SelectedConditions);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(""===i.ConditionValue)return void t.$UI.Tips.Floating("warning","请补充条件【".concat(i.ConditionName,"】"))}}catch(s){n.e(s)}finally{n.f()}t.PostRules()}}))}},{key:"PostRules",value:function(){var t=this,o={Id:this.RuleInfo.Id,Priority:0,RuleName:this.RuleInfo.RuleName,SelectedValue:this.RuleInfo.SelectedValue,RuleType:"Warehouse"===this.Type?1:"Logistics"===this.Type?2:3,IsEnable:!0,CreateTime:"",Conditions:this.SelectedConditions};this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Settings,Api:{Address:0===this.RuleInfo.Id?this.$Api.MatchRuleCreate:this.$Api.MatchRuleModify,Login:!0},Data:o,Callback:function(o){t.$UI.Loading.Hide(),o.IsSuccess?(t.$UI.Tips.Floating("success",0===t.RuleInfo.Id?"添加成功":"修改成功"),t.CancelModal(),t.EmitCustomRules()):t.$Request.Error(o)}})}},{key:"CancelModal",value:function(){var t=this;this.$set(this,"CustomRulesModal",!1),this.$refs.ConditionsList.selectAll(!1),this.$nextTick((function(){t.$refs.RuleInfo.resetFields()})),this.$set(this,"IsInit",!0)}},{key:"COUNTRY_DROP",get:function(){return this["Base/COUNTRY_DROP"]}},{key:"ConditionsList",get:function(){return this.Conditions}}]),e}(C["d"]);c["a"]([Object(C["c"])(String)],f.prototype,"Type",void 0),c["a"]([Object(C["c"])(Array)],f.prototype,"Conditions",void 0),c["a"]([Object(C["c"])({type:Array,default:function(){return[]}})],f.prototype,"WarehouseDrop",void 0),c["a"]([Object(C["c"])({type:Array,default:function(){return[]}})],f.prototype,"MethodDrop",void 0),c["a"]([Object(C["b"])()],f.prototype,"EmitCustomRules",null),c["a"]([p["a"]],f.prototype,"Base/UPDATE_BASE_INFO",void 0),c["a"]([p["b"]],f.prototype,"Base/COUNTRY_DROP",void 0),f=c["a"]([Object(C["a"])({name:"ModifyCustomRules",components:{PlatformStoreTree:function(){return e.e("chunk-2d0f04b0").then(e.bind(null,"9c6f"))},EnableSku:function(){return e.e("chunk-2d0dd9de").then(e.bind(null,"81c2"))},EbaySiteCondition:function(){return e.e("chunk-2d0b2917").then(e.bind(null,"2553"))}}})],f);var I=f,m=I,V=(e("42b3"),e("4023")),b=Object(V["a"])(m,n,i,!1,null,"3f195fc8",null);o["default"]=b.exports}}]);