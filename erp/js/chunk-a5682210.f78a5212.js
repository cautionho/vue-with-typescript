(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a5682210"],{"1bdf":function(e){e.exports=JSON.parse('{"a":[{"Key":"澳大利亚邮政","Value":"auspost"},{"Key":"AAE","Value":"aae"},{"Key":"安信达","Value":"anxindakuaixi"},{"Key":"百世汇通","Value":"huitongkuaidi"},{"Key":"百福东方","Value":"baifudongfang"},{"Key":"BHT","Value":"bht"},{"Key":"包裹/平邮/挂号信","Value":"youzhengguonei"},{"Key":"邦送物流","Value":"bangsongwuliu"},{"Key":"希伊艾斯（CCES）","Value":"cces"},{"Key":"中国东方（COE）","Value":"coe"},{"Key":"传喜物流","Value":"chuanxiwuliu"},{"Key":"加拿大邮政Canada Post（英文结果）","Value":"canpost"},{"Key":"加拿大邮政Canada Post(德文结果）","Value":"canpostfr"},{"Key":"大田物流","Value":"datianwuliu"},{"Key":"德邦物流","Value":"debangwuliu"},{"Key":"DPEX","Value":"dpex"},{"Key":"DHL-中国件","Value":"dhl"},{"Key":"DHL-国际件","Value":"dhlen"},{"Key":"DHL-德国件","Value":"dhlde"},{"Key":"D速快递","Value":"dsukuaidi"},{"Key":"递四方","Value":"disifang"},{"Key":"EMS","Value":"ems"},{"Key":"E邮宝","Value":"ems"},{"Key":"EMS(英文)","Value":"emsen"},{"Key":"EMS-（中国-国际）中文结果","Value":"emsguoji"},{"Key":"EMS-（中国-国际）英文结果","Value":"emsinten"},{"Key":"Fedex-国际件-英文结果","Value":"fedex"},{"Key":"Fedex-国际件-中文结果","Value":"fedexcn"},{"Key":"Fedex-美国件-英文结果","Value":"fedexus"},{"Key":"飞康达物流","Value":"feikangda"},{"Key":"飞快达","Value":"feikuaida"},{"Key":"凡客如风达","Value":"rufengda"},{"Key":"风行天下","Value":"fengxingtianxia"},{"Key":"飞豹快递","Value":"feibaokuaidi"},{"Key":"港中能达","Value":"ganzhongnengda"},{"Key":"国通快递","Value":"guotongkuaidi"},{"Key":"广东邮政","Value":"guangdongyouzhengwuliu"},{"Key":"挂号信","Value":"youzhengguonei"},{"Key":"国内邮件","Value":"youzhengguonei"},{"Key":"国际邮件","Value":"youzhengguoji"},{"Key":"GLS","Value":"gls"},{"Key":"共速达","Value":"gongsuda"},{"Key":"汇强快递","Value":"huiqiangkuaidi"},{"Key":"华宇物流","Value":"tiandihuayu"},{"Key":"恒路物流","Value":"hengluwuliu"},{"Key":"华夏龙","Value":"huaxialongwuliu"},{"Key":"海航天天","Value":"tiantian"},{"Key":"海外环球","Value":"haiwaihuanqiu"},{"Key":"河北建华","Value":"hebeijianhua"},{"Key":"海盟速递","Value":"haimengsudi"},{"Key":"华企快运","Value":"huaqikuaiyun"},{"Key":"山东海红","Value":"haihongwangsong"},{"Key":"佳吉物流","Value":"jiajiwuliu"},{"Key":"佳怡物流","Value":"jiayiwuliu"},{"Key":"加运美","Value":"jiayunmeiwuliu"},{"Key":"京广速递","Value":"jinguangsudikuaijian"},{"Key":"急先达","Value":"jixianda"},{"Key":"晋越快递","Value":"jinyuekuaidi"},{"Key":"捷特快递","Value":"jietekuaidi"},{"Key":"金大物流","Value":"jindawuliu"},{"Key":"嘉里大通","Value":"jialidatong"},{"Key":"快捷速递","Value":"kuaijiesudi"},{"Key":"康力物流","Value":"kangliwuliu"},{"Key":"跨越物流","Value":"kuayue"},{"Key":"联昊通","Value":"lianhaowuliu"},{"Key":"龙邦物流","Value":"longbanwuliu"},{"Key":"蓝镖快递","Value":"lanbiaokuaidi"},{"Key":"乐捷递","Value":"lejiedi"},{"Key":"联邦快递（Fedex-中国-中文结果）","Value":"lianbangkuaidi"},{"Key":"联邦快递(Fedex-中国-英文结果）","Value":"lianbangkuaidien"},{"Key":"立即送","Value":"lijisong"},{"Key":"隆浪快递","Value":"longlangkuaidi"},{"Key":"门对门","Value":"menduimen"},{"Key":"美国快递","Value":"meiguokuaidi"},{"Key":"明亮物流","Value":"mingliangwuliu"},{"Key":"OCS","Value":"ocs"},{"Key":"onTrac","Value":"ontrac"},{"Key":"全晨快递","Value":"quanchenkuaidi"},{"Key":"全际通","Value":"quanjitong"},{"Key":"全日通","Value":"quanritongkuaidi"},{"Key":"全一快递","Value":"quanyikuaidi"},{"Key":"全峰快递","Value":"quanfengkuaidi"},{"Key":"七天连锁","Value":"sevendays"},{"Key":"如风达快递","Value":"rufengda"},{"Key":"申通","Value":"shentong"},{"Key":"顺丰","Value":"shunfeng"},{"Key":"三态速递","Value":"santaisudi"},{"Key":"盛辉物流","Value":"shenghuiwuliu"},{"Key":"速尔物流","Value":"suer"},{"Key":"盛丰物流","Value":"shengfengwuliu"},{"Key":"上大物流","Value":"shangda"},{"Key":"三态速递","Value":"santaisudi"},{"Key":"山东海红","Value":"haihongwangsong"},{"Key":"赛澳递","Value":"saiaodi"},{"Key":"山西红马甲","Value":"sxhongmajia"},{"Key":"圣安物流","Value":"shenganwuliu"},{"Key":"穗佳物流","Value":"suijiawuliu"},{"Key":"天地华宇","Value":"tiandihuayu"},{"Key":"天天快递","Value":"tiantian"},{"Key":"TNT","Value":"tnt"},{"Key":"通和天下","Value":"tonghetianxia"},{"Key":"UPS","Value":"UPS"},{"Key":"优速物流","Value":"youshuwuliu"},{"Key":"USPS","Value":"USPS"},{"Key":"万家物流","Value":"wanjiawuliu"},{"Key":"万象物流","Value":"wanxiangwuliu"},{"Key":"微特派","Value":"weitepai"},{"Key":"新邦物流","Value":"xinbangwuliu"},{"Key":"信丰物流","Value":"xinfengwuliu"},{"Key":"新邦物流","Value":"xinbangwuliu"},{"Key":"新蛋奥硕物流","Value":"neweggozzo"},{"Key":"香港邮政","Value":"hkpost"},{"Key":"圆通速递","Value":"yuantong"},{"Key":"韵达快运","Value":"yunda"},{"Key":"运通快递","Value":"yuntongkuaidi"},{"Key":"邮政小包（国内）","Value":"youzhengguonei"},{"Key":"邮政小包（国际）","Value":"youzhengguoji"},{"Key":"远成物流","Value":"yuanchengwuliu"},{"Key":"亚风速递","Value":"yafengsudi"},{"Key":"一邦速递","Value":"yibangwuliu"},{"Key":"优速物流","Value":"youshuwuliu"},{"Key":"源伟丰快递","Value":"yuanweifeng"},{"Key":"元智捷诚","Value":"yuanzhijiecheng"},{"Key":"越丰物流","Value":"yuefengwuliu"},{"Key":"源安达","Value":"yuananda"},{"Key":"原飞航","Value":"yuanfeihangwuliu"},{"Key":"忠信达快递","Value":"zhongxinda"},{"Key":"芝麻开门","Value":"zhimakaimen"},{"Key":"银捷速递","Value":"yinjiesudi"},{"Key":"一统飞鸿","Value":"yitongfeihong"},{"Key":"中通速递","Value":"zhongtong"},{"Key":"宅急送","Value":"zhaijisong"},{"Key":"中邮物流","Value":"zhongyouwuliu"},{"Key":"忠信达","Value":"zhongxinda"},{"Key":"中速快件","Value":"zhongsukuaidi"},{"Key":"郑州建华","Value":"zhengzhoujianhua"},{"Key":"中天万运","Value":"zhongtianwanyun"},{"Key":"壹米滴答","Value":"yimidida"},{"Key":"安能物流","Value":"annengwuliu"},{"Key":"速腾速运","Value":"sutengsuyun"},{"Key":"平安达快递","Value":"pingandakuaidi"},{"Key":"京广快递","Value":"jingguangkuaidi"},{"Key":"其他","Value":"qita"}]}')},d7c4:function(e,a,u){"use strict";u.r(a);var i=function(){var e=this,a=e.$createElement,u=e._self._c||a;return u("Row",[u("Modal",{attrs:{title:"添加发货","mask-closable":!1,width:1200},on:{"on-cancel":function(a){return e.EmitPurchase(!1)}},model:{value:e.OpenAddShipedModal,callback:function(a){e.OpenAddShipedModal=a},expression:"OpenAddShipedModal"}},[u("Form",{ref:"AddShipForm",attrs:{"label-width":100,model:e.AddShipForm,rules:e.AddShipFormRules,inline:""}},[u("FormItem",{staticClass:"P-W-400",attrs:{label:"快递单号：",prop:"ExpressCode"}},[u("Input",{attrs:{placeholder:"请输入快递单号"},model:{value:e.AddShipForm.ExpressCode,callback:function(a){e.$set(e.AddShipForm,"ExpressCode",a)},expression:"AddShipForm.ExpressCode"}})],1),u("FormItem",{staticClass:"P-W-400",attrs:{label:"物流公司：",prop:"ExpressCompany"}},[u("Select",{attrs:{placeholder:"请选择物流公司",options:e.ExpressCompanyList,optionValKey:"Key",optionKey:"Key"},model:{value:e.AddShipForm.ExpressCompany,callback:function(a){e.$set(e.AddShipForm,"ExpressCompany",a)},expression:"AddShipForm.ExpressCompany"}})],1)],1),e.OpenAddShipedModal?u("Table",{staticClass:"P-MT-10",attrs:{size:"small","highlight-row":!0,columns:e.ItemCol,data:e.ItemData,border:"",stripe:"",height:"500"}}):e._e(),u("footer",{attrs:{slot:"footer"},slot:"footer"},[u("Button",{attrs:{type:"primary"},on:{click:e.Valide}},[e._v("提交")]),u("Button",{on:{click:function(a){return e.EmitPurchase(!1)}}},[e._v("取消")])],1)],1)],1)},t=[],n=(u("9660"),u("0b78"),u("3231")),l=u("064d"),s=u("46d7"),d=u("631e"),r=u("4a81"),o=u("d11d"),y=u("c638"),h=u("1bdf"),K=function(e){Object(s["a"])(u,e);var a=Object(d["a"])(u);function u(){var e;return Object(n["a"])(this,u),e=a.apply(this,arguments),e.SelectedData=[],e.DropWarehouseList=[],e.AddShipedModal=!1,e.OpenAddShipedModal=!1,e.AddShipForm=new y["a"].AddShipPonData,e.AddShipItem=[],e.ExpressCompanyList=[],e.RemarkArr=[],e.ItemData=[],e.AddShipFormRules={ExpressCode:[{required:!0,message:"请输入快递单号"}],ExpressCompany:[{required:!0,message:"请选择物流公司",trigger:"change",type:"string"}]},e.ItemCol=[{title:"sku编号",key:"",render:function(e,a){return e("span",a.row.Item.SkuCode)}},{title:"产品名称",key:"",render:function(e,a){return e("span",a.row.Item.SkuName)}},{title:"采购数量",key:"",render:function(e,a){return e("span",a.row.Item.PurchaseQuantity)}},{title:"发货数量",key:"",render:function(a,u){return a("InputNumber",{props:{min:0,value:u.row.Item.Delivery},on:{"on-change":function(a){e.GetArrivalQuantity(a,u.index)}}})}},{title:"备注",key:"PurchaserName",render:function(a,u){return a("Input",{props:{placeholder:"请输入备注",value:""},on:{"on-change":function(a){e.ParseRemark(a,u.index)}}})}}],e}return Object(l["a"])(u,[{key:"EmitPurchase",value:function(e){this.OpenAddShipedModal=!1,this.$refs["AddShipForm"].resetFields(),this.$set(this,"AddShipForm",new y["a"].AddShipPonData)}},{key:"TriggerModal",value:function(e,a){this.SelectedData=e,this.DropWarehouseList=a,this.GetPurchaseOrderGetItem(),0===this.ExpressCompanyList.length&&this.$set(this,"ExpressCompanyList",h["a"]),this.OpenAddShipedModal=!0}},{key:"GetPurchaseOrderGetItem",value:function(){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.PurchaseOrderGetItem,Login:!0},Data:this.SelectedData[0].Id,Callback:function(a){a.IsSuccess?(e.RemarkArr=[],e.ItemData=a.Data.Data,e.ItemData.forEach((function(a){e.RemarkArr.push(""),e.$set(a.Item,"Delivery",a.Item.PurchaseQuantity-a.Item.ArrivalQuantity<0?0:a.Item.PurchaseQuantity-a.Item.ArrivalQuantity)}))):e.$Request.Error(a),e.$UI.Loading.Hide()}})}},{key:"ParseRemark",value:function(e,a){this.RemarkArr[a]=e}},{key:"GetArrivalQuantity",value:function(e,a){this.ItemData[a].Item.Delivery=e}},{key:"Valide",value:function(){var e=this;this.$refs["AddShipForm"].validate((function(a){a&&e.ValideAddShip()}))}},{key:"ValideAddShip",value:function(){this.AddShipForm["Id"]=this.SelectedData[0].Id,this.AddShipItem=[];for(var e=!0,a=!0,u=0;u<this.ItemData.length;u++){var i=this.ItemData[u].Item.PurchaseQuantity-this.ItemData[u].Item.ArrivalQuantity<0?0:this.ItemData[u].Item.PurchaseQuantity-this.ItemData[u].Item.ArrivalQuantity;if(this.ItemData[u].Item.Delivery>i)return this.$UI.Tips.Floating("warning","[".concat(this.ItemData[u].Item.SkuCode,"]发货数量不能大于待发货数量")),e=!1,e;this.ItemData[u].Item.Delivery>0&&(a=!1);var t=new y["a"].AddShipPonItem;t["Id"]=this.ItemData[u].Item.Id,t["ArrivalQuantity"]=this.ItemData[u].Item.Delivery,t["Remark"]=this.RemarkArr[u],this.AddShipItem.push(t)}a&&e?this.$UI.Tips.Floating("warning","必须有一项SKU发货数量不为0"):(this.AddShipForm["Item"]=this.AddShipItem,e&&this.PostAddShip())}},{key:"PostAddShip",value:function(){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.PurchaseCreateArrivalOrder,Login:!0},Data:this.AddShipForm,Callback:function(a){a.IsSuccess?(e.$UI.Tips.Floating("success","添加发货成功"),e.EmitPurchase(!0)):(e.$Request.Error(a),e.$UI.Loading.Hide())}})}}]),u}(o["d"]);r["a"]([Object(o["b"])()],K.prototype,"EmitPurchase",null),K=r["a"]([Object(o["a"])({name:"PonAddShiped"})],K);var V=K,g=V,p=u("4023"),m=Object(p["a"])(g,i,t,!1,null,null,null);a["default"]=m.exports}}]);