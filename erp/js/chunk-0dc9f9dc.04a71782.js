(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0dc9f9dc"],{7196:function(e,t,r){"use strict";var a=r("9f2a"),o=r.n(a);o.a},"9f2a":function(e,t,r){},faef:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Col",{staticClass:"P-Inline-Block"},[r("Button",{staticClass:"P-MB-10",attrs:{type:"primary"},on:{click:function(t){return e.OpenModal()}}},[e._v("添加捆绑SKU")]),r("Modal",{staticClass:"Container-Tabs",attrs:{title:"SKU详情","mask-closable":!1,width:"1000"},on:{"on-cancel":function(t){return e.ClearModal(0)}},model:{value:e.ShowModal,callback:function(t){e.ShowModal=t},expression:"ShowModal"}},[r("Form",{ref:"OperateForm",attrs:{inline:"","label-width":120,model:e.OperateForm,rules:e.OperateFormRules,onsubmit:"return false;",name:"OperateForm"}},[r("Tabs",{attrs:{name:"SkuDetail",type:"card",closable:!1,value:e.ActiveTab},on:{"on-click":e.ChangeTabs}},[r("TabPane",{attrs:{label:"基本信息",name:"Base",tab:"SkuDetail"}},[r("Col",{staticClass:"P-MR-20",attrs:{span:"17"}},[r("Form-item",{staticClass:"P-W-100-Percent",attrs:{label:"产品名：",prop:"SkuInformation.SkuName"}},[r("Input",{attrs:{placeholder:"产品名"},model:{value:e.OperateForm.SkuInformation.SkuName,callback:function(t){e.$set(e.OperateForm.SkuInformation,"SkuName",t)},expression:"OperateForm.SkuInformation.SkuName"}})],1),r("Form-item",{staticClass:"P-W-100-Percent",attrs:{label:"英文名：",prop:"SkuInformation.SkuNameEn"}},[r("Input",{attrs:{placeholder:"英文名"},model:{value:e.OperateForm.SkuInformation.SkuNameEn,callback:function(t){e.$set(e.OperateForm.SkuInformation,"SkuNameEn",t)},expression:"OperateForm.SkuInformation.SkuNameEn"}})],1),r("Form-item",{staticClass:"P-W-100-Percent",attrs:{label:"SKU编号：",prop:"SkuInformation.SkuCode"}},[r("Input",{attrs:{placeholder:"SKU编号"},model:{value:e.OperateForm.SkuInformation.SkuCode,callback:function(t){e.$set(e.OperateForm.SkuInformation,"SkuCode",t)},expression:"OperateForm.SkuInformation.SkuCode"}})],1),r("Form-item",{staticClass:"P-W-100-Percent",attrs:{label:"特性标签：",prop:"SkuAttribute"}},[r("Select",{attrs:{placeholder:"特性标签",multiple:"",options:e.DropAttribute,onChange:e.ChangeSkuAttribute,transfer:""},model:{value:e.OperateForm.SkuAttribute,callback:function(t){e.$set(e.OperateForm,"SkuAttribute",t)},expression:"OperateForm.SkuAttribute"}})],1),r("Form-item",{staticClass:"P-W-100-Percent",attrs:{label:"销售关键字：",prop:"SkuInformation.SaleKeyWords"}},[r("Input",{attrs:{placeholder:"SKU编号"},model:{value:e.OperateForm.SkuInformation.SaleKeyWords,callback:function(t){e.$set(e.OperateForm.SkuInformation,"SaleKeyWords",t)},expression:"OperateForm.SkuInformation.SaleKeyWords"}})],1)],1),r("Col",{attrs:{span:"6"}},[""!==e.OperateForm.SkuInformation.DefaultImage?r("div",{staticClass:"demo-upload-list Detail-Picture"},[r("img",{attrs:{src:e.$Server.File+"/"+e.OperateForm.SkuInformation.DefaultImage,height:"200",width:"200"}}),r("div",{staticClass:"demo-upload-list-cover"},[r("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(t){return e.ShowPic(e.OperateForm.SkuInformation.DefaultImage)}}}),r("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){return e.HandleRemove(void 0)}}})],1)]):r("Upload",{ref:"Upload",staticStyle:{display:"inline-block",width:"100%",height:"200px"},attrs:{"show-upload-list":!1,"on-success":e.HandleSuccessSku,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.HandleFormatError,"on-exceeded-size":e.HandleMaxSize,type:"drag",action:e.UploadImgServer}},[r("div",{staticStyle:{height:"200px"}},[r("Icon",{staticStyle:{"margin-top":"55px"},attrs:{type:"camera",size:"20"}}),r("p",[e._v("上传图片")]),r("span",{staticStyle:{"padding-bottom":"12px"}},[e._v("仅支持jpg、png图片格式，大小不超过2M")])],1)])],1),r("Col",{attrs:{span:"24"}},[r("Form-item",{staticClass:"P-W-49-Percent",attrs:{label:"品类：",prop:"SkuInformation.CategoryId"}},[r("Cascader",{attrs:{placeholder:"品类",transfer:"",data:e.Tree,"change-on-select":"",filterable:""},on:{"on-change":e.SetCategory},model:{value:e.OperateForm.SkuInformation.CategoryId,callback:function(t){e.$set(e.OperateForm.SkuInformation,"CategoryId",t)},expression:"OperateForm.SkuInformation.CategoryId"}})],1),r("Form-item",{staticClass:"P-W-49-Percent",attrs:{label:"品牌：",prop:"SkuInformation.BrandId"}},[r("Select",{attrs:{placeholder:"品牌",options:e.DropBrand,transfer:""},model:{value:e.OperateForm.SkuInformation.BrandId,callback:function(t){e.$set(e.OperateForm.SkuInformation,"BrandId",t)},expression:"OperateForm.SkuInformation.BrandId"}})],1),r("Form-item",{staticClass:"P-W-49-Percent",attrs:{label:"平台：",prop:"SkuInformation.Platform"}},[r("Select",{attrs:{placeholder:"平台",options:e.DropPlatform,transfer:""},model:{value:e.OperateForm.SkuInformation.Platform,callback:function(t){e.$set(e.OperateForm.SkuInformation,"Platform",t)},expression:"OperateForm.SkuInformation.Platform"}})],1),r("Form-item",{staticClass:"P-W-49-Percent",attrs:{label:"状态：",prop:"SkuInformation.Status"}},[r("Select",{attrs:{placeholder:"平台",options:e.DropStatus,transfer:""},model:{value:e.OperateForm.SkuInformation.Status,callback:function(t){e.$set(e.OperateForm.SkuInformation,"Status",t)},expression:"OperateForm.SkuInformation.Status"}})],1),r("Form-item",{staticClass:"P-W-49-Percent",attrs:{label:"产品经理：",prop:"SkuInformation.Platform"}},[r("Select",{attrs:{placeholder:"产品经理",options:e.DropSaleManager,transfer:""},model:{value:e.OperateForm.SkuInformation.DevManager,callback:function(t){e.$set(e.OperateForm.SkuInformation,"DevManager",t)},expression:"OperateForm.SkuInformation.DevManager"}})],1),r("Form-item",{staticClass:"P-W-49-Percent",attrs:{label:"采购员：",prop:"SkuInformation.Purchaser"}},[r("Select",{attrs:{placeholder:"采购员",options:e.DropPurchaser,transfer:""},model:{value:e.OperateForm.SkuInformation.Purchaser,callback:function(t){e.$set(e.OperateForm.SkuInformation,"Purchaser",t)},expression:"OperateForm.SkuInformation.Purchaser"}})],1),0!==e.OperateForm.SkuInformation.Id?r("Form-item",{staticClass:"P-W-49-Percent",attrs:{label:"开发员：",prop:"SkuInformation.DevUserId"}},[e._v(" "+e._s(e.OperateForm.SkuInformation.DevUserName)+" ")]):e._e(),r("Form-item",{staticClass:"P-W-49-Percent",attrs:{label:"销售主管：",prop:"SkuInformation.SaleManager"}},[r("Select",{attrs:{placeholder:"销售主管",options:e.DropSaleManager,transfer:""},model:{value:e.OperateForm.SkuInformation.SaleManager,callback:function(t){e.$set(e.OperateForm.SkuInformation,"SaleManager",t)},expression:"OperateForm.SkuInformation.SaleManager"}})],1),r("Form-item",{staticClass:"P-W-49-Percent",attrs:{label:"创建时间：",prop:"SkuInformation.CreateTime"}},[e._v(" "+e._s(0!==e.OperateForm.SkuInformation.Id?e.OperateForm.SkuInformation.CreateTime.split("T")[0]:(new Date).getFullYear()+"-"+((new Date).getMonth()+1>10?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1))+"-"+((new Date).getDate()>10?(new Date).getDate():"0"+(new Date).getDate()))+" ")]),r("Form-item",{staticClass:"P-W-100-Percent",attrs:{label:"备注：",prop:"SkuInformation.Remark"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:"备注"},model:{value:e.OperateForm.SkuInformation.Remark,callback:function(t){e.$set(e.OperateForm.SkuInformation,"Remark",t)},expression:"OperateForm.SkuInformation.Remark"}})],1)],1)],1),r("TabPane",{attrs:{label:"产品描述",name:"Description",tab:"SkuDetail"}},[r("Row",[r("Col",{attrs:{span:"24"}},[r("Jodit",{ref:"EditorDescription",attrs:{DomHeight:600}})],1)],1)],1),r("TabPane",{attrs:{label:"上架图片",name:"Images",tab:"SkuDetail"}},[r("Row",[r("Col",{staticClass:"Max-Height",attrs:{span:"24"}},[e._l(e.OperateForm.SkuImages,(function(t){return r("div",{staticClass:"demo-upload-list Detail-Picture P-MR-5"},[r("img",{attrs:{src:e.$Server.File+"/"+t.ImageUrl,height:"200",width:"200"}}),r("div",{staticClass:"demo-upload-list-cover"},[r("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(r){return e.ShowPic(t.ImageUrl)}}}),r("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(r){return e.HandleRemove(t.ImageUrl)}}})],1)])})),r("Upload",{ref:"Upload",staticStyle:{display:"inline-block",width:"200px"},attrs:{"show-upload-list":!1,"on-success":e.HandleSuccessImages,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.HandleFormatError,"on-exceeded-size":e.HandleMaxSize,type:"drag",action:e.UploadImgServer}},[r("div",{staticStyle:{height:"200px",width:"200px"}},[r("Icon",{staticStyle:{"margin-top":"55px"},attrs:{type:"camera",size:"20"}}),r("p",[e._v("上传图片")]),r("span",{staticStyle:{"padding-bottom":"12px"}},[e._v("仅支持jpg、png图片格式，大小不超过2M")])],1)])],2)],1)],1),r("Tab-pane",{attrs:{label:"参考尺寸表",name:"Sizes",tab:"SkuDetail"}},[r("Row",[r("Col",{attrs:{span:"24"}},[r("Jodit",{ref:"EditorSizes",attrs:{DomHeight:600}})],1)],1)],1),r("Tab-pane",{attrs:{label:"体积/重量",name:"VolumeWeight",tab:"SkuDetail"}},[r("Row",[r("Col",{attrs:{span:"24"}},[r("Form-item",{staticClass:"P-W-30-Percent",attrs:{label:"长（cm）：",prop:"SkuInformation.Length"}},[r("Input",{attrs:{placeholder:"长"},model:{value:e.OperateForm.SkuInformation.Length,callback:function(t){e.$set(e.OperateForm.SkuInformation,"Length",e._n(t))},expression:"OperateForm.SkuInformation.Length"}})],1),r("Form-item",{staticClass:"P-W-30-Percent",attrs:{label:"宽（cm）：",prop:"SkuInformation.Width"}},[r("Input",{attrs:{placeholder:"宽"},model:{value:e.OperateForm.SkuInformation.Width,callback:function(t){e.$set(e.OperateForm.SkuInformation,"Width",e._n(t))},expression:"OperateForm.SkuInformation.Width"}})],1),r("Form-item",{staticClass:"P-W-30-Percent",attrs:{label:"高（cm）：",prop:"SkuInformation.Height"}},[r("Input",{attrs:{placeholder:"高"},model:{value:e.OperateForm.SkuInformation.Height,callback:function(t){e.$set(e.OperateForm.SkuInformation,"Height",e._n(t))},expression:"OperateForm.SkuInformation.Height"}})],1)],1),r("Col",{attrs:{span:"24"}},[r("Form-item",{staticClass:"P-W-30-Percent",attrs:{label:"毛重（g）：",prop:"SkuInformation.GrossWeight"}},[r("Input",{attrs:{placeholder:"毛重"},model:{value:e.OperateForm.SkuInformation.GrossWeight,callback:function(t){e.$set(e.OperateForm.SkuInformation,"GrossWeight",e._n(t))},expression:"OperateForm.SkuInformation.GrossWeight"}})],1),r("Form-item",{staticClass:"P-W-30-Percent",attrs:{label:"净重（g）：",prop:"SkuInformation.NetWeight"}},[r("Input",{attrs:{placeholder:"净重"},model:{value:e.OperateForm.SkuInformation.NetWeight,callback:function(t){e.$set(e.OperateForm.SkuInformation,"NetWeight",e._n(t))},expression:"OperateForm.SkuInformation.NetWeight"}})],1),r("Form-item",{staticClass:"P-W-30-Percent",attrs:{label:"整箱数：",prop:"SkuInformation.Pcs"}},[r("Input",{attrs:{placeholder:"整箱数"},model:{value:e.OperateForm.SkuInformation.Pcs,callback:function(t){e.$set(e.OperateForm.SkuInformation,"Pcs",e._n(t))},expression:"OperateForm.SkuInformation.Pcs"}})],1)],1)],1),r("Row",[r("Col",{attrs:{span:"24"}},[r("Form-item",{staticClass:"P-W-90-Percent",attrs:{label:"备注：",prop:"SkuInformation.WeightRemark"}},[r("Input",{attrs:{type:"textarea",rows:10,placeholder:"备注"},model:{value:e.OperateForm.SkuInformation.WeightRemark,callback:function(t){e.$set(e.OperateForm.SkuInformation,"WeightRemark",t)},expression:"OperateForm.SkuInformation.WeightRemark"}})],1)],1)],1)],1),r("Tab-pane",{attrs:{label:"申报信息",name:"Declare",tab:"SkuDetail"}},[r("Form-item",{staticClass:"P-W-100-Percent",attrs:{label:"海关编码：",prop:"SkuDeclare.DeclareCode"}},[r("Input",{attrs:{placeholder:"海关编码"},model:{value:e.OperateForm.SkuDeclare.DeclareCode,callback:function(t){e.$set(e.OperateForm.SkuDeclare,"DeclareCode",t)},expression:"OperateForm.SkuDeclare.DeclareCode"}})],1),r("Form-item",{staticClass:"P-W-100-Percent",attrs:{label:"申报价格：",prop:"SkuDeclare.DeclareAmout"}},[r("Input",{staticClass:"P-W-90-Percent",attrs:{placeholder:"申报价格"},model:{value:e.OperateForm.SkuDeclare.DeclareAmout,callback:function(t){e.$set(e.OperateForm.SkuDeclare,"DeclareAmout",t)},expression:"OperateForm.SkuDeclare.DeclareAmout"}}),e._v(" USD ")],1),r("Form-item",{staticClass:"P-W-100-Percent",attrs:{label:"申报中文名称：",prop:"SkuDeclare.DeclareNameCN"}},[r("Input",{attrs:{placeholder:"申报中文名称"},model:{value:e.OperateForm.SkuDeclare.DeclareNameCN,callback:function(t){e.$set(e.OperateForm.SkuDeclare,"DeclareNameCN",t)},expression:"OperateForm.SkuDeclare.DeclareNameCN"}})],1),r("Form-item",{staticClass:"P-W-100-Percent",attrs:{label:"申报英文名称：",prop:"SkuDeclare.DeclareName"}},[r("Input",{attrs:{placeholder:"申报英文名称"},model:{value:e.OperateForm.SkuDeclare.DeclareName,callback:function(t){e.$set(e.OperateForm.SkuDeclare,"DeclareName",t)},expression:"OperateForm.SkuDeclare.DeclareName"}})],1)],1),r("TabPane",{attrs:{label:0!==e.OperateForm.SkuInformation.Id&&e.OperateForm.SkuInformation.HasProperty?"应用变体":"捆绑SKU",name:"SkuBind",tab:"SkuDetail"}},[0!==e.OperateForm.SkuInformation.Id&&e.OperateForm.SkuInformation.HasProperty?r("Row",{staticClass:"Max-Height"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.OperateForm.SkuInformation.HasProperty,expression:"OperateForm.SkuInformation.HasProperty"}],staticClass:"Line-Check"},[r("Checkbox",{attrs:{indeterminate:e.Indeterminate,value:e.CheckAll},nativeOn:{click:function(t){return t.preventDefault(),e.HandleCheckAll(t)}}},[e._v("全选")])],1),r("Checkbox-group",{on:{"on-change":e.CheckAllGroupChange},model:{value:e.CheckAllGroup,callback:function(t){e.CheckAllGroup=t},expression:"CheckAllGroup"}},e._l(e.SkuProperty,(function(t,a){return r("Checkbox",{key:t.SkuName,staticClass:"P-W-30-Percent",attrs:{label:t.Id}},[e._v(e._s(t.SkuName))])})),1),r("p",{directives:[{name:"show",rawName:"v-show",value:!e.OperateForm.SkuInformation.HasProperty,expression:"!OperateForm.SkuInformation.HasProperty"}]},[e._v("暂无变体")])],1):r("Row",[r("Table",{attrs:{columns:e.Col,data:e.OperateForm.SkuBind,size:"small",stripe:"",height:550}})],1),0!==e.OperateForm.SkuInformation.Id&&e.OperateForm.SkuInformation.HasProperty?e._e():r("Row",{staticClass:"P-MT-10",attrs:{type:"flex",justify:"end"}},[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.TriggerAddBind()}}},[e._v("添加SKU")])],1)],1)],1)],1),r("ShowBigPic",{ref:"ShowBigPic"}),r("EnableSku",{ref:"EnableSku",on:{"handle-res-msg":e.HandleSkuRes}}),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.SubModal()}}},[e._v("提交")]),r("Button",{on:{click:function(t){return e.ClearModal(0)}}},[e._v("返回")])],1)],1)],1)},o=[],n=(r("d9b9"),r("76bb"),r("cee1"),r("1ff3"),r("e8f2"),r("6bf8"),r("eb83"),r("e24e")),i=r("5c62"),s=r("3231"),u=r("064d"),l=r("46d7"),m=r("631e"),c=r("4a81"),p=r("d11d"),S=r("eb49"),k=function(e){Object(l["a"])(r,e);var t=Object(m["a"])(r);function r(){var e;return Object(s["a"])(this,r),e=t.apply(this,arguments),e.ShowModal=!1,e.ActiveTab="Base",e.UploadImgServer=e.$Server.Settings+e.$Api.UploadImage,e.SkuProperty=[],e.Indeterminate=!0,e.CheckAll=!1,e.CheckAllGroup=[],e.EditAttribute=[],e.DropPlatform=e.$Utils.GetEnumArr(e.$Enums.Sales.Platform),e.DropStatus=e.$Utils.GetEnumArr(e.$Enums.Warehouse.SkuStatus),e.OperateForm=new S["a"].SkuDetails,e.OperateFormRules={"SkuInformation.SkuCode":[{required:!0,message:"请输入SKU编号",trigger:"blur"}],"SkuInformation.SkuName":[{required:!0,message:"请输入SKU名称",trigger:"blur"}],"SkuInformation.CategoryId":[{type:"array",required:!0,message:"请选择所属品类",trigger:"change"}],"SkuInformation.Platform":[{type:"number",required:!0,message:"请选择平台",trigger:"change"}],"SkuInformation.DevManager":[{type:"number",required:!0,message:"请选择开发主管",trigger:"change"}],"SkuInformation.DevUserId":[{type:"number",required:!0,message:"请选择开发员",trigger:"blur"}],"SkuInformation.SaleManager":[{type:"number",required:!0,message:"请选择销售主管",trigger:"change"}],"SkuInformation.Purchaser":[{type:"number",required:!0,message:"请选择采购员",trigger:"change"}],"SkuInformation.Length":[{type:"number",required:!0,message:"请输入长度",trigger:"blur"}],"SkuInformation.Width":[{type:"number",required:!0,message:"请输入宽度",trigger:"blur"}],"SkuInformation.Height":[{type:"number",required:!0,message:"请输入高度",trigger:"blur"}],"SkuInformation.GrossWeight":[{type:"number",required:!0,message:"请输入毛重",trigger:"blur"}],"SkuInformation.NetWeight":[{type:"number",required:!0,message:"请输入净重",trigger:"blur"}],"SkuDeclare.DeclareAmout":[{type:"number",required:!0,message:"请输入申报价值",trigger:"blur"}],"SkuDeclare.DeclareNameCN":[{required:!0,message:"请输入申报中文名称",trigger:"blur"}],"SkuDeclare.DeclareName":[{required:!0,message:"请输入申报英文名称",trigger:"blur"}],SkuAttribute:[{type:"array",required:!0,message:"请选择特性标签",trigger:"change"}],"SkuInformation.Status":[{required:!0,message:"请选择状态",trigger:"change",type:"number"}]},e.Col=[{title:"图片",key:"DefaultImage",width:80,align:"center",render:function(t,r){return t("div",{style:{width:"45px",height:"45px",background:"url("+e.$Server.File+"/"+r.row.DefaultImage+") no-repeat",backgroundSize:"cover",margin:"0 auto",cursor:"pointer"},on:{click:function(){e.ShowPic(r.row.DefaultImage)}}})}},{title:"SKU编号",key:"SkuCode",width:150},{title:"名称",key:"SkuName",render:function(e,t){return e("Tooltip",{props:{content:t.row.SkuName,maxWidth:200},class:"P-W-100-Percent"},[e("p",t.row.SkuName)])}},{title:"数量",key:"Quantity",width:120,render:function(t,r){return t("InputNumber",{props:{min:0,value:r.row.Quantity},on:{input:function(t){e.OperateForm.SkuBind[r.row._index].Quantity=t}}})}},{title:"操作",width:80,render:function(t,r){return t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.OperateForm.SkuBind.splice(r.row._index,1)}}},"删除")}}],e}return Object(u["a"])(r,[{key:"HandleResMsg",value:function(e){}},{key:"Trigger",value:function(e){e.length>0&&this.GetSkuDetails(e[0].Id)}},{key:"OpenModal",value:function(){this.ShowModal=!0}},{key:"ChangeTabs",value:function(e){this.ActiveTab=e}},{key:"GetSkuDetails",value:function(e){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.GetSkuInfo,Login:!0},Data:e,Callback:function(e){if(e.IsSuccess){t.$set(t.OperateForm,"SkuInformation",e.Data.Data),t.$refs["EditorSizes"].SetContent(t.OperateForm.SkuInformation.Sizes),t.$refs["EditorDescription"].SetContent(t.OperateForm.SkuInformation.Description);var r=JSON.parse(JSON.stringify(t.OperateForm.SkuInformation.CategoryId));t.OperateForm.SkuInformation.CategoryId=[],t.OperateForm.SkuInformation.CategoryId.unshift(r.toString()),t.FindParentIds(t.Tree,r),t.GetSkuAttribute(t.OperateForm.SkuInformation.Id),t.GetSkuDeclare(t.OperateForm.SkuInformation.Id),t.GetSkuImage(t.OperateForm.SkuInformation.Id),e.Data.Data.HasProperty?t.GetSkuProperty(t.OperateForm.SkuInformation.Id):t.GetBindSku(t.OperateForm.SkuInformation.Id),t.ShowModal=!0}else t.$Request.Error(e);t.$UI.Loading.Hide()}})}},{key:"FindParentIds",value:function(e,t){for(var r in e)e[r].Id==t?(this.OperateForm.SkuInformation.CategoryId.unshift(e[r].ParentId.toString()),0!=e[r].ParentId&&this.FindParentIds(this.CagtegoryTree,Number(e[r].ParentId))):this.FindParentIds(e[r].ChildNodes,t)}},{key:"SetCategory",value:function(e){var t;(t=this.OperateForm.SkuInformation.CategoryId).splice.apply(t,[0,this.OperateForm.SkuInformation.CategoryId.length].concat(Object(i["a"])(e.map((function(e){return Number(e)})))))}},{key:"GetSkuAttribute",value:function(e){var t=this;this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.GetSkuAttribute,Login:!0},Data:e,Callback:function(e){e.IsSuccess?(t.OperateForm.SkuAttribute.splice(0,t.OperateForm.SkuAttribute.length),t.EditAttribute=e.Data.Data.map((function(e){return t.OperateForm.SkuAttribute.push(Number(e.AttributeId)),{value:e.AttributeId,label:e.AttributeName}}))):t.$Request.Error(e)}})}},{key:"GetSkuImage",value:function(e){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.GetSkuImages,Login:!0},Data:e,Callback:function(e){var r;e.IsSuccess?(r=t.OperateForm.SkuImages).splice.apply(r,[0,t.OperateForm.SkuImages.length].concat(Object(i["a"])(e.Data.Data))):t.$Request.Error(e);t.$UI.Loading.Hide()}})}},{key:"GetSkuDeclare",value:function(e){var t=this;this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.GetSkuDeclare,Login:!0},Data:e,Callback:function(e){e.IsSuccess?t.$set(t.OperateForm,"SkuDeclare",e.Data.Data):t.$Request.Error(e)}})}},{key:"GetSkuProperty",value:function(e){var t=this;this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.GetSkuProperty,Login:!0},Data:e,Callback:function(e){var r;e.IsSuccess?((r=t.SkuProperty).splice.apply(r,[0,t.SkuProperty.length].concat(Object(i["a"])(e.Data.Data))),t.CheckAllGroup=t.SkuProperty.map((function(e){return e.Id})),t.Indeterminate=!1,t.CheckAll=!0):t.$Request.Error(e)}})}},{key:"GetBindSku",value:function(e){var t=this;this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.GetSkuBind,Login:!0},Data:e,Callback:function(e){var r;(t.$UI.Loading.Hide(),e.IsSuccess)?(r=t.OperateForm.SkuBind).splice.apply(r,[0,t.OperateForm.SkuBind.length].concat(Object(i["a"])(e.Data.Data))):t.$Request.Error(e)}})}},{key:"ClearModal",value:function(e){this.ShowModal=!1,this.OperateForm=new S["a"].SkuDetails,this.$refs["OperateForm"].resetFields(),this.ActiveTab="Base",this.EditAttribute=[],this.SkuProperty=[],this.$refs["EditorSizes"].SetContent(""),this.$refs["EditorDescription"].SetContent(""),this.HandleResMsg(e)}},{key:"SubModal",value:function(){var e=this;this.$refs["OperateForm"].validate((function(t){t?e.ArrangeSkuMessage():e.$UI.Tips.Floating("warning","请输入必填项")}))}},{key:"ArrangeSkuMessage",value:function(){var e,t,r=this,a={Sku:JSON.parse(JSON.stringify(this.OperateForm.SkuInformation)),SkuAttribute:[],SkuImage:JSON.parse(JSON.stringify(this.OperateForm.SkuImages)),SkuMap:[],SkuDeclare:JSON.parse(JSON.stringify(this.OperateForm.SkuDeclare)),SkuPropertyId:[],SkuBind:JSON.parse(JSON.stringify(this.OperateForm.SkuBind))};if(""!==a.Sku.DefaultImage){if(0===a.Sku.Id){if(0===a.SkuBind.length)return void this.$UI.Tips.Floating("warning","请添加捆绑SKU");var o,s=0,u=Object(n["a"])(a.SkuBind);try{for(u.s();!(o=u.n()).done;){var l=o.value;s+=l.Quantity}}catch(d){u.e(d)}finally{u.f()}if(s<2)return void this.$UI.Tips.Floating("warning","捆绑SKU数量总和需大于或等于2")}if(0!==a.Sku.Id&&a.SkuBind.length>0){var m,c=0,p=Object(n["a"])(a.SkuBind);try{for(p.s();!(m=p.n()).done;){var S=m.value;c+=S.Quantity}}catch(d){p.e(d)}finally{p.f()}if(c<2)return void this.$UI.Tips.Floating("warning","捆绑SKU数量总和需大于或等于2")}a.Sku.Description=this.$refs["EditorDescription"].GetContent(),a.Sku.Sizes=this.$refs["EditorSizes"].GetContent();var k=a.Sku.CategoryId;a.Sku.CategoryId=Number(k[k.length-1]),a.SkuAttribute=[],(e=a.SkuAttribute).push.apply(e,Object(i["a"])(this.EditAttribute.map((function(e){return{SkuId:a.Sku.Id,AttributeId:e.value,AttributeName:e.label}})))),(t=a.SkuPropertyId).splice.apply(t,[0,a.SkuPropertyId.legnth].concat(Object(i["a"])(this.CheckAllGroup))),a.Sku.DevUserId=Number(JSON.parse(this.$Cookie.Get("frler_user")).UserId),this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:0===a.Sku.Id?this.$Api.SkuCreate:this.$Api.SkuModify,Login:!0},Data:a,Callback:function(e){r.$UI.Loading.Hide(),e.IsSuccess?(r.$UI.Tips.Floating("success",0===a.Sku.Id?"添加捆绑SKU成功":"编辑SKU成功"),r.ClearModal(1)):r.$Request.Error(e)}})}else this.$UI.Tips.Floating("warning","请上传默认图片")}},{key:"HandleSuccessSku",value:function(e,t){1==e.IsSuccess?this.OperateForm.SkuInformation.DefaultImage=e.Data.Url:this.$Request.Error(e)}},{key:"HandleSuccessImages",value:function(e,t){1==e.IsSuccess?(this.OperateForm.SkuImages.push(new S["a"].SkuImages),this.OperateForm.SkuImages[this.OperateForm.SkuImages.length-1]["ImageUrl"]=e.Data.Url,this.OperateForm.SkuImages[this.OperateForm.SkuImages.length-1]["SkuId"]=this.OperateForm.SkuInformation.Id):this.$Request.Error(e)}},{key:"HandleFormatError",value:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件".concat(e.name,"格式不正确，请上传 jpg、 png 或 jpeg 格式的图片。")})}},{key:"HandleMaxSize",value:function(e){this.$Notice.warning({title:"超出文件大小限制",desc:"文件".concat(e.name,"太大，不能超过 2M。")})}},{key:"HandleRemove",value:function(e){if(void 0===e)this.$set(this.OperateForm.SkuInformation,"DefaultImage","");else for(var t=0;t<this.OperateForm.SkuImages.length;t++)this.OperateForm.SkuImages[t].ImageUrl===e&&this.OperateForm.SkuImages.splice(t,1)}},{key:"HandleCheckAll",value:function(){this.Indeterminate?this.CheckAll=!1:this.CheckAll=!this.CheckAll,this.Indeterminate=!1,this.CheckAll?this.CheckAllGroup=this.SkuProperty.map((function(e){return e.Id})):this.CheckAllGroup=[]}},{key:"CheckAllGroupChange",value:function(e){e.length===this.SkuProperty.length?(this.Indeterminate=!1,this.CheckAll=!0):e.length>0?(this.Indeterminate=!0,this.CheckAll=!1):(this.Indeterminate=!1,this.CheckAll=!1,this.CheckAllGroup=[])}},{key:"ChangeSkuAttribute",value:function(e){this.EditAttribute=e}},{key:"TriggerAddBind",value:function(){this.$refs["EnableSku"].Trigger(!1)}},{key:"HandleSkuRes",value:function(e){var t;(t=this.OperateForm.SkuBind).push.apply(t,Object(i["a"])(e.map((function(e){return{SkuId:e.Id,SkuCode:e.SkuCode,SkuName:e.SkuName,DefaultImage:e.DefaultImage,Quantity:1}}))));for(var r=this.OperateForm.SkuBind.length,a=0;a<r;a++)for(var o=a+1;o<r;o++)this.OperateForm.SkuBind[a].SkuCode===this.OperateForm.SkuBind[o].SkuCode&&(this.OperateForm.SkuBind.splice(o,1),r--,o--)}},{key:"ShowPic",value:function(e){this.$refs.ShowBigPic.Trigger(e)}}]),r}(p["d"]);c["a"]([Object(p["c"])()],k.prototype,"Tree",void 0),c["a"]([Object(p["c"])()],k.prototype,"DropAttribute",void 0),c["a"]([Object(p["c"])()],k.prototype,"DropPurchaser",void 0),c["a"]([Object(p["c"])()],k.prototype,"DropDevManager",void 0),c["a"]([Object(p["c"])()],k.prototype,"DropSaleManager",void 0),c["a"]([Object(p["c"])()],k.prototype,"DropBrand",void 0),c["a"]([Object(p["b"])()],k.prototype,"HandleResMsg",null),k=c["a"]([Object(p["a"])({name:"SkuDetail",components:{ShowBigPic:function(){return r.e("chunk-c0a1d894").then(r.bind(null,"6156"))},Jodit:function(){return r.e("chunk-0804eda8").then(r.bind(null,"bf42"))},EnableSku:function(){return r.e("chunk-2d0dd9de").then(r.bind(null,"81c2"))}}})],k);var d=k,f=d,h=(r("7196"),r("4023")),g=Object(h["a"])(f,a,o,!1,null,null,null);t["default"]=g.exports}}]);