(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e59f2"],{"94ef":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Row",[r("Modal",{attrs:{title:t.TabTitle,"mask-closable":!1,width:"600"},on:{"on-cancel":function(e){return t.EmitPurchase(!1)}},model:{value:t.OpenPreventModal,callback:function(e){t.OpenPreventModal=e},expression:"OpenPreventModal"}},[r("Form",{ref:"PreventForm",attrs:{"label-width":100,model:t.PreventForm}},[r("FormItem",{attrs:{label:"备注："}},[r("Input",{ref:"Remark",attrs:{placeholder:"请输入备注",type:"textarea",autosize:{minRows:6,maxRows:6}},model:{value:t.PreventForm.Remark,callback:function(e){t.$set(t.PreventForm,"Remark",e)},expression:"PreventForm.Remark"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:t.PostPrevent}},[t._v("提交")]),r("Button",{on:{click:function(e){return t.EmitPurchase(!1)}}},[t._v("取消")])],1)],1)],1)},a=[],s=(r("6412"),r("76bb"),r("3231")),o=r("064d"),i=r("46d7"),u=r("631e"),c=r("4a81"),l=r("d11d"),h=r("c638"),P=function(t){Object(i["a"])(r,t);var e=Object(u["a"])(r);function r(){var t;return Object(s["a"])(this,r),t=e.apply(this,arguments),t.CurrentPon=0,t.PreventForm=new h["a"].PreventData,t.TabTitle="",t.OpenPreventModal=!1,t.SelectedData=[],t}return Object(o["a"])(r,[{key:"EmitPurchase",value:function(t){this.OpenPreventModal=!1,this.$set(this,"PreventForm",new h["a"].PreventData)}},{key:"TriggerModal",value:function(t,e){var r=this;6!==e||t.every((function(t){return 1==t.Status||9==t.Status&&1==t.PayStatus||(9==t.Status||4==t.Status)&&2==t.RefundStatus}))?7!==e||t.every((function(t){return(7==t.Status||6==t.Status||5==t.Status)&&2==t.RefundStatus}))?(this.SelectedData=t,this.CurrentPon=e,this.TabTitle=6==this.CurrentPon?"终止采购":7==this.CurrentPon?"不等待余货":"",this.OpenPreventModal=!0,this.$nextTick((function(){r.$refs.Remark.focus()}))):this.$UI.Tips.Floating("warning","请选择状态为待签收、待入库、部分入库，且已申请退款的采购单进行操作"):this.$UI.Tips.Floating("warning","请选择状态为新建、待付款且未申请付款、待付款且已申请退款、待发货且已申请退款的采购单进行操作")}},{key:"PostPrevent",value:function(){var t=this,e=JSON.parse(JSON.stringify(this.PreventForm));e.Id=this.SelectedData.map((function(t){return t.Id})),this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:6==this.CurrentPon?this.$Api.PurchaseOrderStop:this.$Api.PurchaseOrderNoWait,Login:!0},Data:e,Callback:function(e){e.IsSuccess?(t.$UI.Tips.Floating("success",6==t.CurrentPon?"终止采购成功，采购单状态变更为已终止":"不等待余货成功，采购单状态变更为已完成"),t.EmitPurchase(!0)):(t.$Request.Error(e),t.$UI.Loading.Hide())}})}}]),r}(l["d"]);c["a"]([Object(l["b"])()],P.prototype,"EmitPurchase",null),P=c["a"]([Object(l["a"])({name:"PreventPon"})],P);var d=P,v=d,p=r("4023"),m=Object(p["a"])(v,n,a,!1,null,null,null);e["default"]=m.exports}}]);