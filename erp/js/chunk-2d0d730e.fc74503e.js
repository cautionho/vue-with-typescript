(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d730e"],{7681:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Row",[e("div",{staticClass:"P-Inline-Block",attrs:{id:"printItems"}},[e("table",{staticClass:"P-TA-C",staticStyle:{"font-size":"12px",width:"100%","font-family":"'微软雅黑'"},attrs:{border:"1",cellpadding:"4",cellspacing:"0"}},[e("thead",[e("tr",[e("td",{staticStyle:{"font-size":"20px","text-align":"center"},attrs:{colspan:"6"}},[e("b",[t._v("采购单 "+t._s(t.CurPrintData.PurchaseCode))])])])]),e("tbody",[e("tr",[e("td",{staticStyle:{width:"50%","text-align":"left"},attrs:{colspan:"3"}},[t._v("供应商："+t._s(t.CurPrintData.SupplyName))]),e("td",{staticClass:"P-TA-L",attrs:{colspan:"3"}},[t._v("收货仓库："+t._s(t.CurPrintData.WarehouseName))])]),e("tr",[e("td",{staticClass:"P-TA-L",attrs:{colspan:"3"}},[t._v("采购员："+t._s(t.CurPrintData.PurchaserName))]),e("td",{staticClass:"P-TA-L",attrs:{colspan:"3"}},[t._v("预计到达日期："+t._s(t.CurPrintData.ExpectedTime?t.$UI.Render.Date(t.CurPrintData.ExpectedTime,!1):""))])]),e("tr",[e("td",{staticClass:"P-TA-L",attrs:{colspan:"3"}},[t._v("发票号：")]),e("td",{staticClass:"P-TA-L",attrs:{colspan:"3"}},[t._v("发票说明：")])]),e("tr",[e("th",[t._v("序号")]),e("th",[t._v("图片")]),e("th",[t._v("SKU编号")]),e("th",[t._v("货品名称")]),e("th",[t._v("采购数量")]),e("th",[t._v("单价(人民币)")])]),t._l(t.CurPrintData.Items,(function(a,r){return e("tr",{key:r},[e("td",[t._v(t._s(r+1))]),e("td",[e("img",{attrs:{width:"60",src:t.$Server.File+"/"+a.Item.DefaultImage}})]),e("td",[t._v(t._s(a.Item.SkuCode))]),e("td",[t._v(t._s(a.Item.SkuName))]),e("td",[t._v(t._s(a.Item.PurchaseQuantity))]),e("td",[t._v(t._s(a.Item.PurchasePrice))])])})),e("tr",[e("td",{staticClass:"P-TA-L",attrs:{colspan:"6"}},[t._v("实际应付货款（人民币）："+t._s(t.CurPrintData.RealPrice))])]),e("tr",[e("td",{staticClass:"P-TA-L",attrs:{colspan:"6"}},[t._v("运费（人民币）：")])]),e("tr",[e("td",{staticClass:"P-TA-L",attrs:{colspan:"6"}},[t._v("总金额（人民币）：")])]),e("tr",[e("td",{staticClass:"P-TA-L",attrs:{colspan:"6"}},[t._v("备注：")])])],2)])])])},s=[],i=(e("9660"),e("4d62"),e("ef8f"),e("6bf8"),e("eb83"),e("0b78"),e("3231")),n=e("064d"),c=e("46d7"),l=e("631e"),u=e("4a81"),d=e("d11d"),o=e("c638"),P=e("2437"),_=function(t){Object(c["a"])(e,t);var a=Object(l["a"])(e);function e(){var t;return Object(i["a"])(this,e),t=a.apply(this,arguments),t.CurPrintData=new o["a"].PurchaseOrd,t.SelectedData=[],t}return Object(n["a"])(e,[{key:"EmitPurchase",value:function(t){}},{key:"TriggerModal",value:function(t){this.SelectedData=t,this.CheckData()}},{key:"CheckData",value:function(){void 0!=Object(P["a"])(this)?this.GetPrintItems():this.ExportPurchase(!1)}},{key:"GetPrintItems",value:function(){var t=this;this.$UI.Loading.Show();var a="D:\\";this.SelectedData.forEach((function(e,r){t.$Request.Post({Server:t.$Server.Purchase,Api:{Address:t.$Api.PurchaseOrderGetItem,Login:!0},Data:e.Id,Callback:function(s){if(s.IsSuccess){for(var i in e["Items"]=s.Data.Data,t.CurPrintData=e,t.CurPrintData["RealPrice"]=0,t.CurPrintData.Items)t.CurPrintData["RealPrice"]+=t.CurPrintData.Items[i].Item.PurchaseQuantity*t.CurPrintData.Items[i].Item.PurchasePrice;t.CurPrintData["RealPrice"]=(Math.round(100*t.CurPrintData["RealPrice"])/100).toFixed(2),t.$nextTick((function(){var t=Object(P["a"])(),s=(new Date).getTime().toString().slice(0,10),i=e.PurchaseCode+"-"+s+(r+1);JSON.parse(this.$Cookie.Get("frler_user")).UserName;t.PRINT_INIT(""),t.SET_PRINT_PAGESIZE(1,0,0,"A4"),t.ADD_PRINT_TABLE("1%","1%","98%","98%",document.getElementById("printItems").innerHTML),t.SET_SAVE_MODE("FILE_PROMPT",!0),t.SAVE_TO_FILE(a+i+".xls")}))}else t.$Request.Error(s);r==t.SelectedData.length-1&&(t.$UI.Loading.Hide(),t.EmitPurchase(!1))}})}))}}]),e}(d["d"]);u["a"]([Object(d["b"])()],_.prototype,"EmitPurchase",null),_=u["a"]([Object(d["a"])({name:"ExportPon"})],_);var h=_,v=h,p=e("4023"),C=Object(p["a"])(v,r,s,!1,null,null,null);a["default"]=C.exports}}]);