(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2136e8"],{ad3b:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Col",[o("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("设置物流渠道")]),o("Modal",{attrs:{title:"设置物流渠道",width:600},on:{"on-cancel":e.CancelModal},model:{value:e.MethodModal,callback:function(t){e.MethodModal=t},expression:"MethodModal"}},[o("Form",{ref:"MethodInfo",attrs:{model:e.MethodInfo,rules:e.MethodRules,"label-width":90,onsubmit:"return false;"}},[o("FormItem",{attrs:{label:"物流渠道：",prop:"MethodId"}},[o("Select",{attrs:{placeholder:"物流渠道",options:e.ShipMethodDrop,optionValKey:"Id",optionKey:"Name"},model:{value:e.MethodInfo.MethodId,callback:function(t){e.$set(e.MethodInfo,"MethodId",t)},expression:"MethodInfo.MethodId"}})],1)],1),o("footer",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"primary"},on:{click:e.Post}},[e._v("提交")]),o("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},n=[],i=(o("76bb"),o("6ed5"),o("5c62")),a=o("430a"),s=o("e24e"),d=o("3231"),h=o("064d"),l=o("46d7"),c=o("631e"),p=o("4a81"),u=o("d11d"),M=o("1459"),f=function(e){Object(l["a"])(o,e);var t=Object(c["a"])(o);function o(){var e;return Object(d["a"])(this,o),e=t.apply(this,arguments),e.MethodModal=!1,e.ShipMethodDrop=[],e.MethodInfo=new M["a"].SetShippintMethod,e.MethodRules={MethodId:[{required:!0,message:"请选择物流渠道",trigger:"change",type:"number"},{pattern:e.$Pattern.PositiveNotZeroInt,message:"请选择物流渠道",trigger:"change"}]},e}return Object(h["a"])(o,[{key:"TriggerOperations",value:function(e){}},{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.TriggerOperations("SetShippingMethod")}},{key:"Validate",value:function(e){var t,o=this,r=Object(s["a"])(e);try{var n=function(){var e=t.value;if(![4,7,9].some((function(t){return t===e.ShipOrder.Status}))||[2,3].some((function(t){return t===e.ShipOrder.Status}))&&e.ShipOrder.IsException)return o.$UI.Tips.Floating("warning","请选择状态为已拣货、缺货、联系客户的发货订单或状态为已确认、待拣货的异常发货订单进行操作"),{v:void 0}};for(r.s();!(t=r.n()).done;){var i=n();if("object"===Object(a["a"])(i))return i.v}}catch(d){r.e(d)}finally{r.f()}this.MethodInfo.OrderId=e.map((function(e){return e.ShipOrder.Id})),this.MethodInfo.MethodId=e[0].ShipOrder.ShippingMethodId,this.ShipMethodDrop.length||this.GetMethodDrop(),this.$set(this,"MethodModal",!0)}},{key:"GetMethodDrop",value:function(){var e=this;this.$Request.Post({Server:this.$Server.Logistics,Api:{Address:this.$Api.ChannelDropList},Data:0,Callback:function(t){var o;t.IsSuccess?(o=e.ShipMethodDrop).push.apply(o,Object(i["a"])(t.Data.DropList)):e.$Request.Error(t)}})}},{key:"Post",value:function(){var e=this;this.$refs.MethodInfo.validate((function(t){t&&(e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Warehouse,Api:{Address:e.$Api.ShipOrderSetShippingMethod,Login:!0},Data:e.MethodInfo,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success","设置物流渠道成功"),e.EmitOperateSuccess(),e.CancelModal()):(e.$UI.Loading.Hide(),e.$Request.Error(t))}}))}))}},{key:"CancelModal",value:function(){this.$set(this,"MethodModal",!1),this.$set(this,"MethodInfo",new M["a"].SetShippintMethod),this.$refs.MethodInfo.resetFields()}}]),o}(u["d"]);p["a"]([Object(u["b"])()],f.prototype,"TriggerOperations",null),p["a"]([Object(u["b"])()],f.prototype,"EmitOperateSuccess",null),f=p["a"]([Object(u["a"])({name:"SetShippingMethod"})],f);var v=f,S=v,I=o("4023"),g=Object(I["a"])(S,r,n,!1,null,null,null);t["default"]=g.exports}}]);