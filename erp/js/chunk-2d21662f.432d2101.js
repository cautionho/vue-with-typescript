(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21662f"],{c1f1:function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"P-Inline-Block"},[o("Col",[e.Power?o("Button",{staticClass:"P-MR-10 P-MB-10",attrs:{type:"primary"},on:{click:function(t){return e.ChangeModal(1)}}},[e._v("添加拍摄需求")]):e._e(),o("Modal",{attrs:{title:e.CurrSeleData.length>0?"修改拍摄需求":"添加拍摄需求","mask-closable":!1,width:500},on:{"on-cancel":function(t){return e.ChangeModal(3)}},model:{value:e.IsShowModal,callback:function(t){e.IsShowModal=t},expression:"IsShowModal"}},[o("Form",{ref:"PhotoRequestMsg",attrs:{"label-width":100,model:e.PhotoRequestMsg,rules:e.Rules,onsubmit:"return false;",name:"PhotoRequestMsg"}},[o("Form-item",{staticClass:"ivu-form-item-required",attrs:{label:"SKU编号："}},[e.PhotoRequestMsg.SkuCode?o("span",{staticClass:"P-MR-10"},[e._v(e._s(e.PhotoRequestMsg.SkuCode))]):e._e(),e._v(" "),o("Button",{attrs:{type:"primary"},on:{click:e.OpenSku}},[e._v("选择SKU")])],1),o("Form-item",{attrs:{label:"产品名："}},[o("span",[e._v(e._s(e.ProductName))])]),o("Form-item",{attrs:{label:"参考链接：",prop:"DemoUrl"}},[o("Input",{ref:"DemoUrl",attrs:{placeholder:"请输入参考链接",name:"proNameInput"},model:{value:e.PhotoRequestMsg.DemoUrl,callback:function(t){e.$set(e.PhotoRequestMsg,"DemoUrl",t)},expression:"PhotoRequestMsg.DemoUrl"}})],1),o("Form-item",{attrs:{label:"美工：",prop:"Operator"}},[o("Select",{attrs:{placeholder:"请选择美工",options:e.DropOperator},model:{value:e.PhotoRequestMsg.Operator,callback:function(t){e.$set(e.PhotoRequestMsg,"Operator",t)},expression:"PhotoRequestMsg.Operator"}})],1),o("Form-item",{attrs:{label:"备注："}},[o("Input",{attrs:{placeholder:"请输入备注",type:"textarea",autosize:{minRows:4,maxRows:5}},model:{value:e.PhotoRequestMsg.Remark,callback:function(t){e.$set(e.PhotoRequestMsg,"Remark",t)},expression:"PhotoRequestMsg.Remark"}})],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"primary"},on:{click:function(t){return e.PostOpe(!1)}}},[e._v(e._s(this.CurrSeleData.length>0?"修改":"添加"))]),o("Button",{attrs:{type:"primary"},on:{click:function(t){return e.PostOpe(!0)}}},[e._v("提交美工处理")]),o("Button",{on:{click:function(t){return e.ChangeModal(3)}}},[e._v("取消")])],1)],1),o("EnableSku",{ref:"EnableSku",on:{"handle-res-msg":e.HandleSkuRes}})],1)],1)},a=[],r=(o("6bf8"),o("3231")),u=o("064d"),n=o("46d7"),l=o("631e"),i=o("4a81"),h=o("d11d"),c=o("eb49"),d=function(e){Object(n["a"])(o,e);var t=Object(l["a"])(o);function o(){var e;return Object(r["a"])(this,o),e=t.apply(this,arguments),e.ProductName="",e.CurrSeleData=[],e.IsShowModal=!1,e.DropOperator=[],e.PhotoRequestMsg=new c["a"].PhotoRequestMsg,e.Rules={Operator:[{required:!0,message:"请选择美工",trigger:"change",type:"number"}],DemoUrl:[{required:!0,message:"请输入参考链接"}]},e}return Object(u["a"])(o,[{key:"ChangeModal",value:function(e){this.PhotoRequestMsg=new c["a"].PhotoRequestMsg,this.$set(this,"IsShowModal",!1),this.$refs.PhotoRequestMsg.resetFields(),this.ProductName=""}},{key:"TriggerModal",value:function(e,t){var o=this;this.DropOperator=t,this.CurrSeleData=e,this.IsShowModal=!0,this.$nextTick((function(){o.$refs.DemoUrl.focus()})),this.CurrSeleData.length>0&&(this.PhotoRequestMsg.Id=this.CurrSeleData[0].Id,this.PhotoRequestMsg.DemoUrl=this.CurrSeleData[0].DemoUrl,this.PhotoRequestMsg.SkuCode=this.CurrSeleData[0].SkuCode,this.PhotoRequestMsg.Remark=this.CurrSeleData[0].Remark,this.ProductName=this.CurrSeleData[0].SkuName)}},{key:"OpenSku",value:function(){this.$refs["EnableSku"].Trigger(!0)}},{key:"HandleSkuRes",value:function(e){this.PhotoRequestMsg.SkuCode=e[0].SkuCode,this.PhotoRequestMsg.SkuId=e[0].Id,this.ProductName=e[0].SkuName}},{key:"PostOpe",value:function(e){var t=this;this.$refs.PhotoRequestMsg.validate((function(o){if(o){if(""===t.PhotoRequestMsg.SkuCode)return void t.$UI.Tips.Floating("warning"," 请选择SKU");var s=0==t.CurrSeleData.length?t.$Api.PhotoRequestCreate:t.$Api.PhotoRequestModify;t.PhotoRequestMsg.IsToHandle=e,t.$UI.Loading.Show(),t.$Request.Post({Server:t.$Server.Purchase,Api:{Address:s,Login:!0},Data:t.PhotoRequestMsg,Callback:function(e){e.IsSuccess?t.ChangeModal(2):(t.$Request.Error(e),t.$UI.Loading.Hide())}})}}))}}]),o}(h["d"]);i["a"]([Object(h["c"])()],d.prototype,"Power",void 0),i["a"]([Object(h["b"])()],d.prototype,"ChangeModal",null),d=i["a"]([Object(h["a"])({name:"ModifyPhotoRequest",components:{EnableSku:function(){return o.e("chunk-2d0dd9de").then(o.bind(null,"81c2"))}}})],d);var p=d,m=p,g=o("4023"),M=Object(g["a"])(m,s,a,!1,null,null,null);t["default"]=M.exports}}]);