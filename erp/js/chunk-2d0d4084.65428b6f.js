(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d4084"],{"5efd":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Row",{staticClass:"P-Inline-Block",staticStyle:{"vertical-align":"middle"}},[o("Button",{staticClass:"P-Inline-Block",attrs:{type:"primary"},on:{click:e.OpenModal}},[e._v("Sku入库")]),o("Modal",{attrs:{"mask-closable":!1,width:600,title:"Sku入库"},on:{"on-cancel":function(t){e.IsShowModal=!1}},model:{value:e.IsShowModal,callback:function(t){e.IsShowModal=t},expression:"IsShowModal"}},[o("Form",{ref:"OperateForm",attrs:{onsubmit:"return false",model:e.OperateForm,rules:e.OperateFormRules,"label-width":100}},[o("FormItem",{attrs:{label:"仓库：",prop:"WarehouseId"}},[o("Select",{attrs:{placeholder:"请选择仓库",options:e.DropWarehouse},model:{value:e.OperateForm.WarehouseId,callback:function(t){e.$set(e.OperateForm,"WarehouseId",t)},expression:"OperateForm.WarehouseId"}})],1),o("FormItem",{attrs:{label:"SKU编号：",prop:"SkuCode"}},[o("Input",{ref:"SkuCode_Ipt",attrs:{placeholder:"请输入SKU编号"},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.GetSkuInventory(t):null}},model:{value:e.OperateForm.SkuCode,callback:function(t){e.$set(e.OperateForm,"SkuCode",t)},expression:"OperateForm.SkuCode"}})],1),o("FormItem",{attrs:{label:"SKU数量：",prop:"SkuCount"}},[o("InputNumber",{ref:"SkuCount_Ipt",staticClass:"P-W-100-Percent",attrs:{placeholder:"请输入SKU数量",min:1,step:1,precision:0},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.PutWarehouse(t):null}},model:{value:e.OperateForm.SkuCount,callback:function(t){e.$set(e.OperateForm,"SkuCount",t)},expression:"OperateForm.SkuCount"}})],1),o("Form-item",{attrs:{label:"产品名："}},[e._v(e._s(e.OperateForm.SkuName||"-"))]),o("Form-item",{attrs:{label:"货架号："}},[e._v(e._s(e.OperateForm.LocationCode||"-"))])],1),o("footer",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"primary"},on:{click:e.PutWarehouse}},[e._v("入库")]),o("Button",{on:{click:function(t){return e.ResetModal(!0)}}},[e._v("重置")])],1)],1)],1)},r=[],s=o("5c62"),u=o("3231"),n=o("064d"),i=o("46d7"),l=o("631e"),c=o("4a81"),p=o("d11d"),d=o("1f41"),h=function(e){Object(i["a"])(o,e);var t=Object(l["a"])(o);function o(){var e;return Object(u["a"])(this,o),e=t.apply(this,arguments),e.IsShowModal=!1,e.BeforeWarehouseId=0,e.DropWarehouse=[],e.SkuDetail=null,e.OperateForm=new d["a"].SkuPutWarehouseSearchGroup,e.OperateFormRules={WarehouseId:[{required:!0,message:"请选择仓库",trigger:"change",type:"number"}],SkuCode:[{required:!0,message:"请输入SKU编号",trigger:"change",type:"string"}],SkuCount:[{required:!0,message:"请输入SKU数量",trigger:"change",type:"number"}]},e}return Object(n["a"])(o,[{key:"EmitChange",value:function(){}},{key:"WatchShowModal",value:function(e){this.ResetModal(!0)}},{key:"OpenModal",value:function(){0==this.DropWarehouse.length?this.GetWarehouseList():this.IsShowModal=!0}},{key:"GetWarehouseList",value:function(){var e=this;this.$Request.Post({Server:this.$Server.Settings,Api:{Address:this.$Api.GetWarehouseDropList},Data:"",Callback:function(t){var o;t.IsSuccess?((o=e.DropWarehouse).push.apply(o,Object(s["a"])(t.Data.DropList)),e.OpenModal()):e.$Request.Error(t)}})}},{key:"GetSkuInventory",value:function(){var e=this;this.$refs["OperateForm"].validate((function(t){if(t){var o={SkuId:0,SkuCode:e.OperateForm.SkuCode,WarehouseId:e.OperateForm.WarehouseId};e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Warehouse,Api:{Address:e.$Api.InventoryGetSkuInventory,Login:!0},Data:o,Callback:function(t){e.$UI.Loading.Hide(),1==t.IsSuccess&&(e.BeforeWarehouseId=o.WarehouseId,e.$set(e.OperateForm,"SkuName",t.Data.Data.SkuName||"-"),e.$set(e.OperateForm,"LocationCode",t.Data.Data.LocationCode||"-"),e.SkuDetail=t.Data.Data,e.$nextTick((function(){this.$refs["SkuCount_Ipt"].$el.children[1].children[0].focus()})))}})}}))}},{key:"PutWarehouse",value:function(){var e=this;this.$refs["OperateForm"].validate((function(t){if(t)if(e.SkuDetail){var o={Id:e.SkuDetail.Id,Quantity:e.OperateForm.SkuCount};e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Warehouse,Api:{Address:e.$Api.InventorySkuInto,Login:!0},Data:o,Callback:function(t){e.$UI.Loading.Hide(),t.IsSuccess?(e.$UI.Tips.Floating("warning","SKU入库成功"),e.ResetModal(!1)):e.$Request.Error(t)}})}else e.$UI.Tips.Floating("warning","请输入/扫描SKU编号")}))}},{key:"ResetModal",value:function(e){var t=this;this.$set(this,"OperateForm",new d["a"].SkuPutWarehouseSearchGroup),this.$refs["OperateForm"].resetFields(),this.$nextTick((function(){e||t.$set(t.OperateForm,"WarehouseId",t.BeforeWarehouseId),t.$refs["SkuCode_Ipt"].focus()}))}}]),o}(p["d"]);c["a"]([Object(p["b"])()],h.prototype,"EmitChange",null),c["a"]([Object(p["e"])("IsShowModal")],h.prototype,"WatchShowModal",null),h=c["a"]([Object(p["a"])({name:"SkuPutWarehouse",components:{}})],h);var S=h,k=S,m=o("4023"),f=Object(m["a"])(k,a,r,!1,null,"a5e7139c",null);t["default"]=f.exports}}]);