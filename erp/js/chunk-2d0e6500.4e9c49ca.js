(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e6500"],{"97e1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Row",{staticClass:"Container-Tabs"},[a("Tabs",{attrs:{name:"PonDetail",type:"card",closable:!1,value:e.ActiveTab},on:{"on-click":e.ChangeTabs}},[a("TabPane",{attrs:{label:"基本信息",name:"Base",tab:"PonDetail"}},[a("PonBaseInfo",{attrs:{DetailInfoMsg:e.DetailInfoMsg}}),e.CurrOperatPon?a("Form",{ref:"ReviewForm",attrs:{"label-width":100,model:e.ReviewForm}},[1===e.CurrOperatPon?a("FormItem",{attrs:{label:"更换采购员："}},[a("Select",{attrs:{placeholder:"请选择采购员",onChange:e.OnClearSelect.bind(this,"Purchaser"),options:e.PurchaserList,transfer:""},model:{value:e.ReviewForm.Purchaser,callback:function(t){e.$set(e.ReviewForm,"Purchaser",t)},expression:"ReviewForm.Purchaser"}})],1):e._e(),a("FormItem",{attrs:{label:"备注："}},[a("Input",{attrs:{placeholder:"请输入备注",type:"textarea",autosize:{minRows:4,maxRows:4}},model:{value:e.ReviewForm.Remark,callback:function(t){e.$set(e.ReviewForm,"Remark",t)},expression:"ReviewForm.Remark"}})],1)],1):e._e()],1),a("TabPane",{attrs:{label:"采购明细",name:"Item",tab:"PonDetail"}},[a("PurchaseItem",{attrs:{Data:e.DetailItemMsg}})],1),a("TabPane",{attrs:{label:"操作记录",name:"History",tab:"PonDetail"}},[a("Table",{staticClass:"P-MT-10",attrs:{size:"small","highlight-row":!0,columns:e.PurchaseHistoryCol,data:e.PurchaseHistoryData,border:"",stripe:"",height:"400"}})],1),e.Controller?a("TabPane",{attrs:{label:"到货单记录",name:"Arrival",tab:"PonDetail"}},[a("Table",{staticClass:"P-MT-10",attrs:{size:"small","highlight-row":!0,columns:e.PurchaseArrivalCol,data:e.PurchaseArrivalData,border:"",stripe:"",height:"400"}})],1):e._e()],1)],1)},s=[],i=(a("6bf8"),a("5c62")),o=a("3231"),n=a("064d"),l=a("46d7"),c=a("631e"),h=a("4a81"),u=a("d11d"),d=a("c638"),P=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.SelectedData=[],e.Controller=!1,e.DetailInfoMsg=new d["a"].PurchaseDetail,e.DetailItemMsg=[],e.PurchaseHistoryData=[],e.PurchaseArrivalData=[],e.SelecData=new d["a"].PurchaseOrd,e.ActiveTab="Base",e.ReviewForm=new d["a"].ReviewPostData,e.PurchaseHistoryCol=[{title:"编号",key:"Id",width:100},{title:"操作者",key:"Operator",width:120},{title:"操作记录",key:"OperateLog",render:function(e,t){return e("div",[e("Tooltip",{props:{content:t.row.OperateLog,maxWidth:500},class:"P-W-100-Percent"},[e("p",{class:"P-LINE-1"},""===t.row.OperateLog?"-":t.row.OperateLog)])])}},{title:"操作时间",key:"",width:160,render:function(t,a){return t("div",e.$UI.Render.Date(a.row.OperateTime,!0))}}],e.PurchaseArrivalCol=[{title:"到货单号",key:"OrderCode"},{title:"SKU编号",key:"SkuCode"},{title:"物流公司/快递单号",key:"",width:160,render:function(e,t){return e("div",[e("p",[e("span",{class:"P-Table-Tip P-BG-Primary"},"物"),e("span",{},t.row.ExpressCompany)]),e("p",[e("span",{class:"P-Table-Tip P-BG-Primary"},"快"),e("span",{},t.row.ExpressCode)])])}},{title:"到货数量/已入库",key:"",width:160,render:function(e,t){return e("div",{class:"P-MT-5 P-MB-5"},[e("p",[e("span",{class:"P-Table-Tip P-BG-Primary"},"到"),e("span",{},t.row.ArrivalQuantity)]),e("p",[e("span",{class:"P-Table-Tip P-BG-Primary"},"已"),e("span",{},t.row.InStorageQuantity)])])}},{title:"异常数量/退货数量",key:"",width:160,render:function(e,t){return e("div",[e("p",[e("span",{class:"P-Table-Tip P-BG-Primary"},"异"),e("span",{},t.row.NoPassQuantity)]),e("p",[e("span",{class:"P-Table-Tip P-BG-Primary"},"退"),e("span",{},t.row.RefundQuantity)])])}},{title:"状态",key:"",width:160,render:function(t,a){return t("div",e.$Enums.Purchase.ArrivalStatus[a.row.Status])}},{title:"创建时间",key:"",width:160,render:function(t,a){return t("div",e.$UI.Render.Date(a.row.CreateTime,!0))}}],e}return Object(n["a"])(a,[{key:"EmitPurchase",value:function(e){}},{key:"TriggerModal",value:function(e){console.log(this.PonPurchaseOrd),this.Controller=!this.HideArrival,this.$set(this,"ActiveTab","Base"),this.PonPurchaseOrd||(this.SelecData=JSON.parse(JSON.stringify(e[0]))),this.IsBatch||this.GetDetailInfo(),this.CurrOperatPon&&this.$set(this,"ReviewForm",new d["a"].ReviewPostData)}},{key:"OnClearSelect",value:function(e){void 0==this.ReviewForm[e]&&this.$set(this.ReviewForm,e,"")}},{key:"ChangeTabs",value:function(e){this.ActiveTab=e,"Item"===e?this.GetPurchaseItems():"History"===e?this.GetHistoryItem():"Arrival"===e&&this.GetArrivalItem()}},{key:"GetDetailInfo",value:function(){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.PurchaseOrderGetByCode,Login:!0},Data:this.PonPurchaseOrd?this.PonPurchaseOrd:this.SelecData.PurchaseCode,Callback:function(t){t.IsSuccess?e.DetailInfoMsg=t.Data.Data:e.$Request.Error(t),e.$UI.Loading.Hide()}})}},{key:"GetPurchaseItems",value:function(){var e=this;this.$UI.Loading.Show(),this.$set(this,"DetailItemMsg",[]),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.PurchaseOrderGetItem,Login:!0},Data:this.DetailInfoMsg.Id,Callback:function(t){var a;t.IsSuccess?(a=e.DetailItemMsg).push.apply(a,Object(i["a"])(t.Data.Data)):e.$Request.Error(t);e.$UI.Loading.Hide()}})}},{key:"GetHistoryItem",value:function(){var e=this;this.$UI.Loading.Show(),this.$set(this,"PurchaseHistoryData",[]),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.PurchaseOrderHistory,Login:!0},Data:this.DetailInfoMsg.PurchaseCode,Callback:function(t){var a;t.IsSuccess?(a=e.PurchaseHistoryData).push.apply(a,Object(i["a"])(t.Data.Data)):e.$Request.Error(t);e.$UI.Loading.Hide()}})}},{key:"GetArrivalItem",value:function(){var e=this;this.$UI.Loading.Show(),this.$set(this,"PurchaseArrivalData",[]),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.PurchaseArrivalOrder,Login:!0},Data:{PurchaseOrderId:this.DetailInfoMsg.Id,PurchaseOrderItemId:0},Callback:function(t){var a;t.IsSuccess?(a=e.PurchaseArrivalData).push.apply(a,Object(i["a"])(t.Data.Data)):e.$Request.Error(t);e.$UI.Loading.Hide()}})}}]),a}(u["d"]);h["a"]([Object(u["c"])()],P.prototype,"DetailsModal",void 0),h["a"]([Object(u["c"])()],P.prototype,"IsBatch",void 0),h["a"]([Object(u["c"])()],P.prototype,"PonPurchaseOrd",void 0),h["a"]([Object(u["c"])()],P.prototype,"CurrOperatPon",void 0),h["a"]([Object(u["c"])()],P.prototype,"PurchaserList",void 0),h["a"]([Object(u["c"])()],P.prototype,"HideArrival",void 0),h["a"]([Object(u["b"])()],P.prototype,"EmitPurchase",null),P=h["a"]([Object(u["a"])({name:"PonDetails",components:{PonBaseInfo:function(){return a.e("chunk-2d228ebd").then(a.bind(null,"daf0"))},PurchaseItem:function(){return Promise.resolve().then(a.bind(null,"3019"))}}})],P);var p=P,v=p,m=a("4023"),b=Object(m["a"])(v,r,s,!1,null,null,null);t["default"]=b.exports}}]);