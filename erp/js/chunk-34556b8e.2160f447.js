(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34556b8e"],{"03a3":function(e,t,s){},ab00:function(e,t,s){"use strict";var a=s("03a3"),r=s.n(a);r.a},d223:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Row",{staticClass:"Modify-File"},[s("Col",{attrs:{span:"24"}},[s("h1",{staticClass:"P-TA-C"},[e._v("弗睿网络科技（广州）有限公司")]),s("h2",{staticClass:"P-TA-C"},[e._v("Frler Network Technology (Guangzhou) Co.,Ltd")]),s("h2",{directives:[{name:"show",rawName:"v-show",value:e.$route.params.IsCreate,expression:"$route.params.IsCreate"}],staticClass:"P-TA-C"},[e._v(e._s(JSON.parse(this.$Cookie.Get("frler_user")).UserName)+"（"+e._s(JSON.parse(this.$Cookie.Get("frler_user")).UserCode)+"）- 员工档案")]),s("div",{staticClass:"Info"},[s("h2",{staticClass:"P-TA-C P-MB-20"},[e._v("基本信息")]),s("Form",{ref:"PersonalMsg",attrs:{onsubmit:"return false",model:e.PersonalMsg,rules:e.PostConfirmRule,"label-width":160}},[s("Row",[s("Col",{attrs:{span:"24"}},[s("Col",{attrs:{span:"16"}},[s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"姓名：",prop:"Summary.UserName"}},[s("Input",{attrs:{placeholder:"请输入姓名"},model:{value:e.PersonalMsg.Summary.UserName,callback:function(t){e.$set(e.PersonalMsg.Summary,"UserName",t)},expression:"PersonalMsg.Summary.UserName"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"性别：",prop:"Summary.Sex"}},[s("RadioGroup",{model:{value:e.PersonalMsg.Summary.Sex,callback:function(t){e.$set(e.PersonalMsg.Summary,"Sex",t)},expression:"PersonalMsg.Summary.Sex"}},[s("Radio",{attrs:{label:"1"}},[e._v("男")]),s("Radio",{attrs:{label:"2"}},[e._v("女")])],1)],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"出生日期：",prop:"DateOfBirth"}},[s("Date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.PersonalMsg.DateOfBirth,callback:function(t){e.$set(e.PersonalMsg,"DateOfBirth",t)},expression:"PersonalMsg.DateOfBirth"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"民族：",prop:"Nation"}},[s("Select",{attrs:{placeholder:"请选择民族",options:e.NationList,optionValKey:"Key"},model:{value:e.PersonalMsg.Nation,callback:function(t){e.$set(e.PersonalMsg,"Nation",t)},expression:"PersonalMsg.Nation"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"婚姻状况：",prop:"MaritalStatus"}},[s("Select",{attrs:{placeholder:"请选择婚姻状况",options:e.MaritalStatusDrop},model:{value:e.PersonalMsg.MaritalStatus,callback:function(t){e.$set(e.PersonalMsg,"MaritalStatus",t)},expression:"PersonalMsg.MaritalStatus"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"身份证号：",prop:"IdNumber"}},[s("Form-item",{staticStyle:{margin:"0",width:"100%"},attrs:{prop:"IdNumber"}},[s("Input",{attrs:{maxlength:18,placeholder:"请输入身份证"},model:{value:e.PersonalMsg.IdNumber,callback:function(t){e.$set(e.PersonalMsg,"IdNumber",t)},expression:"PersonalMsg.IdNumber"}})],1)],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"毕业院校：",prop:"School"}},[s("Input",{attrs:{placeholder:"请输入毕业院校"},model:{value:e.PersonalMsg.School,callback:function(t){e.$set(e.PersonalMsg,"School",t)},expression:"PersonalMsg.School"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"专业：",prop:"Profession"}},[s("Input",{attrs:{placeholder:"请输入专业"},model:{value:e.PersonalMsg.Profession,callback:function(t){e.$set(e.PersonalMsg,"Profession",t)},expression:"PersonalMsg.Profession"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"户口性质：",prop:"AccountNature"}},[s("Select",{attrs:{placeholder:"请选择户口性质",options:e.AccountNatureList},model:{value:e.PersonalMsg.AccountNature,callback:function(t){e.$set(e.PersonalMsg,"AccountNature",t)},expression:"PersonalMsg.AccountNature"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{staticStyle:{width:"70%",display:"inline-block"},attrs:{label:"户口所在地：",prop:"LocationProvince"}},[s("Select",{attrs:{placeholder:"请选择省份",options:e.LocationProvinceList,optionValKey:"Key"},model:{value:e.PersonalMsg.LocationProvince,callback:function(t){e.$set(e.PersonalMsg,"LocationProvince",t)},expression:"PersonalMsg.LocationProvince"}})],1),s("Form-item",{staticClass:"City",staticStyle:{width:"30%",display:"inline-block"},attrs:{label:"",prop:"LocationCity"}},[s("Select",{ref:"locationCitySelc",attrs:{placeholder:"请选择市区",options:e.LocationCityList,optionValKey:"Key"},model:{value:e.PersonalMsg.LocationCity,callback:function(t){e.$set(e.PersonalMsg,"LocationCity",t)},expression:"PersonalMsg.LocationCity"}})],1)],1)],1),s("Col",{staticClass:"Hear-Photo",attrs:{span:"8"}},[e._l(e.UploadList,(function(t,a){return s("div",{key:a,staticClass:"demo-upload-list"},["finished"===t.status?[s("img",{attrs:{src:e.ImageServer+"/"+t.url}}),s("div",{staticClass:"demo-upload-list-cover"},[s("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(s){return e.HandleView(t.url)}}}),s("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(s){return e.HandleRemove(t)}}})],1)]:[t.showProgress?s("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)})),s("Upload",{directives:[{name:"show",rawName:"v-show",value:!e.UploadList.length,expression:"!UploadList.length"}],ref:"Upload",staticStyle:{display:"inline-block",width:"120px"},attrs:{"show-upload-list":!1,headers:e.headers,"default-file-list":e.DefaultList,data:{Dir:"userHead"},"on-success":e.HandleHeadSucc,accept:".jpg, .jpge, .png",format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.HandleFormatError,"on-exceeded-size":e.HandleMaxSize,"before-upload":e.HandleBeforeUpload,multiple:"",type:"drag",action:e.UploadImgServer}},[s("div",{staticStyle:{width:"120px",height:"120px","line-height":"120px"}},[s("Icon",{attrs:{type:"ios-camera-outline",size:"20"}})],1)])],2)],1),s("Col",{attrs:{span:"24"}},[s("Form-item",{attrs:{label:"语言：",prop:"Language"}},[s("CheckboxGroup",{model:{value:e.Language,callback:function(t){e.Language=t},expression:"Language"}},[s("Checkbox",{attrs:{label:"普通话"}}),s("Checkbox",{attrs:{label:"粤语"}}),s("Checkbox",{attrs:{label:"英语"}}),s("Checkbox",{attrs:{label:"韩语"}}),s("Checkbox",{attrs:{label:"日语"}})],1)],1)],1),s("Col",{attrs:{span:"24"}},[s("Form-item",{attrs:{label:"现住地址：",prop:"NowAddress"}},[s("Input",{attrs:{placeholder:"请输入现住地址"},model:{value:e.PersonalMsg.NowAddress,callback:function(t){e.$set(e.PersonalMsg,"NowAddress",t)},expression:"PersonalMsg.NowAddress"}})],1)],1),s("Col",{attrs:{span:"24"}},[s("Form-item",{attrs:{label:"户籍地址：",prop:"AccountAddress"}},[s("Input",{attrs:{placeholder:"请输入户籍地址"},model:{value:e.PersonalMsg.AccountAddress,callback:function(t){e.$set(e.PersonalMsg,"AccountAddress",t)},expression:"PersonalMsg.AccountAddress"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"联系电话：",prop:"Summary.TelePhone"}},[s("Input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.PersonalMsg.Summary.TelePhone,callback:function(t){e.$set(e.PersonalMsg.Summary,"TelePhone",t)},expression:"PersonalMsg.Summary.TelePhone"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"家庭电话：",prop:"FamilyPhone"}},[s("Input",{attrs:{placeholder:"请输入家庭电话"},model:{value:e.PersonalMsg.FamilyPhone,callback:function(t){e.$set(e.PersonalMsg,"FamilyPhone",t)},expression:"PersonalMsg.FamilyPhone"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"紧急联系人：",prop:"UrgentContact"}},[s("Input",{attrs:{placeholder:"请输入紧急联系人"},model:{value:e.PersonalMsg.UrgentContact,callback:function(t){e.$set(e.PersonalMsg,"UrgentContact",t)},expression:"PersonalMsg.UrgentContact"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"紧急联系人电话：",prop:"UrgentContactPhone"}},[s("Input",{attrs:{placeholder:"请输入紧急联系人电话"},model:{value:e.PersonalMsg.UrgentContactPhone,callback:function(t){e.$set(e.PersonalMsg,"UrgentContactPhone",t)},expression:"PersonalMsg.UrgentContactPhone"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"紧急联系人与本人关系：",prop:"RelationShip"}},[s("Input",{attrs:{placeholder:"请输入紧急联系人与本人关系"},model:{value:e.PersonalMsg.RelationShip,callback:function(t){e.$set(e.PersonalMsg,"RelationShip",t)},expression:"PersonalMsg.RelationShip"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:""}},[s("Input",{staticStyle:{opacity:"0",cursor:"context-menu"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"介绍人",prop:"IntroducerId"}},[s("Select",{attrs:{placeholder:"请选择介绍人",options:e.IntroducerList},model:{value:e.PersonalMsg.IntroducerId,callback:function(t){e.$set(e.PersonalMsg,"IntroducerId",t)},expression:"PersonalMsg.IntroducerId"}})],1)],1),s("Col",{attrs:{span:"12"}},[s("Form-item",{attrs:{label:"介绍人与本人关系",prop:"IntroducerRelationShip"}},[s("Input",{attrs:{placeholder:"请输入紧急联系人与本人关系"},model:{value:e.PersonalMsg.IntroducerRelationShip,callback:function(t){e.$set(e.PersonalMsg,"IntroducerRelationShip",t)},expression:"PersonalMsg.IntroducerRelationShip"}})],1)],1),s("Col",{attrs:{span:"24"}},[s("h2",{staticClass:"P-TA-C P-MB-10"},[s("span",{staticClass:"P-Required"},[e._v("附件")])]),s("p",{staticClass:"P-TA-C P-MB-20"},[e._v("包括学位证书、身份证、银行卡、合同等，仅支持JPG、PNG格式图片，大小不超过2M")]),s("div",{staticClass:"File-Wrap"},[s("div",e._l(e.PersonalMsg.Files,(function(t,a){return s("div",{key:a,staticClass:"File-Box",attrs:{"data-id":a}},[s("div",{staticClass:"Del-File"},[s("span",{on:{click:function(t){return e.DeleteLine(t,"Files")}}},[s("Icon",{staticStyle:{color:"#f10808"},attrs:{type:"ios-close-circle",size:"38"}})],1)]),s("div",{staticClass:"Img-Name",on:{click:function(s){return e.HandleView(t.FileUrl)}}},[s("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.ImageServer+"/"+t.FileUrl}})]),s("div",{staticClass:"fileName"},[s("Input",{model:{value:t.FileName,callback:function(s){e.$set(t,"FileName",s)},expression:"item.FileName"}})],1)])})),0),s("div",{staticStyle:{width:"130px"}},[s("Upload",{staticStyle:{"margin-top":"10px",width:"120px",height:"120px"},attrs:{multiple:"",type:"drag",action:e.UploadImgServer,accept:".jpg, .jpge, .png",format:["jpg","jpeg","png"],"max-size":2048,"show-upload-list":!1,"on-exceeded-size":e.HandleMaxSize,"on-format-error":e.HandleFormatError,"before-upload":e.HandleFileBefore,"on-success":e.HandleFilesSucc,data:{Dir:"userFile"}}},[s("Icon",{staticStyle:{height:"84px","margin-top":"30px",color:"#3399ff"},attrs:{type:"md-add",size:"52"}})],1)],1)])]),s("Col",{staticClass:"mt20 Col-Table",attrs:{span:"24"}},[s("h2",{staticClass:"P-TA-C P-MB-10"},[s("span",{staticClass:"P-Required"},[e._v("教育/培训经历")])]),s("table",{staticClass:"View-Table",staticStyle:{"font-size":"14px"},attrs:{cellspacing:"0",cellpadding:"8",width:"100%"}},[s("tr",{staticClass:"P-TA-C"},[s("th",[s("span",[e._v("起止时间")])]),s("th",[s("span",[e._v("学校/机构名称")])]),s("th",[s("span",[e._v("专业")])]),s("th",[s("span",[e._v("获得学位/证书")])]),s("th",{staticStyle:{width:"5%"}},[e._v(" 操作 ")])]),e.PersonalMsg.Educations.length?e._e():s("tr",{staticClass:"P-TA-C"},[s("td",{attrs:{colspan:"5"}},[e._v("暂无教育经历")])]),e._l(e.PersonalMsg.Educations,(function(t,a){return s("tr",{key:a,attrs:{"data-id":a}},[s("td",{staticClass:"P-TA-C"},[s("Date-picker",{staticStyle:{width:"45%",display:"inline-block"},attrs:{type:"date",placement:"top",placeholder:"选择开始日期"},model:{value:t.StartTime,callback:function(s){e.$set(t,"StartTime",s)},expression:"item.StartTime"}}),e._v(" - "),s("Date-picker",{staticStyle:{width:"45%",display:"inline-block"},attrs:{type:"date",placement:"top",placeholder:"选择结束日期"},model:{value:t.EndTime,callback:function(s){e.$set(t,"EndTime",s)},expression:"item.EndTime"}})],1),s("td",[s("Input",{attrs:{placeholder:"请输入学校/机构名称"},model:{value:t.School,callback:function(s){e.$set(t,"School",s)},expression:"item.School"}})],1),s("td",[s("Input",{attrs:{placeholder:"请输入专业"},model:{value:t.Profession,callback:function(s){e.$set(t,"Profession",s)},expression:"item.Profession"}})],1),s("td",[s("Input",{attrs:{placeholder:"请输入学位/证书"},model:{value:t.Education,callback:function(s){e.$set(t,"Education",s)},expression:"item.Education"}})],1),s("td",{staticClass:"P-TA-C",staticStyle:{width:"5%"}},[s("span",{staticClass:"Del-Operate",on:{click:function(t){return e.DeleteLine(t,"Educations")}}},[e._v("删除")])])])}))],2),s("Col",{staticStyle:{"text-align":"right"},attrs:{span:"24"}},[s("Button",{staticClass:"P-MT-10",attrs:{type:"primary"},on:{click:e.AddEducations}},[e._v("添加一行")])],1)],1),s("Col",{staticClass:"mt20 Col-Table",attrs:{span:"24"}},[s("h2",{staticClass:"P-TA-C P-MB-10"},[e._v("工作经历")]),s("table",{staticClass:"View-Table",staticStyle:{"font-size":"14px"},attrs:{cellspacing:"0",cellpadding:"8",width:"100%"}},[s("tr",[s("th",[e._v("起止日期")]),s("th",[e._v("单位名称")]),s("th",[e._v("职位")]),s("th",{staticStyle:{width:"5%"}},[e._v("操作")])]),e.PersonalMsg.Works.length?e._e():s("tr",{staticClass:"P-TA-C"},[s("td",{staticClass:"P-TA-C",attrs:{colspan:"4"}},[e._v("暂无工作经历")])]),e._l(e.PersonalMsg.Works,(function(t,a){return s("tr",{key:a,attrs:{"data-id":a}},[s("td",{staticClass:"P-TA-C"},[s("Date-picker",{staticStyle:{width:"45%",display:"inline-block"},attrs:{type:"date",placement:"top",placeholder:"选择开始日期"},model:{value:t.StartTime,callback:function(s){e.$set(t,"StartTime",s)},expression:"item.StartTime"}}),e._v(" - "),s("Date-picker",{staticStyle:{width:"45%",display:"inline-block"},attrs:{type:"date",placement:"top",placeholder:"选择结束日期"},model:{value:t.EndTime,callback:function(s){e.$set(t,"EndTime",s)},expression:"item.EndTime"}})],1),s("td",[s("Input",{staticStyle:{"border-width":"0px",outline:"none",width:"100%"},attrs:{placeholder:"请输入单位名称"},model:{value:t.CompanyName,callback:function(s){e.$set(t,"CompanyName",s)},expression:"item.CompanyName"}})],1),s("td",[s("Input",{staticStyle:{"border-width":"0px",outline:"none",width:"100%"},attrs:{placeholder:"请输入职位"},model:{value:t.PositionName,callback:function(s){e.$set(t,"PositionName",s)},expression:"item.PositionName"}})],1),s("td",{staticClass:"P-TA-C",staticStyle:{width:"5%"}},[s("span",{staticClass:"Del-Operate",on:{click:function(t){return e.DeleteLine(t,"Works")}}},[e._v("删除")])])])}))],2),s("Col",{staticClass:"P-TA-R",attrs:{span:"24"}},[s("Button",{staticClass:"P-MT-10",attrs:{type:"primary"},on:{click:e.AddWorks}},[e._v("添加一行")])],1)],1),s("Col",{staticClass:"P-TA-C P-MT-20",attrs:{span:"24"}},[s("Button",{staticClass:"P-MR-20",attrs:{type:"primary"},on:{click:e.SaveFile}},[e._v("保存")]),s("Button",{on:{click:e.ConfirmOut}},[e._v("退出系统")])],1)],1)],1),s("Modal",{attrs:{title:"修改初始密码",closable:!1,"mask-closable":!1},model:{value:e.ChangePwdModal,callback:function(t){e.ChangePwdModal=t},expression:"ChangePwdModal"}},[s("Form",{ref:"ModifyPwdMsg",attrs:{onsubmit:"return false",model:e.ModifyPwdMsg,rules:e.RuleValidate,"label-width":100}},[s("p",{staticClass:"P-MT-10 P-MB-20 P-Text-Error"},[e._v("欢迎使用弗睿网络科技（广州）有限公司- ERP系统！您当前使用的为初始密码，为了您的账号安全，请先修改密码")]),s("Form-item",{attrs:{label:"新密码：",prop:"NewPwd"}},[s("Input",{ref:"NewPwdInput",staticClass:"P-W-100-Percent",attrs:{type:"password",placeholder:"请输入长度为14~25位新密码"},on:{"on-enter":e.ValidateModifyPwd},model:{value:e.ModifyPwdMsg.NewPwd,callback:function(t){e.$set(e.ModifyPwdMsg,"NewPwd",t)},expression:"ModifyPwdMsg.NewPwd"}})],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:e.ValidateModifyPwd}},[e._v("提交")]),s("Button",{staticClass:"P-ML-10",attrs:{type:"default"},on:{click:e.ConfirmOut}},[e._v("退出系统")])],1)],1)],1)]),s("ShowBigPic",{ref:"ShowBigPic"})],1)},r=[],i=(s("02cc"),s("9660"),s("5d9d"),s("0a9c"),s("cee1"),s("1ff3"),s("6bf8"),s("b916"),s("eb83"),s("9bdd"),s("d088"),s("0b78"),s("3231")),o=s("064d"),n=s("46d7"),l=s("631e"),c=s("4a81"),d=s("d11d"),u=s("398e"),p=function(e){Object(n["a"])(s,e);var t=Object(l["a"])(s);function s(){var e;return Object(i["a"])(this,s),e=t.apply(this,arguments),e.UploadImgServer=e.$Server.Settings+e.$Api.UploadImage,e.headers={},e.RenderCity="",e.fileName="",e.ImageServer=e.$Server.File,e.MaritalStatusDrop=e.$Utils.GetEnumArr(e.$Enums.User.MaritalStatus),e.AccountNatureList=e.$Utils.GetEnumArr(e.$Enums.User.AccountNature),e.NationList=e.$Utils.GetEnumArr(e.$Enums.User.Nation),e.IntroducerList=[],e.LocationProvinceList=[],e.LocationCityList=[],e.UploadList=[],e.DefaultList=[],e.Language=[],e.PersonalMsg=new u["a"].PersonalMs,e.ChangePwdModal=!1,e.ModifyPwdMsg={OldPwd:"abc123456",NewPwd:""},e.RuleValidate={NewPwd:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:14,message:"密码长度不能小于14位"},{type:"string",max:25,message:"密码长度不能大于25位"}]},e.PostConfirmRule={"Summary.UserName":[{required:!0,message:"请输入姓名"}],DateOfBirth:[{type:"date",required:!0,message:"请选择出生日期",trigger:"change"}],Nation:[{required:!0,message:"请选择民族",trigger:"change"}],MaritalStatus:[{type:"number",required:!0,message:"请选择婚姻状态",trigger:"change"}],IdNumber:[{required:!0,message:"请填写身份证号码"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请填写正确的身份证号码"}],School:[{required:!0,message:"请输入毕业院校"}],Profession:[{required:!0,message:"请输入专业"}],AccountNature:[{type:"number",required:!0,message:"请选择户口性质",trigger:"change"}],LocationProvince:[{required:!0,message:"请选择户口所在省份",trigger:"change"}],LocationCity:[{required:!0,message:"请选择户口所在市",trigger:"change"}],NowAddress:[{required:!0,message:"请输入现住址"}],"Summary.TelePhone":[{required:!0,message:"请输入联系电话"},{pattern:e.$Pattern.Mobile,message:"请填写正确的手机号码"}],FamilyPhone:[{required:!0,message:"请输入家庭电话"},{pattern:e.$Pattern.Tel,message:"请填写正确的家庭电话"}],AccountAddress:[{required:!0,message:"请输入户籍地址"}],UrgentContact:[{required:!0,message:"请输入紧急联系人"}],UrgentContactPhone:[{required:!0,message:"请输入紧急联系人电话号码"},{pattern:e.$Pattern.Mobile,message:"请填写正确的手机号码"}],RelationShip:[{required:!0,message:"请输入与紧急联系人的关系"}]},e}return Object(o["a"])(s,[{key:"GetLocation",value:function(e){0!=this.LocationCityList.length&&this.$refs.locationCitySelc.clearSingleSelect(),this.LocationCityList=[],void 0!==e&&""!==e&&this.LocationProvinceList.length&&this.ChangePro(e)}},{key:"mounted",value:function(){var e=this;this.ProDropList(),this.GetIntroducer(),"undefined"!=typeof this.$route.query.IsCreate?(this.$route.query.IsCreate||this.GetDocument(),this.$set(this.PersonalMsg.Summary,"Id",JSON.parse(this.$Cookie.Get("frler_user")).UserId),this.$set(this.PersonalMsg.Summary,"UserName",JSON.parse(this.$Cookie.Get("frler_user")).UserName),this.$set(this.PersonalMsg.Summary,"UserCode",JSON.parse(this.$Cookie.Get("frler_user")).UserCode),this.$set(this.PersonalMsg.Summary,"WarehouseId",JSON.parse(this.$Cookie.Get("frler_user")).WarehouseId),this.$set(this.PersonalMsg.Summary,"Status",JSON.parse(this.$Cookie.Get("frler_user")).Status),this.$route.query.IsChange&&(this.$set(this,"ChangePwdModal",!0),this.$nextTick((function(){e.$refs.NewPwdInput.focus()})))):this.$Log.Out()}},{key:"ProDropList",value:function(){var e=this;this.$Request.Post({Server:this.$Server.Settings,Api:{Address:this.$Api.ProvincesDropList,Login:!0},Data:"",Callback:function(t){t.IsSuccess?(e.$set(e,"LocationProvinceList",t.Data.DropList),e.ChangePro(e.PersonalMsg.LocationProvince,!0)):e.$Request.Error(t)}})}},{key:"ChangePro",value:function(e,t){if(""!==e){this.LocationCityList=[],void 0==t&&this.$refs.locationCitySelc.clearSingleSelect(),this.$nextTick((function(){var t=this;this.$Request.Post({Server:this.$Server.Settings,Api:{Address:this.$Api.CityAreaDropList,Login:!0},Data:this.LocationProvinceList.filter((function(t){return t.Key===e}))[0].Value,Callback:function(e){e.IsSuccess?(t.$set(t,"LocationCityList",e.Data.DropList),t.RenderCity&&(t.$set(t.PersonalMsg,"LocationCity",t.RenderCity),t.RenderCity="")):t.$Request.Error(e)}})}))}}},{key:"GetIntroducer",value:function(){var e=this;this.$Request.Post({Server:this.$Server.Admin,Api:{Address:this.$Api.GetUserDropList,Login:!0},Data:"",Callback:function(t){t.IsSuccess?e.$set(e,"IntroducerList",t.Data.DropList):e.$Request.Error(t)}})}},{key:"GetDocument",value:function(){var e=this;this.$UI.Loading.Show();var t=JSON.parse(this.$Cookie.Get("frler_user")).UserId;this.$Request.Post({Server:this.$Server.Admin,Api:{Address:this.$Api.UserDocumentInfo,Login:!0},Data:t,Callback:function(t){e.$UI.Loading.Hide(),t.IsSuccess?e.$nextTick((function(){e.PersonalMsg=t.Data.Data,e.$set(e,"RenderCity",e.PersonalMsg.LocationCity),e.$set(e.PersonalMsg.Summary,"Sex",e.PersonalMsg.Summary.Sex.toString()),e.$set(e.PersonalMsg,"DateOfBirth",new Date(e.PersonalMsg.DateOfBirth)),e.$set(e,"Language",e.PersonalMsg.Language.split(",")),""!=e.PersonalMsg.HeaderImage&&(e.DefaultList.push({name:"head",url:e.PersonalMsg.HeaderImage}),e.UploadList=e.DefaultList)})):e.$Request.Error(t)}})}},{key:"HandleHeadSucc",value:function(e,t){e.IsSuccess?(this.$UI.Loading.Hide(),t.url=e.Data.Url,this.PersonalMsg.HeaderImage=e.Data.Url,this.UploadList=[],this.UploadList.push(t)):this.$Request.Error(e)}},{key:"HandleFilesSucc",value:function(e,t){this.$UI.Loading.Hide(),e.IsSuccess?this.PersonalMsg.Files.push({Id:0,FileUrl:t.response.Data.Url,FileName:t.name}):this.$Request.Error(e)}},{key:"HandleFormatError",value:function(e){this.$UI.Tips.Floating("warning","文件[".concat(e.name,"]格式不为JPG/JPGE/PNG，请检查"))}},{key:"HandleMaxSize",value:function(e){this.$UI.Tips.Floating("warning","文件".concat(e.name,"大小超过2M，请检查"))}},{key:"HandleBeforeUpload",value:function(e){var t=this.UploadList.length<1;return t?this.$UI.Loading.Show():this.$UI.Tips.Floating("warning","最多只能上传 1 张图片"),t}},{key:"HandleFileBefore",value:function(e){var t=this.PersonalMsg.Files.length<8;return t?this.$UI.Loading.Show():this.$UI.Tips.Floating("warning","最多只能上传 8 个附件。"),t}},{key:"HandleView",value:function(e){this.$refs.ShowBigPic.Trigger(e)}},{key:"HandleRemove",value:function(e){var t=this.$refs.Upload.fileList;this.$refs.Upload.fileList.splice(t.indexOf(e),1),this.UploadList=[],this.PersonalMsg.HeaderImage=""}},{key:"AddWorks",value:function(){var e=new u["a"].EmployeeWorks;this.PersonalMsg.Works.push(e)}},{key:"AddEducations",value:function(){var e=new u["a"].EmployeeEducation;this.PersonalMsg.Educations.push(e)}},{key:"DeleteLine",value:function(e,t){if("Educations"!==t||1!=this.PersonalMsg.Educations.length){var s=e.currentTarget.parentElement.parentElement.getAttribute("data-id");this.PersonalMsg[t].splice(s,1)}else this.$UI.Tips.Floating("warning","至少填写一次教育/培训经历")}},{key:"SaveFile",value:function(){var e=this;this.$refs["PersonalMsg"].validate((function(t){t?e.ValidePost():e.$UI.Tips.Floating("warning","请检查必填项")}))}},{key:"ValidePost",value:function(){var e=this,t=JSON.parse(JSON.stringify(this.PersonalMsg));if(""!=t.HeaderImage)if(0!=t.Files.length){for(var s in t.Files)if(""==t.Files[s].FileName)return void this.$UI.Tips.Floating("warning","请输入附件名称");var a=!0;if(0!=t.Educations.length)if(t.Educations.forEach((function(e){for(var t in e)if(!e[t]){if("Id"==t)continue;a=!1}})),a){for(var r in""==t.IntroducerId?t.Introducer=null:t.Introducer.Id=t.IntroducerId,t.DateOfBirth=this.$UI.Render.Date(t.DateOfBirth),t.Works)t.Works[r].StartTime=this.$UI.Render.Date(t.Works[r].StartTime),t.Works[r].EndTime=this.$UI.Render.Date(t.Works[r].EndTime);for(var i in t.Educations)t.Educations[i].StartTime=this.$UI.Render.Date(t.Educations[i].StartTime),t.Educations[i].EndTime=this.$UI.Render.Date(t.Educations[i].EndTime);t.Language=this.Language.join(","),this.$UI.Tips.Modal({Type:"confirm",Content:"是否确认无误并保存员工档案",Enter:!1,Callback:function(t){t&&e.PostFile()}})}else this.$UI.Tips.Floating("warning","请完善教育/培训经历！");else this.$UI.Tips.Floating("warning","请填写教育/培训经历")}else this.$UI.Tips.Floating("warning","请上传附件");else this.$UI.Tips.Floating("warning","请上传头像")}},{key:"PostFile",value:function(){var e=this,t=JSON.parse(JSON.stringify(this.PersonalMsg));t.DateOfBirth=this.$UI.Render.NewDate(this.PersonalMsg.DateOfBirth),this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Admin,Api:{Address:this.$route.query.IsCreate?this.$Api.UserDocumentCreate:this.$Api.UserDocumentModify,Login:!0},Data:t,Callback:function(t){e.$UI.Loading.Hide(),t.IsSuccess?(e.$UI.Tips.Floating("success","保存成功"),sessionStorage.setItem("Id",JSON.parse(e.$Cookie.Get("frler_user")).UserId),sessionStorage.setItem("AuditFile","false"),e.$router.replace({name:"ViewFile",query:{}})):e.$Request.Error(t)}})}},{key:"ValidateModifyPwd",value:function(){var e=this;this.$refs["ModifyPwdMsg"].validate((function(t){t?e.PostModifyPwd():e.$refs["NewPwdInput"].focus()}))}},{key:"PostModifyPwd",value:function(){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Admin,Api:{Address:this.$Api.UserChangePwd,Login:!0},Data:this.ModifyPwdMsg,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success","修改密码成功"),e.$set(e,"ChangePwdModal",!1)):e.$Request.Error(t),e.$UI.Loading.Hide()}})}},{key:"ConfirmOut",value:function(){var e=this;this.$UI.Tips.Modal({Type:"confirm",Content:"是否确定退出系统",Callback:function(t){t&&e.$Log.Out()}})}}]),s}(d["d"]);c["a"]([Object(d["e"])("PersonalMsg.LocationProvince")],p.prototype,"GetLocation",null),p=c["a"]([Object(d["a"])({name:"ModifyFile",components:{ShowBigPic:function(){return s.e("chunk-c0a1d894").then(s.bind(null,"6156"))}}})],p);var h=p,m=h,g=(s("ab00"),s("4023")),P=Object(g["a"])(m,a,r,!1,null,null,null);t["default"]=P.exports}}]);