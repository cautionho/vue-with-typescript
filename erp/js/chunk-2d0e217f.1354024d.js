(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e217f"],{"7cda":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"P-Inline-Block P-MR-10"},[o("Col",[o("Button",{attrs:{type:"primary"},on:{click:e.OpenModifyModal}},[e._v(e._s("Product"===e.Type?"添加产品规则":"添加备货规则"))]),o("Modal",{attrs:{title:e.ModalTitle,"mask-closable":!1,width:600},on:{"on-cancel":function(t){return e.ClearModal(0)}},model:{value:e.ShowModal,callback:function(t){e.ShowModal=t},expression:"ShowModal"}},[e.ShowModal?o("Form",{ref:"OperateForm",attrs:{model:"Product"===e.Type?e.OperateProductForm:e.OperateStockUpForm,rules:"Product"===e.Type?e.ProductRule:e.StockUpRule,name:"OperateForm",onsubmit:"return false","label-width":110}},["Product"===e.Type?o("Form-item",{attrs:{label:"海外仓库：",prop:"WarehouseId"}},[0===e.OperateProductForm.Id?o("Select",{staticClass:"P-W-100-Percent",attrs:{placeholder:"请选择海外仓库",options:e.DropAbroadWarehouse},model:{value:e.OperateProductForm.WarehouseId,callback:function(t){e.$set(e.OperateProductForm,"WarehouseId",t)},expression:"OperateProductForm.WarehouseId"}}):o("span",[e._v(e._s(e.WarehouseName))])],1):e._e(),"StockUp"===e.Type?o("Form-item",{attrs:{label:"海外仓库：",prop:"WarehouseId"}},[0===e.OperateStockUpForm.Id?o("Select",{staticClass:"P-W-100-Percent",attrs:{placeholder:"请选择海外仓库",options:e.DropAbroadWarehouse},model:{value:e.OperateStockUpForm.WarehouseId,callback:function(t){e.$set(e.OperateStockUpForm,"WarehouseId",t)},expression:"OperateStockUpForm.WarehouseId"}}):o("span",[e._v(e._s(e.WarehouseName))])],1):e._e(),"Product"===e.Type?o("Form-item",{attrs:{label:"日均销量阈值：",prop:"ThresholdValue"}},[o("InputNumber",{staticClass:"P-W-100-Percent",attrs:{placeholder:"请输入日均销量阈值"},model:{value:e.OperateProductForm.ThresholdValue,callback:function(t){e.$set(e.OperateProductForm,"ThresholdValue",t)},expression:"OperateProductForm.ThresholdValue"}})],1):o("Form-item",{attrs:{label:"日均销量范围：",prop:"SaleSlowQty"}},[o("Form-item",{staticClass:"P-W-49-Percent P-Inline-Block",attrs:{prop:"SaleSlowQty"}},[o("InputNumber",{staticClass:"P-W-100-Percent",attrs:{placeholder:"请输入最低销量"},model:{value:e.OperateStockUpForm.SaleSlowQty,callback:function(t){e.$set(e.OperateStockUpForm,"SaleSlowQty",t)},expression:"OperateStockUpForm.SaleSlowQty"}})],1),o("span",[e._v("-")]),o("Form-item",{staticClass:"P-W-49-Percent P-Inline-Block",attrs:{prop:"SaleHighQty"}},[o("InputNumber",{staticClass:"P-W-100-Percent",attrs:{placeholder:"请输入最高销量"},model:{value:e.OperateStockUpForm.SaleHighQty,callback:function(t){e.$set(e.OperateStockUpForm,"SaleHighQty",t)},expression:"OperateStockUpForm.SaleHighQty"}})],1)],1),"StockUp"===e.Type?o("Form-item",{attrs:{label:"备货天数：",prop:"StockupDays"}},[o("InputNumber",{staticClass:"P-W-100-Percent",attrs:{placeholder:"请输入备货天数"},model:{value:e.OperateStockUpForm.StockupDays,callback:function(t){e.$set(e.OperateStockUpForm,"StockupDays",t)},expression:"OperateStockUpForm.StockupDays"}})],1):e._e()],1):e._e(),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"primary"},on:{click:e.SubModal}},[e._v("提交")]),o("Button",{on:{click:function(t){return e.ClearModal(0)}}},[e._v("取消")])],1)],1)],1)],1)},a=[],s=(o("d9b9"),o("3231")),l=o("064d"),c=o("46d7"),u=o("631e"),p=o("4a81"),d=o("d11d"),i=o("1f41"),n=function(e){Object(c["a"])(o,e);var t=Object(u["a"])(o);function o(){var e;return Object(s["a"])(this,o),e=t.apply(this,arguments),e.WarehouseName="",e.ShowModal=!1,e.OperateProductForm=new i["a"].ModifyProductRulesForm,e.OperateStockUpForm=new i["a"].ModifyStockUpForm,e.ProductRule={WarehouseId:[{required:!0,message:"请选择海外仓库",trigger:"change",type:"number"}],ThresholdValue:[{required:!0,message:"请输入大于或等于0的数字或小数",min:1,type:"number"}]},e.StockUpRule={WarehouseId:[{required:!0,message:"请选择海外仓库",trigger:"change",type:"number"}],SaleSlowQty:[{required:!0,message:"请输入大于或等于0的数字或小数",min:1,type:"number"}],SaleHighQty:[{required:!0,message:"请输入大于或等于0的数字或小数",min:1,type:"number"}],StockupDays:[{required:!0,message:"请输入大于或等于0的数字或小数",min:1,type:"number"}]},e}return Object(l["a"])(o,[{key:"HandleResMsg",value:function(e){}},{key:"Trigger",value:function(e){var t;e.length>0?(this.WarehouseName=e[0].WarehouseName,t="Product"===this.Type?{WarehouseId:e[0].WarehouseId,ThresholdValue:e[0].ThresholdValue}:{Id:e[0].Id,WarehouseId:e[0].WarehouseId,SaleSlowQty:e[0].SaleSlowQty,SaleHighQty:e[0].SaleHighQty,StockupDays:e[0].StockupDays}):t="Product"===this.Type?new i["a"].ModifyProductRulesForm:new i["a"].ModifyStockUpForm;var o="Product"===this.Type?"OperateProductForm":"OperateStockUpForm";this.$set(this,o,t),this.$set(this,"ShowModal",!0)}},{key:"OpenModifyModal",value:function(){this.Trigger([])}},{key:"ClearModal",value:function(e){this.$set(this,"ShowModal",!1),this.$refs["OperateForm"].resetFields(),this.HandleResMsg(e)}},{key:"SubModal",value:function(){var e=this;this.$refs["OperateForm"].validate((function(t){if(t){var o,r=0;"Product"===e.Type?(o=JSON.parse(JSON.stringify(e.OperateProductForm)),r=o.Id,delete o.Id):o=JSON.parse(JSON.stringify(e.OperateStockUpForm)),e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Settings,Api:{Address:"Product"===e.Type?0===r?e.$Api.AddProductRule:e.$Api.ModifyProductRule:0===e.OperateStockUpForm.Id?e.$Api.AddStockUpRule:e.$Api.ModifyStockUpRule,Login:!0},Data:o,Callback:function(t){t.IsSuccess?e.$UI.Tips.Floating("success","".concat(e.ModalTitle,"成功")):e.$Request.Error(t),e.ClearModal(1)}})}}))}},{key:"ModalTitle",get:function(){var e="Product"===this.Type?this.OperateProductForm.WarehouseId:this.OperateStockUpForm.Id,t=0===e?"添加":"编辑",o="Product"===this.Type?"产品":"备货";return"".concat(t).concat(o,"规则")}}]),o}(d["d"]);p["a"]([Object(d["c"])()],n.prototype,"Type",void 0),p["a"]([Object(d["c"])()],n.prototype,"DropAbroadWarehouse",void 0),p["a"]([Object(d["b"])()],n.prototype,"HandleResMsg",null),n=p["a"]([Object(d["a"])({name:"ModifyAbroadWarehouseRules"})],n);var m=n,h=m,S=o("4023"),y=Object(S["a"])(h,r,a,!1,null,null,null);t["default"]=y.exports}}]);