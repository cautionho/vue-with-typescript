(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b19b4"],{2121:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Row",[r("Button",{staticClass:"P-MB-10",attrs:{type:"primary"},on:{click:function(t){return e.Trigger()}}},[e._v("导出记录")]),r("Modal",{attrs:{title:"导出记录","mask-closable":!1,width:"400"},on:{"on-cancel":function(t){e.ShoModal=!1}},model:{value:e.ShowModal,callback:function(t){e.ShowModal=t},expression:"ShowModal"}},[r("Form",{ref:"ExportForm",attrs:{onsubmit:"return false",model:e.ExportForm,rules:e.ExportFormRule,"label-width":100,name:"ExportForm"}},[r("Form-item",{attrs:{label:"发货仓：",prop:"WarehouseId"}},[r("Select",{attrs:{placeholder:"发货仓",options:e.DropWarehouseList},model:{value:e.ExportForm.WarehouseId,callback:function(t){e.$set(e.ExportForm,"WarehouseId",t)},expression:"ExportForm.WarehouseId"}})],1),r("FormItem",{attrs:{prop:"StartTime",label:"操作时间："}},[r("Date-picker",{staticStyle:{width:"90%"},attrs:{type:"datetime",placeholder:"开始时间"},model:{value:e.ExportForm.StartTime,callback:function(t){e.$set(e.ExportForm,"StartTime",t)},expression:"ExportForm.StartTime"}}),e._v(" - ")],1),r("FormItem",{attrs:{prop:"EndTime"}},[r("Date-picker",{staticStyle:{width:"90%"},attrs:{type:"datetime",placeholder:"结束时间"},model:{value:e.ExportForm.EndTime,callback:function(t){e.$set(e.ExportForm,"EndTime",t)},expression:"ExportForm.EndTime"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.PostExport()}}},[e._v("导出")]),r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.ShowModal=!1}}},[e._v("取消")])],1)],1)],1)},a=[],n=r("3231"),i=r("064d"),s=r("46d7"),l=r("631e"),p=r("4a81"),c=r("d11d"),m=r("1f41"),d=function(e){Object(s["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.ShowModal=!1,e.ExportForm=new m["a"].InventoryExportForm,e.ExportFormRule={WarehouseId:[{required:!0,message:"请选择发货仓",trigger:"change",type:"number"}],StartTime:[{required:!0,message:"请选择开始时间",trigger:"change",type:"date"}],EndTime:[{required:!0,message:"请选择结束时间",trigger:"change",type:"date"}]},e.MS_NUMBER=26784e5,e}return Object(i["a"])(r,[{key:"HandleResMsg",value:function(e){}},{key:"Trigger",value:function(e){this.ExportForm=new m["a"].InventoryExportForm,this.$refs["ExportForm"].resetFields(),this.ShowModal=!0}},{key:"PostExport",value:function(){var e=this;this.$refs["ExportForm"].validate((function(t){if(t){var r=new Date(e.ExportForm.StartTime).getTime(),o=new Date(e.ExportForm.EndTime).getTime();if(r>o)return void e.$UI.Tips.Floating("warning","开始时间不能大于结束时间");if((o-r)/864e5>31)return void e.$UI.Tips.Floating("warning","仅支持筛选31天的数据");e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Warehouse,Api:{Address:e.$Api.ExportInventoryCheckLog,Login:!0},Data:e.ExportForm,Callback:function(t){e.$UI.Loading.Hide(),t.IsSuccess?(e.$UI.Tips.Modal({Type:"confirm",Content:"创建导出库存盘亏盘盈记录成功。请到报表-导出管理模块查看目前正在进行的导出任务，并在导出成功后可以下载对应数据；",Callback:function(e){}}),e.$refs["ExportForm"].resetFields(),e.ShowModal=!1):e.$Request.Error(t)}})}}))}}]),r}(c["d"]);p["a"]([Object(c["c"])()],d.prototype,"DropWarehouseList",void 0),p["a"]([Object(c["b"])()],d.prototype,"HandleResMsg",null),d=p["a"]([Object(c["a"])({name:"ExportInventoryCheckRecord"})],d);var u=d,h=u,E=r("4023"),x=Object(E["a"])(h,o,a,!1,null,null,null);t["default"]=x.exports}}]);