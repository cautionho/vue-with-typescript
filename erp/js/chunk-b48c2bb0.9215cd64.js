(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b48c2bb0"],{"221a":function(t,e,a){},"786f":function(t,e,a){"use strict";var i=a("221a"),s=a.n(i);s.a},ddff:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"Container-Tabs",attrs:{title:"质检","mask-closable":!1,width:1100},on:{"on-cancel":function(e){return t.ClearModal(0)}},model:{value:t.ModifyModal,callback:function(e){t.ModifyModal=e},expression:"ModifyModal"}},[a("Row",[a("Tabs",{attrs:{name:"QuantityTestingTabs",type:"card",closable:!1}},[a("TabPane",{attrs:{label:"质检信息",name:"Base",tab:"QuantityTestingTabs"}},[t.SelecData.length>0?a("PaoBaseInfo",{attrs:{DetailInfoMsg:t.SelecData[0]}}):t._e(),a("Form",{ref:"QualityTestingForm",attrs:{"label-width":150,model:t.QualityTestingForm,rules:t.QualityTestingRule,inline:"",onsubmit:"return false"}},[a("FormItem",{staticClass:"P-W-300",attrs:{label:"实际到货数量：",prop:"ActualQuantity"}},[a("Input-number",{staticClass:"P-W-150",attrs:{min:0,placeholder:"实际到货数量"},model:{value:t.QualityTestingForm.ActualQuantity,callback:function(e){t.$set(t.QualityTestingForm,"ActualQuantity",e)},expression:"QualityTestingForm.ActualQuantity"}})],1),a("FormItem",{staticClass:"P-W-300",attrs:{label:"质检不合格数：",prop:"NoPassQuantity"}},[a("Input-number",{staticClass:"P-W-150",attrs:{min:0,placeholder:"质检不合格数"},model:{value:t.QualityTestingForm.NoPassQuantity,callback:function(e){t.$set(t.QualityTestingForm,"NoPassQuantity",e)},expression:"QualityTestingForm.NoPassQuantity"}})],1),a("FormItem",{staticClass:"P-W-100-Percent",attrs:{label:"备注："}},[a("Input",{attrs:{placeholder:"备注"},model:{value:t.QualityTestingForm.Remark,callback:function(e){t.$set(t.QualityTestingForm,"Remark",e)},expression:"QualityTestingForm.Remark"}})],1)],1),a("h1",{staticClass:"P-TA-C"},[t._v("质检图片")]),a("h2",{staticClass:"P-TA-C"},[t._v("仅支持jpg、jpeg、png格式，大小不超过2M；数量最多为5张")]),t._l(t.UploadList,(function(e,i){return a("div",{key:i,staticClass:"demo-upload-list"},["finished"===e.status?[a("img",{attrs:{src:t.$Server.File+"/"+e.url}}),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return t.ShowPic(e.url)}}}),t.SelecData.length>0&&2==t.SelecData[0].Status?a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){return t.HandleRemove(e)}}}):t._e()],1)]:[e.showProgress?a("Progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()]],2)})),a("Upload",{directives:[{name:"show",rawName:"v-show",value:t.UploadList.length<5&&t.SelecData.length>0&&2==t.SelecData[0].Status,expression:"UploadList.length < 5 && SelecData.length > 0 && SelecData[0].Status == 2"}],ref:"upload",staticStyle:{display:"inline-block",width:"120px",height:"120px"},attrs:{"show-upload-list":!1,"default-file-list":t.DefaultList,"on-success":t.HandleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.HandleFormatError,"on-exceeded-size":t.HandleMaxSize,"before-upload":t.HandleBeforeUpload,multiple:"",type:"drag",action:t.UploadImgServer}},[a("div",{staticStyle:{width:"120px",height:"120px","line-height":"120px"}},[a("Icon",{attrs:{type:"md-add",size:"30"}})],1)])],2),a("TabPane",{attrs:{label:"体积/重量",name:"QualityInspection",tab:"QuantityTestingTabs"}},[a("Form",{ref:"QualityTestingForm",attrs:{"label-width":100,model:t.QualityTestingForm,rules:t.QualityTestingRule,inline:"",onsubmit:"return false"}},[a("FormItem",{staticClass:"P-W-500",attrs:{label:"长度（cm）：",prop:"Length"}},[a("Input-number",{staticClass:"P-W-400",attrs:{min:0,placeholder:"长度（cm）"},model:{value:t.QualityTestingForm.Length,callback:function(e){t.$set(t.QualityTestingForm,"Length",e)},expression:"QualityTestingForm.Length"}})],1),a("FormItem",{staticClass:"P-W-500",attrs:{label:"宽度（cm）：",prop:"Width"}},[a("Input-number",{staticClass:"P-W-400",attrs:{min:0,placeholder:"宽度（cm）"},model:{value:t.QualityTestingForm.Width,callback:function(e){t.$set(t.QualityTestingForm,"Width",e)},expression:"QualityTestingForm.Width"}})],1),a("FormItem",{staticClass:"P-W-500",attrs:{label:"高度（cm）：",prop:"Height"}},[a("Input-number",{staticClass:"P-W-400",attrs:{min:0,placeholder:"高度（cm）"},model:{value:t.QualityTestingForm.Height,callback:function(e){t.$set(t.QualityTestingForm,"Height",e)},expression:"QualityTestingForm.Height"}})],1),a("FormItem",{staticClass:"P-W-500",attrs:{label:"毛重（g）：",prop:"GrossWeight"}},[a("Input-number",{staticClass:"P-W-400",attrs:{min:0,placeholder:"毛重（g）"},model:{value:t.QualityTestingForm.GrossWeight,callback:function(e){t.$set(t.QualityTestingForm,"GrossWeight",e)},expression:"QualityTestingForm.GrossWeight"}})],1),a("FormItem",{staticClass:"P-W-500",attrs:{label:"净重（g）：",prop:"NetWeight"}},[a("Input-number",{staticClass:"P-W-400",attrs:{min:0,placeholder:"净重（g）"},model:{value:t.QualityTestingForm.NetWeight,callback:function(e){t.$set(t.QualityTestingForm,"NetWeight",e)},expression:"QualityTestingForm.NetWeight"}})],1),a("FormItem",{staticClass:"P-W-500",attrs:{label:"整箱数：",prop:"PCS"}},[a("Input-number",{staticClass:"P-W-400",attrs:{min:0,placeholder:"整箱数"},model:{value:t.QualityTestingForm.PCS,callback:function(e){t.$set(t.QualityTestingForm,"PCS",e)},expression:"QualityTestingForm.PCS"}})],1),a("FormItem",{staticClass:"P-W-1000",attrs:{label:"备注：",prop:"WeightRemark"}},[a("Input",{attrs:{placeholder:"备注"},model:{value:t.QualityTestingForm.WeightRemark,callback:function(e){t.$set(t.QualityTestingForm,"WeightRemark",e)},expression:"QualityTestingForm.WeightRemark"}})],1)],1),a("h1",{staticClass:"P-TA-C"},[t._v("参考尺寸")]),t.SkuInfo.Sizes?a("div",{staticClass:"QA-Content",domProps:{innerHTML:t._s(t.SkuInfo.Sizes)}}):a("h2",{staticClass:"P-TA-C"},[t._v("暂无参考尺寸")])],1)],1)],1),a("ShowBigPic",{ref:"ShowBigPic"}),a("footer",{staticClass:"P-TA-R",attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.PostData}},[t._v("提交")]),a("Button",{on:{click:function(e){return t.ClearModal(0)}}},[t._v("取消")])],1)],1)},s=[],n=(a("5d9d"),a("cee1"),a("1ff3"),a("6bf8"),a("3231")),l=a("064d"),r=a("46d7"),o=a("631e"),u=a("4a81"),c=a("d11d"),g=a("c638"),m=function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.SelecData=[new g["a"].Pao],t.QAImgLength=0,t.UploadList=[],t.DefaultList=[],t.UploadImgServer=t.$Server.Settings+t.$Api.UploadImage,t.ModifyModal=!1,t.IsScan=!1,t.SkuInfo=new g["a"].SkuInfo,t.QualityTestingForm=new g["a"].QualityTestingForm,t.QualityTestingRule={ArrvialQuantity:[{type:"number",required:!0,message:"请输入实际到货数量",trigger:"change"}],NoPassQuantity:[{type:"number",required:!0,message:"请输入质检不合格数",trigger:"change"}],Length:[{type:"number",required:!0,message:"请输入长度",trigger:"change"}],Width:[{type:"number",required:!0,message:"请输入宽度",trigger:"change"}],Height:[{type:"number",required:!0,message:"请输入高度",trigger:"change"}],GrossWeight:[{type:"number",required:!0,message:"请输入毛重",trigger:"change"}],NetWeight:[{type:"number",required:!0,message:"请输入净重",trigger:"change"}],PCS:[{type:"number",required:!0,message:"请输入整箱数",trigger:"change"}]},t}return Object(l["a"])(a,[{key:"HandleResMsg",value:function(t,e){}},{key:"Trigger",value:function(t,e){this.IsScan=e,this.SelecData=JSON.parse(JSON.stringify(t)),this.GetSkuInfo(),this.QualityTestingForm.ActualQuantity=this.SelecData[0].ArrvialQuantity}},{key:"GetSkuInfo",value:function(){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.GetSkuInfoByCode,Login:!0},Data:this.SelecData[0].SkuCode,Callback:function(e){e.IsSuccess?(t.SkuInfo=JSON.parse(JSON.stringify(e.Data.Data)),t.ModifyModal=!0):t.$Request.Error(e),t.$UI.Loading.Hide()}})}},{key:"PostData",value:function(){var t=this;this.$refs["QualityTestingForm"].validate((function(e){if(e)if(t.QualityTestingForm.NoPassQuantity>t.QualityTestingForm.ActualQuantity)t.$UI.Tips.Floating("warning","质检不合格数量不能大于实际到货数量");else if(t.QualityTestingForm.NoPassQuantity>t.SelecData[0].ArrvialQuantity)t.$UI.Tips.Floating("warning","质检不合格数量不能超过发货数量");else{if(t.QualityTestingForm.Id=t.SelecData[0].Id,t.QualityTestingForm.ImageUrl=[],t.UploadList.length>0)for(var a in t.UploadList)t.QualityTestingForm.ImageUrl.push(t.UploadList[a].url);t.$UI.Loading.Show(),t.$Request.Post({Server:t.$Server.Purchase,Api:{Address:t.$Api.PurchaseArrivalOrderQA,Login:!0},Data:t.QualityTestingForm,Callback:function(e){e.IsSuccess?(t.$UI.Tips.Floating("success","提交质检成功"),t.ClearModal(1)):(t.$UI.Loading.Hide(),t.$Request.Error(e))}})}}))}},{key:"ClearModal",value:function(t){this.ModifyModal=!1,this.HandleResMsg(t,this.IsScan),this.UploadList=[],this.SkuInfo=new g["a"].SkuInfo}},{key:"ShowPic",value:function(t){this.$refs.ShowBigPic.Trigger(t)}},{key:"HandleRemove",value:function(t){this.UploadList.splice(this.UploadList.indexOf(t),1),this.QAImgLength=this.UploadList.length}},{key:"HandleSuccess",value:function(t,e){e.url=t.Data.Url,this.UploadList.push(e)}},{key:"HandleFormatError",value:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"文件".concat(t.name,"格式不正确，请上传 jpg 或 png 格式的图片。")})}},{key:"HandleMaxSize",value:function(t){this.$Notice.warning({title:"超出文件大小限制",desc:"文件".concat(t.name,"太大，不能超过 2M。")})}},{key:"HandleBeforeUpload",value:function(){this.QAImgLength+=1;var t=this.QAImgLength<6;return t||this.$Notice.warning({title:"最多只能上传 5 张图片。"}),t}}]),a}(c["d"]);u["a"]([Object(c["b"])()],m.prototype,"HandleResMsg",null),m=u["a"]([Object(c["a"])({name:"QuantityTesting",components:{PaoBaseInfo:function(){return a.e("chunk-726515b8").then(a.bind(null,"054c"))},ShowBigPic:function(){return a.e("chunk-c0a1d894").then(a.bind(null,"6156"))}}})],m);var d=m,h=d,p=(a("786f"),a("4023")),y=Object(p["a"])(h,i,s,!1,null,null,null);e["default"]=y.exports}}]);