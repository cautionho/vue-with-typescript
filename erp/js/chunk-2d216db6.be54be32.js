(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216db6"],{c3f6:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Modal",{attrs:{title:"选择SKU","mask-closable":!1,width:1400},on:{"on-cancel":function(t){e.ShowModal=!1}},model:{value:e.ShowModal,callback:function(t){e.ShowModal=t},expression:"ShowModal"}},[r("Row",[r("Col",{attrs:{span:"24"}},[r("Form",{ref:"SearchForm",attrs:{inline:"",onsubmit:"return false"},model:{value:e.SearchForm,callback:function(t){e.SearchForm=t},expression:"SearchForm"}},[r("FormItem",{staticClass:"P-MB-10"},[r("Dropdown",{attrs:{trigger:"custom",visible:e.AccurateSearch,placement:"bottom-start"}},[r("Button",{attrs:{type:"primary"},on:{click:e.TriggerSearch}},[e._v(" 精准搜索 "),r("Icon",{attrs:{type:"ios-arrow-down"}})],1),r("Col",{staticClass:"P-P-10",attrs:{slot:"list",span:"24"},slot:"list"},[r("Select",{staticClass:"P-W-200 P-ML-10",attrs:{placeholder:"平台",options:e.DropPlatformList},model:{value:e.SearchForm.WarehouseId,callback:function(t){e.$set(e.SearchForm,"WarehouseId",t)},expression:"SearchForm.WarehouseId"}}),r("Select",{staticClass:"P-W-200 P-ML-10",attrs:{placeholder:"开发员",options:e.DropDevUser},model:{value:e.SearchForm.DevUserId,callback:function(t){e.$set(e.SearchForm,"DevUserId",t)},expression:"SearchForm.DevUserId"}}),r("Select",{staticClass:"P-W-200 P-ML-10",attrs:{placeholder:"采购员",options:e.DropPurchaser},model:{value:e.SearchForm.Purchaser,callback:function(t){e.$set(e.SearchForm,"Purchaser",t)},expression:"SearchForm.Purchaser"}}),r("Select",{staticClass:"P-W-200 P-ML-10",attrs:{placeholder:"状态",options:e.DropStatus},model:{value:e.SearchForm.Status,callback:function(t){e.$set(e.SearchForm,"Status",t)},expression:"SearchForm.Status"}}),r("Select",{staticClass:"P-W-200 P-ML-10",attrs:{placeholder:"品牌",options:e.DropBrandList},model:{value:e.SearchForm.Purchaser,callback:function(t){e.$set(e.SearchForm,"Purchaser",t)},expression:"SearchForm.Purchaser"}})],1)],1),r("FormItem",{staticClass:"P-ML-10"},[r("Input",{staticClass:"P-W-400",attrs:{placeholder:"搜索关键字"},model:{value:e.SearchForm.SearchKey,callback:function(t){e.$set(e.SearchForm,"SearchKey",t)},expression:"SearchForm.SearchKey"}},[r("Select",{staticClass:"P-W-100 P-TA-L",attrs:{slot:"prepend",placeholder:"搜索关键词",options:e.SearchKeyTypeDrop},slot:"prepend",model:{value:e.SearchForm.SearchKeyType,callback:function(t){e.$set(e.SearchForm,"SearchKeyType",t)},expression:"SearchForm.SearchKeyType"}}),r("Button",{attrs:{slot:"append",type:"primary"},on:{click:e.SearchList},slot:"append"},[e._v("搜索")])],1)],1),r("Button",{attrs:{slot:"append",type:"primary"},slot:"append"},[e._v("搜索")]),r("Button",{attrs:{type:"warning"}},[e._v("重置")])],1)],1)],1),r("Col",{staticClass:"P-MB-10",attrs:{span:"24"}},[r("Table",{ref:"EnableSku",attrs:{columns:e.Cols,data:e.List,size:"small",stripe:"",height:500},on:{"on-selection-change":e.GetSelected}})],1),r("Col",{attrs:{span:"24"}},[r("Page",{attrs:{current:e.Pager.PageIndex,total:e.Pager.TotalItems,"page-size":e.Pager.PageSize,"page-size-opts":e.Pager.PageOpt,"show-total":"","show-sizer":"","show-elevator":""},on:{"on-change":e.ChangePage,"on-page-size-change":e.ChangePageSize}})],1)],1),r("ShowBigPic",{ref:"ShowBigPic"}),r("SkuDetail",{ref:"SkuDetail"}),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.HandleAddSku()}}},[e._v("添加")]),r("Button",{on:{click:function(t){e.ShowModal=!1}}},[e._v("取消")])],1)],1)},s=[],i=(r("6bf8"),r("5c62")),n=(r("b449"),r("5d83")),o=r("3231"),c=r("064d"),l=r("46d7"),u=r("631e"),h=r("4a81"),p=r("d11d"),S=r("db83"),d=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(o["a"])(this,r),e=t.apply(this,arguments),e.ShowModal=!1,e.DropPlatformList=e.$Utils.GetEnumArr(e.$Enums.Sales.Platform),e.DropBrandList=[],e.DropDevUser=[],e.DropPurchaser=[],e.DropStatus=e.$Utils.GetEnumArr(e.$Enums.Warehouse.SkuStatus),e.AccurateSearch=!1,e.Pager=new S["a"].Pager,e.SearchForm=new S["a"].EnableSpuSearch,e.SearchKeyTypeDrop=e.$Utils.GetEnumArr(e.$Enums.Product.SkuSearchType),e.Selected=[],e.List=[],e.Cols=[{type:"selection",width:60,align:"center"},{title:"图片",key:"DefaultImage",width:80,align:"center",render:function(t,r){return t("div",{style:{width:"45px",height:"45px",background:"url("+e.$Server.File+"/"+r.row.DefaultImage+") no-repeat",backgroundSize:"cover",margin:"0 auto",cursor:"pointer"},on:{click:function(){e.ShowPic(r.row.DefaultImage)}}})}},{title:"SKU编号/产品名",render:function(t,r){return t("Tooltip",{props:{content:r.row.SkuName,maxWidth:200},class:"P-W-100-Percent"},[t("p",{class:"P-MT-5 P-Pointer",on:{click:function(){e.$refs["SkuDetail"].Trigger(r.row.SkuCode)}}},r.row.SkuCode),t("p",{class:"P-MT-5"},r.row.SkuName)])}},{title:"品牌",key:"BrandName"},{title:"平台",key:"Platform",width:80,render:function(t,r){return t("span",e.$Enums.Sales.Platform[r.row.Platform])}},{title:"特性标签",key:"Attribute",width:100,render:function(e,t){return e("Tooltip",{props:{content:t.row.Attribute,maxWidth:200},class:"P-W-100-Percent"},[e("p",{class:"P-LINE-1 P-MT-5"},""===t.row.Attribute?"-":t.row.Attribute)])}},{title:"开发员/采购员",render:function(e,t){return e("div",[e("p",[e("span",{class:"P-Table-Tip P-BG-Primary"},"开"),e("span",t.row.DevUserName)]),e("p",[e("span",{class:"P-Table-Tip P-BG-Primary"},"采"),e("span",t.row.Purchaser)])])}},{title:"采购价",key:"PurchasePrice",width:100,render:function(e,t){return e("span",t.row.DefaultSupply.PurchasePrice?"￥".concat(t.row.DefaultSupply.PurchasePrice):"-")}},{title:"创建时间",width:160,render:function(t,r){return t("span",{},e.$UI.Render.Date(r.row.CreateTime,!0))}},{title:"状态",key:"Status",width:120,render:function(t,r){return t("span",e.$Enums.Warehouse.SkuStatus[r.row.Status-1])}}],e}return Object(c["a"])(r,[{key:"HandleResMsg",value:function(e,t){}},{key:"Trigger",value:function(){this.GetPoints(),this.List.length>0?this.CancelSelect():this.ResetList(),this.ShowModal=!0}},{key:"GetPoints",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this,e.t1=this,e.next=4,this.GetDropList(this.$Server.Purchase,this.$Api.BrandDropList,"");case 4:return e.t2=e.sent,e.t0.$set.call(e.t0,e.t1,"DropBrandList",e.t2),e.t3=this,e.t4=this,e.next=10,this.GetDropList(this.$Server.Admin,this.$Api.GetUserDropList,"开发员");case 10:return e.t5=e.sent,e.t3.$set.call(e.t3,e.t4,"DropDevUser",e.t5),e.t6=this,e.t7=this,e.next=16,this.GetDropList(this.$Server.Admin,this.$Api.GetUserDropList,"采购员");case 16:e.t8=e.sent,e.t6.$set.call(e.t6,e.t7,"DropPurchaser",e.t8);case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"GetDropList",value:function(e,t,r){var a=this;return new Promise((function(s){a.$Request.Post({Server:e,Api:{Address:t},Data:r,Callback:function(e){e.IsSuccess||a.$Request.Error(e),s(e.Data.DropList||[])}})}))}},{key:"GetList",value:function(){var e=this;this.$UI.Loading.Show(),this.$set(this,"List",[]),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.SkuGetEnableList,Login:!0},Data:{PageIndex:this.Pager.PageIndex,PageSize:this.Pager.PageSize,Conditions:this.SearchForm},Callback:function(t){var r;t.IsSuccess?(e.Pager.TotalItems=t.Data.PageModel.TotalItems,(r=e.List).push.apply(r,Object(i["a"])(t.Data.PageModel.Items))):e.$Request.Error(t);e.$UI.Loading.Hide()}})}},{key:"TriggerSearch",value:function(){this.$set(this,"AccurateSearch",!this.AccurateSearch)}},{key:"GetSelected",value:function(e){this.$set(this,"Selected",e)}},{key:"CancelSelect",value:function(){this.$refs["EnableSku"].selectAll(!1),this.$set(this,"Selected",[])}},{key:"SearchList",value:function(){this.$set(this,"AccurateSearch",!1),this.$set(this.Pager,"PageIndex",1),this.GetList()}},{key:"ResetList",value:function(){this.$set(this,"AccurateSearch",!1),this.$set(this,"Pager",new S["a"].Pager),this.$set(this,"SearchForm",new S["a"].EnableSpuSearch),this.GetList()}},{key:"ChangePage",value:function(e){this.$set(this.Pager,"PageIndex",e),this.GetList()}},{key:"ChangePageSize",value:function(e){this.$set(this.Pager,"PageSize",e),this.GetList()}},{key:"ShowPic",value:function(e){this.$refs.ShowBigPic.Trigger(e)}},{key:"HandleAddSku",value:function(){this.Selected.length<1?this.$UI.Tips.Floating("warning","请选择SKU"):this.EmitSkuRes()}},{key:"EmitSkuRes",value:function(){this.HandleResMsg(this.Selected),this.$set(this,"List",[]),this.$set(this,"ShowModal",!1),this.CancelSelect()}}]),r}(p["d"]);h["a"]([Object(p["b"])()],d.prototype,"HandleResMsg",null),d=h["a"]([Object(p["a"])({name:"EnableSpu",components:{ShowBigPic:function(){return r.e("chunk-c0a1d894").then(r.bind(null,"6156"))},SkuDetail:function(){return r.e("chunk-563d7f8d").then(r.bind(null,"ce1f"))}}})],d);var P=d,m=P,g=r("4023"),f=Object(g["a"])(m,a,s,!1,null,null,null);t["default"]=f.exports}}]);