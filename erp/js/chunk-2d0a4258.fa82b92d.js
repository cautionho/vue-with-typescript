(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4258"],{"04ca":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Row",{staticClass:"P-Inline-Block"},[e.Powers.SubmitToDeal?s("Button",{staticClass:"P-MB-10 P-MR-10",attrs:{type:"primary"},on:{click:function(t){return e.OpenModal(1)}}},[e._v("提交美工处理")]):e._e(),e.Powers.BackToEdit?s("Button",{staticClass:"P-MB-10 P-MR-10",attrs:{type:"primary"},on:{click:function(t){return e.OpenModal(2)}}},[e._v("需求退回修改")]):e._e(),e.Powers.AuditRequire?s("Button",{staticClass:"P-MB-10 P-MR-10",attrs:{type:"primary"},on:{click:function(t){return e.OpenModal(3)}}},[e._v("审核")]):e._e(),e.Powers.ChangeAritist?s("Button",{staticClass:"P-MB-10 P-MR-10",attrs:{type:"primary"},on:{click:function(t){return e.OpenModal(4)}}},[e._v("更换美工")]):e._e(),s("Modal",{attrs:{title:""+["提交美工处理","需求退回修改","审核","更换美工"][e.ModalType-1],"mask-closable":!1,width:700},on:{"on-cancel":function(t){return e.ChangeMsg(!1)}},model:{value:e.ShowModal,callback:function(t){e.ShowModal=t},expression:"ShowModal"}},[s("Form",{attrs:{onsubmit:"return false","label-width":100}},[1===e.ModalType||4===e.ModalType?s("FormItem",{attrs:{label:"更换美工："}},[s("Select",{attrs:{placeholder:"美工",options:e.DropOperateUserList},model:{value:e.OperateUser,callback:function(t){e.OperateUser=t},expression:"OperateUser"}})],1):e._e(),2===e.ModalType?s("FormItem",{attrs:{label:"备注："}},[s("Input",{ref:"Remark",attrs:{placeholder:"备注",type:"textarea",autosize:{minRows:4,maxRows:5}},model:{value:e.Remark,callback:function(t){e.Remark=t},expression:"Remark"}})],1):e._e(),3===e.ModalType?s("FormItem",{attrs:{label:"审核意见："}},[s("RadioGroup",{staticClass:"P-W-100-Percent",model:{value:e.IsPass,callback:function(t){e.IsPass=t},expression:"IsPass"}},[s("Radio",{attrs:{label:"1"}},[e._v("通过")]),s("Radio",{attrs:{label:"0"}},[e._v("图片退回修改")])],1),s("Input",{directives:[{name:"show",rawName:"v-show",value:"0"===e.IsPass,expression:"IsPass === '0'"}],ref:"Remark",staticClass:"P-W-100-Percent",attrs:{placeholder:"备注",type:"textarea",autosize:{minRows:4,maxRows:5}},model:{value:e.Remark,callback:function(t){e.Remark=t},expression:"Remark"}})],1):e._e()],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.SubModal(e.ModalType)}}},[e._v("提交")]),s("Button",{on:{click:function(t){return e.ClearModal(0)}}},[e._v("返回")])],1)],1)],1)},r=[],o=(s("d9b9"),s("76bb"),s("6ed5"),s("cee1"),s("5c62")),i=s("3231"),n=s("064d"),l=s("46d7"),c=s("631e"),u=s("4a81"),p=s("d11d"),d=function(e){Object(l["a"])(s,e);var t=Object(c["a"])(s);function s(){var e;return Object(i["a"])(this,s),e=t.apply(this,arguments),e.ModalType=0,e.IsPass="1",e.OperateUser="",e.Remark="",e.Selected=[],e.Type=0,e.ShowModal=!1,e}return Object(n["a"])(s,[{key:"HandleResMsg",value:function(e){}},{key:"Trigger",value:function(e,t){var s;void 0!==t&&(this.ModalType=t),1!==this.ModalType||0!==e.length&&!e.some((function(e){return 1!==e.ProcessStatus}))?2!==this.ModalType||0!==e.length&&!e.some((function(e){return 2!==e.ProcessStatus}))?3!==this.ModalType||0!==e.length&&!e.some((function(e){return 3!==e.ProcessStatus}))?4!==this.ModalType||0!==e.length&&!e.some((function(e){return 1!==e.ProcessStatus&&2!==e.ProcessStatus}))?((s=this.Selected).splice.apply(s,[0,this.Selected.length].concat(Object(o["a"])(e))),this.ShowModal=!0):this.$UI.Tips.Floating("warning","请选择状态为新建或待处理的作图需求进行下载更换美工操作"):this.$UI.Tips.Floating("warning","请选择状态为已上传的作图需求进行审核操作"):this.$UI.Tips.Floating("warning","请选择状态为待处理的作图需求进行需求退回修改操作"):this.$UI.Tips.Floating("warning","请选择状态为新建的作图需求进行提交美工处理操作")}},{key:"OpenModal",value:function(e){this.ModalType=e,this.HandleResMsg(2)}},{key:"ClearModal",value:function(e){this.ShowModal=!1,this.ModalType=0,this.IsPass="1",this.OperateUser="",this.Remark="",this.Selected.splice(0),this.HandleResMsg(e)}},{key:"SubModal",value:function(e){var t=this;if(1!==e&&4!==e||""!==this.OperateUser){var s=4===e?{Id:this.Selected.map((function(e){return e.Id})),OperateUserId:this.OperateUser}:{PhotoProcessRequestIds:this.Selected.map((function(e){return e.Id})),ChangeArtistId:this.OperateUser,IsPass:"1"===this.IsPass,Remark:"1"===this.IsPass?"":this.Remark,File:""};this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:[this.$Api.ToArtistProcess,this.$Api.DemandReturn,this.$Api.AuditDrawRequset,this.$Api.ChangeArtist][e-1],Login:!0},Data:s,Callback:function(s){t.$UI.Loading.Hide(),s.IsSuccess?(t.$UI.Tips.Floating("success","".concat(["提交美工处理","需求退回修改","审核","更换美工"][e-1],"成功")),t.ClearModal(1)):t.$Request.Error(s)}})}else this.$UI.Tips.Floating("warning","请选择美工")}}]),s}(p["d"]);u["a"]([Object(p["c"])()],d.prototype,"Powers",void 0),u["a"]([Object(p["c"])()],d.prototype,"DropOperateUserList",void 0),u["a"]([Object(p["b"])()],d.prototype,"HandleResMsg",null),d=u["a"]([Object(p["a"])({name:"DrawingRequirementsOperator"})],d);var h=d,m=h,M=s("4023"),P=Object(M["a"])(m,a,r,!1,null,null,null);t["default"]=P.exports}}]);