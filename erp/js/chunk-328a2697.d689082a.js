(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-328a2697"],{2311:function(e,t,a){"use strict";var r=a("40cc"),o=a.n(r);o.a},"40cc":function(e,t,a){},fc6f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"P-Inline-Block "},[a("Col",[a("Button",{staticClass:"P-MR-10 P-MB-10",attrs:{type:"primary"},on:{click:e.OpenModifyBrandModal}},[e._v("添加品牌")]),a("Modal",{attrs:{title:e.SelecData.length>0?"编辑品牌":"添加品牌","mask-closable":!1,width:800},on:{"on-cancel":function(t){return e.ClearModal(0)}},model:{value:e.ModifyBrandModal,callback:function(t){e.ModifyBrandModal=t},expression:"ModifyBrandModal"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("Form",{ref:"OperateForm",attrs:{model:e.OperateForm,rules:e.OperateFormRule,name:"OperateForm",onsubmit:"return false","label-width":110}},[a("Form-item",{attrs:{label:"品牌名称",prop:"BrandName"}},[a("Input",{ref:"OperateFormName",attrs:{placeholder:"用户名称",name:"BrandName"},model:{value:e.OperateForm.BrandName,callback:function(t){e.$set(e.OperateForm,"BrandName",t)},expression:"OperateForm.BrandName"}})],1),a("Form-item",{attrs:{label:"网址"}},[a("Input",{attrs:{placeholder:"品牌网址"},model:{value:e.OperateForm.BrandUrl,callback:function(t){e.$set(e.OperateForm,"BrandUrl",t)},expression:"OperateForm.BrandUrl"}})],1),a("Form-item",{attrs:{label:"备注"}},[a("Input",{attrs:{placeholder:"备注"},model:{value:e.OperateForm.Remark,callback:function(t){e.$set(e.OperateForm,"Remark",t)},expression:"OperateForm.Remark"}})],1)],1)],1),a("Col",{staticClass:"P-TA-C",attrs:{span:"8"}},[e._l(e.UploadList,(function(t,r){return a("div",{key:r,staticClass:"demo-upload-list",staticStyle:{width:"145px",height:"145px",margin:"0 auto"}},["Finished"===t.Status?[a("img",{attrs:{src:e.$Server.File+"/"+t.Url,height:"145",width:"145"}}),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return e.ShowPic(t.Url)}}}),a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){return e.HandleRemove(t)}}})],1)]:[t.showProgress?a("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)})),a("Upload",{directives:[{name:"show",rawName:"v-show",value:e.IsUpload,expression:"IsUpload"}],ref:"Upload",staticStyle:{display:"inline-block",width:"145px",height:"145px"},attrs:{"show-upload-list":!1,"on-success":e.HandleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.HandleFormatError,"on-exceeded-size":e.HandleMaxSize,type:"drag",action:e.UploadImgServer}},[a("div",{staticStyle:{height:"145px"}},[a("Icon",{staticStyle:{"margin-top":"30px"},attrs:{type:"camera",size:"20"}}),a("p",[e._v("上传品牌LOGO")]),a("p",{staticStyle:{"padding-bottom":"12px"}},[e._v("仅支持jpg、jpeg、png图片格式，大小不超过2M")])],1)])],2)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.SubModal()}}},[e._v("提交")]),a("Button",{on:{click:function(t){return e.ClearModal(0)}}},[e._v("取消")])],1)],1)],1)],1)},o=[],n=(a("cee1"),a("1ff3"),a("3231")),s=a("064d"),i=a("46d7"),l=a("631e"),d=a("4a81"),c=a("d11d"),p=a("eb49"),u=function(e){Object(i["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.UploadList=[],e.IsUpload=!0,e.SelecData=[],e.ModifyBrandModal=!1,e.UploadImgServer=e.$Server.Settings+e.$Api.UploadImage,e.OperateForm=new p["a"].BrandManageList,e.OperateFormRule={BrandName:[{required:!0,message:"请输入品牌名称"}]},e}return Object(s["a"])(a,[{key:"HandleResMsg",value:function(e){}},{key:"Trigger",value:function(e){this.SelecData=JSON.parse(JSON.stringify(e)),this.UploadList.splice(0,this.UploadList.length),this.SelecData.length>0?(this.OperateForm=JSON.parse(JSON.stringify(this.SelecData[0])),this.UploadList.push({Status:"Finished",Url:this.OperateForm.BrandLogo}),this.IsUpload=!1):(this.OperateForm=new p["a"].BrandManageList,this.IsUpload=!0),this.$nextTick((function(){this.$set(this,"ModifyBrandModal",!0)}))}},{key:"OpenModifyBrandModal",value:function(){this.HandleResMsg(2)}},{key:"ClearModal",value:function(e){this.$set(this,"ModifyBrandModal",!1),this.HandleResMsg(e)}},{key:"HandleRemove",value:function(e){0!=this.UploadList.length&&this.UploadList.splice(0,this.UploadList.length),this.OperateForm.BrandLogo="",this.IsUpload=!0}},{key:"HandleSuccess",value:function(e,t){1==e.IsSuccess?(t.Url=e.Data.Url,this.OperateForm.BrandLogo=e.Data.Url,this.UploadList.push(t),this.IsUpload=!1):this.$Request.Error(e)}},{key:"HandleFormatError",value:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件".concat(e.name,"格式不正确，请上传 jpg、 png 或 jpeg 格式的图片。")})}},{key:"HandleMaxSize",value:function(e){this.$Notice.warning({title:"超出文件大小限制",desc:"文件".concat(e.name,"太大，不能超过 2M。")})}},{key:"SubModal",value:function(){var e=this;this.$refs["OperateForm"].validate((function(t){if(t){if(""===e.OperateForm.BrandLogo)return void e.$UI.Tips.Floating("warning","请上传品牌LOGO");0===e.SelecData.length&&(e.OperateForm.CreateTime=new Date),e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Purchase,Api:{Address:e.SelecData.length>0?e.$Api.BrandModify:e.$Api.BrandCreate,Login:!0},Data:e.OperateForm,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success",e.SelecData.length>0?"修改品牌成功":"添加品牌成功"),e.ClearModal(1)):e.$Request.Error(t)}})}}))}}]),a}(c["d"]);d["a"]([Object(c["b"])()],u.prototype,"HandleResMsg",null),u=d["a"]([Object(c["a"])({name:"ModifyBrand"})],u);var m=u,h=m,f=(a("2311"),a("4023")),g=Object(f["a"])(h,r,o,!1,null,null,null);t["default"]=g.exports}}]);