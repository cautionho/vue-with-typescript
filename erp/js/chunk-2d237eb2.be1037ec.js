(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d237eb2"],{fcba:function(e,o,t){"use strict";t.r(o);var r=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"P-Inline-Block"},[t("Col",[t("Button",{attrs:{type:"primary"},on:{click:function(o){return e.OpenModal({Type:0})}}},[e._v("添加职位")]),t("Modal",{attrs:{title:["添加职位","编辑职位"][e.ModalType],"mask-closable":!1,width:800},on:{"on-cancel":function(o){return e.ClearModal(!1)}},model:{value:e.IsShowModal,callback:function(o){e.IsShowModal=o},expression:"IsShowModal"}},[t("Form",{ref:"OperateForm",attrs:{model:e.OperateForm,rules:e.OperateFormRule,name:"OperateForm",onsubmit:"return false","label-width":110}},[t("Form-item",{attrs:{label:"职位名称",prop:"Name"}},[t("Input",{ref:"Name_Ipt",attrs:{placeholder:"职位名称",name:"wareNameInput"},model:{value:e.OperateForm.Name,callback:function(o){e.$set(e.OperateForm,"Name",o)},expression:"OperateForm.Name"}})],1),t("Form-item",{attrs:{label:"角色",prop:"RoleId"}},[t("Select",{attrs:{placeholder:"角色(可多选)",multiple:"",options:e.PropDropPosition},model:{value:e.OperateForm.RoleId,callback:function(o){e.$set(e.OperateForm,"RoleId",o)},expression:"OperateForm.RoleId"}})],1),t("Form-item",{attrs:{label:"待办事项",prop:"ToDoId"}},[t("F-SelectGroup",{attrs:{placeholder:"待办事项(可多选)",options:e.PropDropCategoryTree,optionTitleKey:"CategoryName",optionChildKey:"ChildNods",optionValKey:"Id",optionKey:"ItemName",multiple:!0},model:{value:e.OperateForm.ToDoId,callback:function(o){e.$set(e.OperateForm,"ToDoId",o)},expression:"OperateForm.ToDoId"}})],1),t("Form-item",{attrs:{label:"备注"}},[t("Input",{ref:"OperateFormRemark",attrs:{autosize:{minRows:4,maxRows:4},type:"textarea",placeholder:"备注"},model:{value:e.OperateForm.Remark,callback:function(o){e.$set(e.OperateForm,"Remark",o)},expression:"OperateForm.Remark"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary"},on:{click:e.CurSubModal}},[e._v("提交")]),t("Button",{on:{click:function(o){return e.ClearModal(!1)}}},[e._v("取消")])],1)],1)],1)],1)},a=[],l=(t("02cc"),t("5e8c"),t("0a9c"),t("76bb"),t("9b6f"),t("3231")),n=t("064d"),i=t("46d7"),s=t("631e"),p=t("4a81"),c=t("d11d"),m=t("398e"),u=function(e){Object(i["a"])(t,e);var o=Object(s["a"])(t);function t(){var e;return Object(l["a"])(this,t),e=o.apply(this,arguments),e.IsShowModal=!1,e.OperateForm=new m["a"].PositionTableList,e.ModalType=0,e.OperateFormRule={Name:[{required:!0,message:"请输入职位名称"}],RoleId:[{required:!0,type:"array",min:1,message:"请选择角色",trigger:"change"}],ToDoId:[{required:!0,type:"array",min:1,message:"请选择绑定待办事项",trigger:"change"}]},e}return Object(n["a"])(t,[{key:"EmitChange",value:function(e,o){}},{key:"OpenModal",value:function(e){var o=this,t=e.Type,r=e.Selected;this.ModalType=t,this.$nextTick((function(){r&&o.$set(o,"OperateForm",r),o.IsShowModal=!0,o.$nextTick((function(){o.$refs["Name_Ipt"].focus()}))}))}},{key:"ClearModal",value:function(e){this.$set(this,"OperateForm",new m["a"].PositionTableList),this.$refs["OperateForm"].resetFields(),this.IsShowModal=!1,this.EmitChange(e)}},{key:"CurSubModal",value:function(){var e=this;this.$refs["OperateForm"].validate((function(o){if(o){var t=e.PropDropPosition.filter((function(o){return e.OperateForm.RoleId.includes(o.Value)}));e.$set(e.OperateForm,"RoleId",t.map((function(e){return e.Value}))),e.$set(e.OperateForm,"RoleName",t.map((function(e){return e.Key})).join(",")),e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Admin,Api:{Address:[e.$Api.PositionCreate,e.$Api.PositionModify][e.ModalType],Login:!0},Data:e.OperateForm,Callback:function(o){o.IsSuccess?(e.$UI.Tips.Floating("success",["添加岗位成功","编辑岗位成功"][e.ModalType]),e.ClearModal(!0)):(e.$UI.Loading.Hide(),e.$Request.Error(o))}})}}))}}]),t}(c["d"]);p["a"]([Object(c["c"])()],u.prototype,"PropDropPosition",void 0),p["a"]([Object(c["c"])()],u.prototype,"PropDropCategoryTree",void 0),p["a"]([Object(c["b"])()],u.prototype,"EmitChange",null),u=p["a"]([Object(c["a"])({name:"ModifyPost"})],u);var d=u,f=d,O=t("4023"),h=Object(O["a"])(f,r,a,!1,null,null,null);o["default"]=h.exports}}]);