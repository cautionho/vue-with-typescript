(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3201"],{"019c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"P-Inline-Block "},[a("Col",[a("Button",{staticClass:"mt10 mr10",attrs:{type:"primary"},on:{click:e.OpenModal}},[e._v("查看日志")]),a("Modal",{attrs:{title:"查看日志","mask-closable":!1,width:"1300"},on:{"on-cancel":e.ClearModal},model:{value:e.IsShowModal,callback:function(t){e.IsShowModal=t},expression:"IsShowModal"}},[a("Row",[a("Col",{attrs:{span:24}},[a("Form",{ref:"OperateForm",staticClass:"P-MB-10",attrs:{model:e.OperateForm,onsubmit:"return false",inline:""}},[a("Dropdown",{attrs:{trigger:"custom",visible:e.AccurateSearch,placement:"bottom-start"}},[a("Button",{attrs:{type:"primary"},on:{click:e.TriggerSearch}},[e._v(" 精准搜索 "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("Col",{staticClass:"P-P-10",attrs:{slot:"list",span:"24"},slot:"list"},[a("Select",{staticClass:"P-W-200 P-MR-10",attrs:{placeholder:"筛选操作人",options:e.DropUser},model:{value:e.OperateForm.UserId,callback:function(t){e.$set(e.OperateForm,"UserId",t)},expression:"OperateForm.UserId"}}),a("Select",{staticClass:"P-W-200 P-MR-10",attrs:{placeholder:"筛选操作",options:e.DropOperationType},model:{value:e.OperateForm.OperationType,callback:function(t){e.$set(e.OperateForm,"OperationType",t)},expression:"OperateForm.OperationType"}}),a("Select",{staticClass:"P-W-200 P-MR-10",attrs:{placeholder:"筛选店铺",options:e.PropStoreDrop},model:{value:e.OperateForm.StoreId,callback:function(t){e.$set(e.OperateForm,"StoreId",t)},expression:"OperateForm.StoreId"}}),a("Select",{staticClass:"P-W-200 P-MR-10",attrs:{placeholder:"筛选结果",options:e.DropStatus},model:{value:e.OperateForm.Status,callback:function(t){e.$set(e.OperateForm,"Status",t)},expression:"OperateForm.Status"}}),a("span",{staticClass:"P-ML-10 P-Inline-Block"},[e._v("操作时间：")]),a("DatePicker",{staticClass:"P-W-200 P-ML-10",attrs:{type:"datetime",placeholder:"筛选开始时间"},model:{value:e.OperateForm.StartTime,callback:function(t){e.$set(e.OperateForm,"StartTime",t)},expression:"OperateForm.StartTime"}}),a("span",{staticClass:"P-ML-5 P-Inline-Block"},[e._v("-")]),a("DatePicker",{staticClass:"P-W-200 P-ML-10",attrs:{type:"datetime",placeholder:"筛选结束时间"},model:{value:e.OperateForm.EndTime,callback:function(t){e.$set(e.OperateForm,"EndTime",t)},expression:"OperateForm.EndTime"}})],1)],1),a("FormItem",{staticClass:"P-MB-0 P-ML-10"},[a("Input",{staticClass:"P-W-300",attrs:{placeholder:"搜索关键字"},on:{"on-enter":e.SearchList},model:{value:e.OperateForm.SearchKey,callback:function(t){e.$set(e.OperateForm,"SearchKey",t)},expression:"OperateForm.SearchKey"}},[a("Button",{attrs:{slot:"append",type:"primary"},on:{click:e.SearchList},slot:"append"},[e._v("搜索")])],1)],1),a("FormItem",{staticClass:"P-MB-0"},[a("Button",{attrs:{type:"warning"},on:{click:e.ResetList}},[e._v("重置")])],1)],1)],1),a("Col",{attrs:{span:24}},[a("Table",{ref:"TableList",attrs:{height:550,columns:e.TableRowHead,data:e.TableList,size:"small",stripe:""}})],1),a("Col",{attrs:{span:24}},[a("Page",{ref:"Pager",staticClass:"P-MT-10",attrs:{current:e.Pager.PageIndex,total:e.Pager.TotalItems,"page-size":e.Pager.PageSize,"page-size-opts":e.Pager.PageOpt,"show-total":"","show-sizer":"","show-elevator":""},on:{"on-change":e.SetChangePageTable,"on-page-size-change":e.SetChangePageSizeTable}})],1)],1),a("footer",{staticClass:"P-TA-R",attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.ClearModal}},[e._v("返回")])],1)],1)],1)],1)},s=[],o=(a("3fa9"),a("cee1"),a("e8f2"),a("5c62")),i=a("3231"),n=a("064d"),l=a("46d7"),c=a("631e"),p=a("4a81"),u=a("d11d"),m=a("db83"),h=a("9550"),d=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.IsShowModal=!1,e.AccurateSearch=!1,e.OperateForm=new h["a"].EBayCustomClassLogSearchFrom,e.Pager=new m["a"].Pager,e.TableList=[],e.TableRowHead=[{title:"编号",key:"Id",width:80},{title:"操作人",key:"UserName",width:100},{title:"操作",key:"OperationType",width:100,render:function(t,a){return t("span",e.DropOperationType.find((function(e){return e.Value===a.row.OperationType})).Key)}},{title:"店铺",key:"EbayStoreName"},{title:"分类名称",key:"CustomCategoryName"},{title:"操作时间",key:"CreateTime",width:160,render:function(t,a){return t("div",e.$UI.Render.Date(a.row.CreateTime,!0))}},{title:"结果",key:"Status",width:100,render:function(t,a){return t("span",e.DropStatus.find((function(e){return e.Value===a.row.Status})).Key)}},{title:"操作记录",key:"Remark",width:300,render:function(e,t){return t.row.Remark?e("Tooltip",{props:{content:t.row.Remark,maxWidth:600},class:"P-W-100-Percent P-LINE-1"},t.row.Remark):e("span","-")}}],e.DropUser=[],e.DropOperationType=e.$Utils.GetEnumArr(e.$Enums.Sales.CustomStoreLogKeyType),e.DropStatus=e.$Utils.GetEnumArr(e.$Enums.Sales.CustomStoreLogStatus),e}return Object(n["a"])(a,[{key:"OpenModal",value:function(){0===this.DropUser.length&&this.GetUserDrop(),this.IsShowModal=!0,this.ResetList()}},{key:"GetUserDrop",value:function(){var e=this;this.$Request.Post({Server:this.$Server.Admin,Api:{Address:this.$Api.GetUserDropList,Login:""},Data:"",Callback:function(t){t.IsSuccess?e.$set(e,"DropUser",t.Data.DropList):e.$Request.Error(t)}})}},{key:"SearchList",value:function(){this.Pager.PageIndex=1,this.GetTableList()}},{key:"ResetList",value:function(){this.$set(this,"Pager",new m["a"].Pager),this.$set(this,"OperateForm",new h["a"].EBayCustomClassLogSearchFrom),this.GetTableList()}},{key:"GetTableList",value:function(){var e=this;this.TableList.splice(0),this.$set(this,"AccurateSearch",!1),this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Sales,Api:{Address:this.$Api.GetStoreCategoryHistoryList,Login:!0},Data:{PageIndex:this.Pager.PageIndex,PageSize:this.Pager.PageSize,Conditions:{EndTime:this.OperateForm.EndTime?this.$UI.Render.NewDate(this.OperateForm.EndTime,!0):"",OperationType:Number(this.OperateForm.OperationType),SearchKey:this.OperateForm.SearchKey,StartTime:this.OperateForm.EndTime?this.$UI.Render.NewDate(this.OperateForm.StartTime,!0):"",Status:Number(this.OperateForm.Status),StoreId:Number(this.OperateForm.StoreId),UserId:Number(this.OperateForm.UserId)}},Callback:function(t){var a;(e.$UI.Loading.Hide(),t.IsSuccess)?(e.Pager.TotalItems=t.Data.PageModel.TotalItems,(a=e.TableList).push.apply(a,Object(o["a"])(t.Data.PageModel.Items))):e.$Request.Error(t)}})}},{key:"SetChangePageTable",value:function(e){this.Pager.PageIndex=e,this.GetTableList()}},{key:"SetChangePageSizeTable",value:function(e){this.Pager.PageSize=e,this.GetTableList()}},{key:"TriggerSearch",value:function(){this.$set(this,"AccurateSearch",!this.AccurateSearch)}},{key:"ClearModal",value:function(){this.IsShowModal=!1,this.AccurateSearch=!1}}]),a}(u["d"]);p["a"]([Object(u["c"])()],d.prototype,"PropStoreDrop",void 0),d=p["a"]([Object(u["a"])({name:"DetailEBayCustomStoreClass"})],d);var S=d,P=S,g=a("4023"),y=Object(g["a"])(P,r,s,!1,null,null,null);t["default"]=y.exports}}]);