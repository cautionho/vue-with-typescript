(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cfed2"],{6695:function(e,s,t){"use strict";t.r(s);var o=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"P-Inline-Block"},[t("Col",[e.Power?t("Button",{staticClass:"P-MR-10",attrs:{type:"primary"},on:{click:e.TriggerModal}},[e._v("添加菜单")]):e._e(),t("Modal",{attrs:{title:0==e.ResourcesMsg.Id?"添加菜单":"编辑菜单","mask-closable":!1,width:500},on:{"on-cancel":function(s){return e.HandleResMsg(!1)}},model:{value:e.ResourcesModal,callback:function(s){e.ResourcesModal=s},expression:"ResourcesModal"}},[t("Form",{ref:"ResourcesMsg",attrs:{onsubmit:"return false",model:e.ResourcesMsg,rules:e.ResourceRule,"label-width":110}},[t("Form-item",{attrs:{label:"菜单名称：",prop:"ResourceName"}},[t("Input",{ref:"ResourceName",attrs:{placeholder:"菜单名称"},model:{value:e.ResourcesMsg.ResourceName,callback:function(s){e.$set(e.ResourcesMsg,"ResourceName",s)},expression:"ResourcesMsg.ResourceName"}})],1),t("Form-item",{attrs:{label:"元素ID：",prop:"ElementId"}},[t("Input",{attrs:{placeholder:"元素ID"},model:{value:e.ResourcesMsg.ElementId,callback:function(s){e.$set(e.ResourcesMsg,"ElementId",s)},expression:"ResourcesMsg.ElementId"}})],1),t("Form-item",{attrs:{label:"上级菜单：",prop:"ParentId"}},[t("Cascader",{ref:"ParentName",attrs:{data:e.TreeMenu,filterable:"","change-on-select":"","render-format":e.RenderFormat,placeholder:"请选择上级菜单"},model:{value:e.ResourcesId,callback:function(s){e.ResourcesId=s},expression:"ResourcesId"}})],1),t("Form-item",{attrs:{label:"跳转链接：",prop:"ActionUrl"}},[t("Input",{attrs:{placeholder:"跳转链接"},model:{value:e.ResourcesMsg.ActionUrl,callback:function(s){e.$set(e.ResourcesMsg,"ActionUrl",s)},expression:"ResourcesMsg.ActionUrl"}})],1),t("Form-item",{attrs:{label:"请求API：",prop:"IncludeAction"}},[t("Input",{attrs:{placeholder:"请求API"},model:{value:e.ResourcesMsg.IncludeAction,callback:function(s){e.$set(e.ResourcesMsg,"IncludeAction",s)},expression:"ResourcesMsg.IncludeAction"}})],1),t("Form-item",{attrs:{label:"是否功能点：",prop:"IsPoint"}},[t("Select",{attrs:{placeholder:"是否功能点",options:e.DropList},model:{value:e.ResourcesMsg.IsPoint,callback:function(s){e.$set(e.ResourcesMsg,"IsPoint",s)},expression:"ResourcesMsg.IsPoint"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary"},on:{click:e.ValidatePostResource}},[e._v("提交")]),t("Button",{on:{click:function(s){return e.HandleResMsg(!1)}}},[e._v("取消")])],1)],1)],1)],1)},r=[],c=(t("e8f2"),t("3231")),a=t("064d"),i=t("46d7"),n=t("631e"),u=t("4a81"),l=t("d11d"),d=t("2fce"),R=function(e){Object(i["a"])(t,e);var s=Object(n["a"])(t);function t(){var e;return Object(c["a"])(this,t),e=s.apply(this,arguments),e.SelectedData=[],e.DropList=e.$Utils.GetEnumArr(e.$Enums.Setting.IsTrue),e.ResourcesModal=!1,e.ResourcesId=[],e.ResourcesMsg=new d["a"].ResourcesChild,e.PostMsg=new d["a"].ResourcesChild,e.ResourceRule={ResourceName:[{required:!0,message:"请输入菜单名称"}],ElementId:[{required:!0,message:"请输入元素ID"}]},e}return Object(a["a"])(t,[{key:"HandleResMsg",value:function(e){this.$set(this,"ResourcesModal",!1),this.$refs["ResourcesMsg"].resetFields()}},{key:"TriggerModal",value:function(e,s){this.SelectedData=e.length?e:[],this.$set(this,"ResourcesMsg",this.SelectedData.length?this.SelectedData[0]:new d["a"].ResourcesChild),this.$set(this,"ResourcesId",this.SelectedData.length?s:[]);this.$set(this.ResourcesMsg,"IsPoint",""===this.ResourcesMsg.IsPoint?"":this.ResourcesMsg.IsPoint?1:0),this.$nextTick((function(){this.$refs["ResourceName"].focus()})),this.$set(this,"ResourcesModal",!0)}},{key:"RenderFormat",value:function(e,s){var t=e.length-1,o=s[t]||!1;if(o)return this.$set(this,"ResourcesId",[Number(s[t].Id)]),e[t]}},{key:"ValidatePostResource",value:function(){var e=this;this.$refs["ResourcesMsg"].validate((function(s){if(s){if(0!==e.ResourcesMsg.Id&&e.ResourcesMsg.Id===Number(e.ResourcesId[e.ResourcesId.length-1]))return void e.$UI.Tips.Floating("warning","上级菜单不能为自身");e.PostResourcesMsg()}}))}},{key:"PostResourcesMsg",value:function(){var e=this;this.PostMsg=JSON.parse(JSON.stringify(this.ResourcesMsg)),this.$set(this.PostMsg,"IsPoint",!!this.PostMsg.IsPoint),this.$set(this.PostMsg,"ParentId",Number(this.ResourcesId[this.ResourcesId.length-1])),this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Settings,Api:{Address:0===this.ResourcesMsg.Id?this.$Api.MenuCreate:this.$Api.MenuModify,Login:!0},Data:this.PostMsg,Callback:function(s){s.IsSuccess?(e.$UI.Tips.Floating("success","".concat(0===e.ResourcesMsg.Id?"添加菜单成功":"编辑菜单成功")),e.HandleResMsg(!0)):(e.$Request.Error(s),e.$nextTick((function(){this.$refs["ResourceName"].focus()})),e.$UI.Loading.Hide())}})}}]),t}(l["d"]);u["a"]([Object(l["c"])()],R.prototype,"TreeMenu",void 0),u["a"]([Object(l["c"])()],R.prototype,"Power",void 0),u["a"]([Object(l["b"])()],R.prototype,"HandleResMsg",null),R=u["a"]([Object(l["a"])({name:"ModifyResources"})],R);var g=R,h=g,M=t("4023"),p=Object(M["a"])(h,o,r,!1,null,null,null);s["default"]=p.exports}}]);