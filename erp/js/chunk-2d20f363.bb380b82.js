(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f363"],{b351:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"P-Inline-Block"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.Trigger(0)}}},[e._v("移动")]),a("Modal",{attrs:{title:"移动站内信",width:600},on:{"on-cancel":e.CancelModal},model:{value:e.MoveModal,callback:function(t){e.MoveModal=t},expression:"MoveModal"}},[a("Form",{ref:"MoveForm",attrs:{model:e.MoveForm,rules:e.MoveRules,"label-width":80,onsubmit:"return false;"}},[a("FormItem",{attrs:{label:"文件夹",prop:"BoxIds"}},[a("Cascader",{attrs:{placeholder:"文件夹",data:e.Tree},model:{value:e.MoveForm.BoxIds,callback:function(t){e.$set(e.MoveForm,"BoxIds",t)},expression:"MoveForm.BoxIds"}})],1)],1),a("footer",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("提交")]),a("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)],1)},r=[],s=(a("b916"),a("d088"),a("e24e")),l=a("3231"),i=a("064d"),n=a("46d7"),c=a("631e"),d=a("4a81"),u=a("d11d"),v=a("db83"),M=function(e){Object(n["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.MoveModal=!1,e.MoveForm={BoxIds:[]},e.MoveRules={BoxIds:[{required:!0,message:"请选择文件夹",trigger:"change",type:"array"}]},e.Tree=[],e.MainMessageId=[],e}return Object(i["a"])(a,[{key:"GetSelected",value:function(e){}},{key:"EmitHandleSuccess",value:function(){}},{key:"WatchFolder",value:function(e){this.$set(this,"Tree",[]),this.SetCascaderTree(JSON.parse(JSON.stringify(e)),this.Tree)}},{key:"SetCascaderTree",value:function(e,t){var a,o=Object(s["a"])(e);try{for(o.s();!(a=o.n()).done;){var r=a.value,l=new v["a"].Cascader;l["label"]=r.Title.split("(")[0],l["value"]=r.Id,l["children"]=[],t.push(l),r.Children.length&&this.SetCascaderTree(r.Children,l.children)}}catch(i){o.e(i)}finally{o.f()}}},{key:"Trigger",value:function(e){e?this.TriggerBatch([e]):this.GetSelected("Move")}},{key:"TriggerBatch",value:function(e){e.length?(this.$set(this,"MainMessageId",e),this.$set(this,"MoveModal",!0)):this.$UI.Tips.Floating("warning","请选择站内信进行操作")}},{key:"Validate",value:function(){var e=this;this.$refs.MoveForm.validate((function(t){if(t){var a={BoxId:JSON.parse(JSON.stringify(e.MoveForm.BoxIds)).pop(),MainMessageId:e.MainMessageId};e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.CustomerService,Api:{Address:e.$Api.EbayMessageMove,Login:!0},Data:a,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success","移动成功"),e.EmitHandleSuccess(),e.CancelModal()):(e.$UI.Loading.Hide(),e.$Request.Error(t))}})}}))}},{key:"CancelModal",value:function(){var e=this;this.$set(this,"MoveModal",!1),this.$nextTick((function(){e.$refs.MoveForm.resetFields()}))}}]),a}(u["d"]);d["a"]([Object(u["c"])(Array)],M.prototype,"FolderTree",void 0),d["a"]([Object(u["b"])()],M.prototype,"GetSelected",null),d["a"]([Object(u["b"])()],M.prototype,"EmitHandleSuccess",null),d["a"]([Object(u["e"])("FolderTree")],M.prototype,"WatchFolder",null),M=d["a"]([Object(u["a"])({name:"MoveMail"})],M);var h=M,p=h,f=a("4023"),g=Object(f["a"])(p,o,r,!1,null,null,null);t["default"]=g.exports}}]);