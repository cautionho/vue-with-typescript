(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15a2093d"],{2003:function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"P-Inline-Block P-MR-10"},[t("Col",[t("Button",{staticClass:"P-MB-10",attrs:{type:"primary"},on:{click:e.OpenModifyModal}},[e._v("添加SKU别名")]),t("Modal",{attrs:{title:0===e.OperateForm.SkuId?"添加SKU别名":"编辑SKU别名","mask-closable":!1,width:800},on:{"on-cancel":function(a){return e.ClearModal(0)}},model:{value:e.ShowModal,callback:function(a){e.ShowModal=a},expression:"ShowModal"}},[e.ShowModal?t("Form",{ref:"OperateForm",attrs:{model:e.OperateForm,rules:e.OperateFormRule,name:"OperateForm",onsubmit:"return false","label-width":110}},[t("Form-item",{attrs:{label:"SKU编号：",prop:"SkuCode"}},[0===e.OperateForm.SkuId?t("Input",{ref:"SkuCode",attrs:{placeholder:"请输入SKU编号"},model:{value:e.OperateForm.SkuCode,callback:function(a){e.$set(e.OperateForm,"SkuCode",a)},expression:"OperateForm.SkuCode"}}):t("span",[e._v(e._s(e.OperateForm.SkuCode))])],1),t("Form-item",{attrs:{label:"SKU别名：",prop:"MapCode"}},[t("Input",{ref:"MapCodeTags",attrs:{placeholder:"请输入SKU别名"},on:{"on-enter":e.AddMapCodeTags},model:{value:e.MapCodeTags,callback:function(a){e.MapCodeTags="string"===typeof a?a.trim():a},expression:"MapCodeTags"}},[t("Button",{attrs:{slot:"append",type:"primary"},on:{click:e.AddMapCodeTags},slot:"append"},[e._v("添加")])],1)],1),t("Form-item",{staticClass:"Max-Height-200"},e._l(e.OperateForm.MapCode,(function(a){return t("Tag",{key:a,attrs:{type:"border",color:"blue",name:a,closable:""},on:{"on-close":e.HandleCloseTag}},[e._v(" "+e._s(a)+" ")])})),1)],1):e._e(),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary"},on:{click:e.SubModal}},[e._v("提交")]),t("Button",{on:{click:function(a){return e.ClearModal(0)}}},[e._v("取消")])],1)],1)],1)],1)},r=[],s=(t("5d9d"),t("0a9c"),t("cee1"),t("e8f2"),t("b916"),t("d088"),t("e24e")),i=t("3231"),d=t("064d"),n=t("46d7"),p=t("631e"),l=t("4a81"),u=t("d11d"),c=t("eb49"),M=function(e){Object(n["a"])(t,e);var a=Object(p["a"])(t);function t(){var e;return Object(i["a"])(this,t),e=a.apply(this,arguments),e.MapCodeTags="",e.ShowModal=!1,e.OperateForm=new c["a"].ModifySkuMap,e.OperateFormRule={SkuCode:[{required:!0,message:"请输入SKU编号"}],MapCode:[{required:!1,message:"请添加SKU别名",type:"array",trigger:"change"}]},e}return Object(d["a"])(t,[{key:"HandleResMsg",value:function(e){}},{key:"Trigger",value:function(e){var a={SkuId:e.SkuId,SkuCode:e.SkuCode,MapCode:e.MapCode};this.$set(this,"OperateForm",JSON.parse(JSON.stringify(a))),this.$set(this.OperateForm,"MapCode",""===this.OperateForm.MapCode?[]:this.OperateForm.MapCode.split(",")),this.OperateFormRule.MapCode[0].required=0===this.OperateForm.SkuId,this.$set(this,"ShowModal",!0),this.$nextTick((function(){0===this.OperateForm.SkuId?this.$refs["SkuCode"].focus():this.$refs["MapCodeTags"].focus()}))}},{key:"OpenModifyModal",value:function(){this.Trigger(new c["a"].SkuMapList)}},{key:"ClearModal",value:function(e){this.$set(this,"ShowModal",!1),this.$refs["OperateForm"].resetFields(),this.MapCodeTags="",this.HandleResMsg(e)}},{key:"SubModal",value:function(){var e=this;this.$refs["OperateForm"].validate((function(a){if(a){var t=JSON.parse(JSON.stringify(e.OperateForm));t.MapCode=t.MapCode.join(","),e.$UI.Loading.Show(),e.$Request.Post({Server:e.$Server.Purchase,Api:{Address:0===t.SkuId?e.$Api.SkuMapCreate:e.$Api.SkuMapModify,Login:!0},Data:t,Callback:function(a){e.$UI.Loading.Hide(),a.IsSuccess?(e.$UI.Tips.Floating("success",0===t.SkuId?"添加SKU别名成功":"编辑SKU别名成功"),e.ClearModal(1)):e.$Request.Error(a)}})}}))}},{key:"AddMapCodeTags",value:function(){if(""!==this.MapCodeTags){if(this.MapCodeTags.length>100)return this.$UI.Tips.Floating("warning","请输入长度小于等于100的SKU别名"),void this.$refs["MapCodeTags"].focus();var e,a=Object(s["a"])(this.OperateForm.MapCode);try{for(a.s();!(e=a.n()).done;){var t=e.value;if(t===this.addEditInput)return this.$UI.Tips.Floating("warning","已存在相同别名"),void(this.MapCodeTags="")}}catch(o){a.e(o)}finally{a.f()}this.OperateForm.MapCode.push(this.MapCodeTags),this.MapCodeTags=""}}},{key:"HandleCloseTag",value:function(e,a){var t=Number(this.OperateForm.MapCode.indexOf(a));this.OperateForm.MapCode.splice(t,1),this.$refs["MapCodeTags"].focus()}}]),t}(u["d"]);l["a"]([Object(u["b"])()],M.prototype,"HandleResMsg",null),M=l["a"]([Object(u["a"])({name:"ModifySkuMap"})],M);var h=M,f=h,C=(t("cbda"),t("4023")),S=Object(C["a"])(f,o,r,!1,null,null,null);a["default"]=S.exports},"2b23":function(e,a,t){},cbda:function(e,a,t){"use strict";var o=t("2b23"),r=t.n(o);r.a}}]);