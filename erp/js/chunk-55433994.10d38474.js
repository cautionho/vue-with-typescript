(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55433994"],{1857:function(e,a,t){"use strict";var s=t("57d7"),o=t.n(s);o.a},"3dc1":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("Row",[t("Form",{ref:"HandleForm",attrs:{model:e.HandleForm,onsubmit:"return false","label-width":100}},[t("FormItem",{staticClass:"P-MB-10",attrs:{label:"操作："}},[t("RadioGroup",{model:{value:e.HandleForm.ProcessType,callback:function(a){e.$set(e.HandleForm,"ProcessType",a)},expression:"HandleForm.ProcessType"}},[t("Radio",{attrs:{label:1}},[t("span",[e._v("同意退款")])]),t("Radio",{attrs:{label:2}},[t("span",[e._v("提交给Shopee")])])],1)],1),t("Col",{directives:[{name:"show",rawName:"v-show",value:2===e.HandleForm.ProcessType,expression:"HandleForm.ProcessType === 2"}],attrs:{span:"24"}},[t("FormItem",{attrs:{label:"邮箱：",prop:"Email",rules:{required:2===e.HandleForm.ProcessType,message:"请输入邮箱",pattern:e.$Pattern.Email}}},[t("Input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.HandleForm.Email,callback:function(a){e.$set(e.HandleForm,"Email",a)},expression:"HandleForm.Email"}})],1),t("FormItem",{attrs:{label:"原因：",prop:"Reason",rules:{required:2===e.HandleForm.ProcessType,message:"请选择原因",trigger:"change"}}},[t("Select",{attrs:{placeholder:"请选择原因",options:e.ReasonDrop},model:{value:e.HandleForm.Reason,callback:function(a){e.$set(e.HandleForm,"Reason",a)},expression:"HandleForm.Reason"}})],1),t("FormItem",{attrs:{label:"备注说明：",prop:"ReasonText",rules:{required:2===e.HandleForm.ProcessType,message:"请输入备注说明"}}},[t("Input",{attrs:{placeholder:"请输入备注",type:"textarea",maxlength:"2000","show-word-limit":"",autosize:{minRows:4,maxRows:4}},model:{value:e.HandleForm.ReasonText,callback:function(a){e.$set(e.HandleForm,"ReasonText",a)},expression:"HandleForm.ReasonText"}})],1),t("FormItem",[e._l(e.HandleForm.ReasonImages,(function(a,s){return t("div",{key:s,staticClass:"P-Inline-Block P-Uploader-Img"},[t("img",{staticClass:"P-Uploader-Img",attrs:{src:e.$Server.File+"/"+a}}),t("Icon",{staticClass:"P-Uploader-Del",attrs:{type:"md-close-circle",size:"20"},on:{click:function(a){return e.UploaderDel(s)}}})],1)})),t("Upload",{directives:[{name:"show",rawName:"v-show",value:e.HandleForm.ReasonImages.length<3,expression:"HandleForm.ReasonImages.length < 3"}],staticClass:"P-Uploader P-Inline-Block P-VA-T",attrs:{headers:e.$Request.Headers({Server:"",Api:{Address:"",Login:!0},Data:"",Form:!0}),"show-upload-list":!1,"on-success":e.HandleUploadSuccess,accept:".jpg, .jpge, .png",format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.HandleFormatError,"on-exceeded-size":e.HandleMaxSize,"before-upload":e.HandleBeforeUpload,multiple:"",action:""+e.$Server.Settings+e.$Api.UploadImage}},[t("div",{staticClass:"P-Uploader-Img"},[t("Icon",{attrs:{type:"md-add",size:"20"}})],1)]),t("p",{staticClass:"P-MT-5"},[e._v("最多上传3张大小在2M内且格式为PNG或JPG格式的图片")])],2)],1)],1)],1)},o=[],n=(t("cee1"),t("1ff3"),t("3231")),r=t("064d"),l=t("46d7"),i=t("631e"),d=t("4a81"),c=t("d11d"),u=t("a349"),m=t("4606"),p=function(e){Object(l["a"])(t,e);var a=Object(i["a"])(t);function t(){var e;return Object(n["a"])(this,t),e=a.apply(this,arguments),e.HandleForm=new m["a"].HandleShopeeReturnRefund,e.ReasonDrop=e.$Utils.GetEnumArr(e.$Enums.CustomerService.ShopeeReturnReason),e.UploadQty=0,e}return Object(r["a"])(t,[{key:"EmitHandleSuccess",value:function(){}},{key:"Reset",value:function(){this.$set(this,"HandleType",1),this.$set(this,"HandleForm",new m["a"].HandleShopeeReturnRefund)}},{key:"HandleUploadSuccess",value:function(e,a,t){e.IsSuccess?this.HandleForm.ReasonImages.push(e.Data.Url):this.$Request.Error(e),this.CountUploadQty()}},{key:"HandleFormatError",value:function(e){this.$UI.Tips.Floating("warning","文件[".concat(e.name,"]格式不为JPG/JPGE/PNG，请检查")),this.CountUploadQty()}},{key:"HandleMaxSize",value:function(e,a){this.$UI.Tips.Floating("warning","文件".concat(e.name,"大小超过2M，请检查")),this.CountUploadQty()}},{key:"HandleBeforeUpload",value:function(e){if(0===this.UploadQty&&this.$UI.Loading.Show(),this.UploadQty+this.HandleForm.ReasonImages.length>=5)return!1;this.UploadQty++}},{key:"CountUploadQty",value:function(){this.UploadQty--,this.UploadQty<=0&&this.$UI.Loading.Hide()}},{key:"UploaderDel",value:function(e){this.HandleForm.ReasonImages.splice(e,1)}},{key:"Validate",value:function(){var e=this;this.$refs.HandleForm.validate((function(a){if(a){if(!e.HandleForm.ReasonImages.length)return void e.$UI.Tips.Floating("warning","请上传图片");e.PostHandle()}}))}},{key:"PostHandle",value:function(){var e=this;this.$set(this.HandleForm,"ReturnId",this.SHOPEE_RETURN_INFO.ReturnOrder.Id),this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:this.$Api.ShopeeReturnSubmitOperation,Login:!0},Data:this.HandleForm,Callback:function(a){a.IsSuccess?(e.$UI.Tips.Floating("success","处理成功"),e.EmitHandleSuccess()):(e.$UI.Loading.Hide(),e.$Request.Error(a))}})}},{key:"SHOPEE_RETURN_INFO",get:function(){return this["CustomerService/SHOPEE_RETURN_INFO"]}}]),t}(c["d"]);d["a"]([u["b"]],p.prototype,"CustomerService/SHOPEE_RETURN_INFO",void 0),d["a"]([Object(c["b"])()],p.prototype,"EmitHandleSuccess",null),p=d["a"]([Object(c["a"])({name:"HandleRefund"})],p);var h=p,H=h,F=(t("1857"),t("4023")),R=Object(F["a"])(H,s,o,!1,null,"04220335",null);a["default"]=R.exports},"57d7":function(e,a,t){}}]);