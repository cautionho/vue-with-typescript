(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22599c"],{e4a8:function(o,t,e){"use strict";e.r(t);var a=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("Modal",{attrs:{width:600,title:"运输设置"},on:{"on-cancel":o.CancelModal},model:{value:o.LocationModel,callback:function(t){o.LocationModel=t},expression:"LocationModel"}},[e("Form",{ref:"LocationForm",attrs:{model:o.LocationForm,rules:o.LocationRules,"label-width":80,onsubmit:"return false;"}},[e("FormItem",{attrs:{label:"城市：",prop:"City"}},[e("Input",{attrs:{placeholder:"城市"},model:{value:o.LocationForm.City,callback:function(t){o.$set(o.LocationForm,"City",t)},expression:"LocationForm.City"}})],1),e("FormItem",{attrs:{label:"国家：",prop:"Country"}},[e("Select",{attrs:{placeholder:"国家",options:o.COUNTRY_DROP},model:{value:o.LocationForm.Country,callback:function(t){o.$set(o.LocationForm,"Country",t)},expression:"LocationForm.Country"}})],1),e("FormItem",{attrs:{label:"邮编：",prop:"ZipCode"}},[e("Input",{attrs:{placeholder:"邮编"},model:{value:o.LocationForm.ZipCode,callback:function(t){o.$set(o.LocationForm,"ZipCode",t)},expression:"LocationForm.ZipCode"}})],1)],1),e("footer",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"primary"},on:{click:o.Validate}},[o._v("提交")]),e("Button",{on:{click:o.CancelModal}},[o._v("取消")])],1)],1)},i=[],n=e("3231"),r=e("064d"),c=e("46d7"),s=e("631e"),l=e("4a81"),d=e("d11d"),u=e("a349"),p=e("9550"),m=function(o){Object(c["a"])(e,o);var t=Object(s["a"])(e);function e(){var o;return Object(n["a"])(this,e),o=t.apply(this,arguments),o.LocationModel=!1,o.LocationForm=new p["a"].AllegroLocation,o.LocationRules={City:[{required:!0,message:"请输入城市"}],Country:[{required:!0,message:"请选择国家",trigger:"change"}],ZipCode:[{required:!0,message:"请输入邮编"}]},o}return Object(r["a"])(e,[{key:"EmitModify",value:function(o){}},{key:"Trigger",value:function(o){this["COUNTRY_DROP"].length||this["Base/UPDATE_BASE_INFO"]("COUNTRY",""),this.LocationForm.StoreId=o.Id,this.GetAllegroLocation()}},{key:"GetAllegroLocation",value:function(){var o=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Sales,Api:{Address:this.$Api.Sales["17"].StoreLocation,Login:!0},Data:this.LocationForm.StoreId,Callback:function(t){o.$UI.Loading.Hide(),t.IsSuccess?(o.$set(o,"LocationForm",{StoreId:o.LocationForm.StoreId,Country:t.Data.Data.Country,City:t.Data.Data.City,ZipCode:t.Data.Data.ZipCode}),o.$set(o,"LocationModel",!0)):(o.EmitModify(!1),o.$Request.Error(t))}})}},{key:"Validate",value:function(){var o=this;this.$refs.LocationForm.validate((function(t){t&&(o.$UI.Loading.Show(),o.$Request.Post({Server:o.$Server.Sales,Api:{Address:o.$Api.Sales["17"].ChangeStoreLocation,Login:!0},Data:o.LocationForm,Callback:function(t){o.$UI.Loading.Hide(),t.IsSuccess?(o.$UI.Tips.Floating("success","设置成功"),o.CancelModal()):o.$Request.Error(t)}}))}))}},{key:"CancelModal",value:function(){var o=this;this.$set(this,"LocationModel",!1),this.$set(this,"LocationForm",new p["a"].AllegroLocation),this.$nextTick((function(){o.$refs.LocationForm.resetFields(),o.EmitModify(!1)}))}},{key:"COUNTRY_DROP",get:function(){return this["Base/COUNTRY_DROP"]}}]),e}(d["d"]);l["a"]([u["a"]],m.prototype,"Base/UPDATE_BASE_INFO",void 0),l["a"]([u["b"]],m.prototype,"Base/COUNTRY_DROP",void 0),l["a"]([Object(d["b"])()],m.prototype,"EmitModify",null),m=l["a"]([Object(d["a"])({name:"AllegroLocation"})],m);var L=m,h=L,C=e("4023"),f=Object(C["a"])(h,a,i,!1,null,"3c646c0a",null);t["default"]=f.exports}}]);