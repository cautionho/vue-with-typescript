(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-344965bc"],{"18f0":function(e,r,t){},d288:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("Col",{staticClass:"Create-Order"},[t("Button",{attrs:{type:"primary"},on:{click:e.Trigger}},[e._v("添加订单")]),t("Modal",{staticClass:"Container-Tabs",attrs:{title:"添加订单",width:1200},on:{"on-cancel":e.CancelModal},model:{value:e.CreateModal,callback:function(r){e.CreateModal=r},expression:"CreateModal"}},[e.CreateModal?t("Form",{ref:"OrderInfo",attrs:{model:e.OrderInfo,rules:e.OrderRules,inline:"","label-width":100,onsubmit:"return false;"}},[t("Tabs",{attrs:{type:"card",name:"CreateOrderTabs",value:e.AcTab,animated:!1},on:{"on-click":e.ChangeTabs}},[t("TabPane",{attrs:{label:"基本信息",tab:"CreateOrderTabs",name:"Base"}},[t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"订单号：",prop:"ShipOrder.PlatformOrderId"}},[t("Input",{attrs:{placeholder:"订单号"},model:{value:e.OrderInfo.ShipOrder.PlatformOrderId,callback:function(r){e.$set(e.OrderInfo.ShipOrder,"PlatformOrderId",r)},expression:"OrderInfo.ShipOrder.PlatformOrderId"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"国家：",prop:"Address.Country.CountryCode"}},[t("Select",{attrs:{placeholder:"国家",options:e.COUNTRY_DROP,optionValKey:"CountryCode",optionKey:"CountryNameCn",transfer:""},model:{value:e.OrderInfo.Address.Country.CountryCode,callback:function(r){e.$set(e.OrderInfo.Address.Country,"CountryCode",r)},expression:"OrderInfo.Address.Country.CountryCode"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"地址2：",prop:"Address.BuyerStreet2"}},[t("Input",{attrs:{placeholder:"地址2"},model:{value:e.OrderInfo.Address.BuyerStreet2,callback:function(r){e.$set(e.OrderInfo.Address,"BuyerStreet2",r)},expression:"OrderInfo.Address.BuyerStreet2"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"地址1：",prop:"Address.BuyerStreet1"}},[t("Input",{attrs:{placeholder:"地址1"},model:{value:e.OrderInfo.Address.BuyerStreet1,callback:function(r){e.$set(e.OrderInfo.Address,"BuyerStreet1",r)},expression:"OrderInfo.Address.BuyerStreet1"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"城市：",prop:"Address.BuyerCity"}},[t("Input",{attrs:{placeholder:"城市"},model:{value:e.OrderInfo.Address.BuyerCity,callback:function(r){e.$set(e.OrderInfo.Address,"BuyerCity",r)},expression:"OrderInfo.Address.BuyerCity"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"省/州：",prop:"Address.BuyerState"}},[t("Input",{attrs:{placeholder:"省/州"},model:{value:e.OrderInfo.Address.BuyerState,callback:function(r){e.$set(e.OrderInfo.Address,"BuyerState",r)},expression:"OrderInfo.Address.BuyerState"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"邮编：",prop:"Address.BuyerZipCode"}},[t("Input",{attrs:{placeholder:"邮编"},model:{value:e.OrderInfo.Address.BuyerZipCode,callback:function(r){e.$set(e.OrderInfo.Address,"BuyerZipCode",r)},expression:"OrderInfo.Address.BuyerZipCode"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"收件人：",prop:"Address.BuyerFullName"}},[t("Input",{attrs:{placeholder:"收件人"},model:{value:e.OrderInfo.Address.BuyerFullName,callback:function(r){e.$set(e.OrderInfo.Address,"BuyerFullName",r)},expression:"OrderInfo.Address.BuyerFullName"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"买家ID：",prop:"ShipOrder.BuyerUserId"}},[t("Input",{attrs:{placeholder:"买家ID"},model:{value:e.OrderInfo.ShipOrder.BuyerUserId,callback:function(r){e.$set(e.OrderInfo.ShipOrder,"BuyerUserId",r)},expression:"OrderInfo.ShipOrder.BuyerUserId"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"电话：",prop:"Address.BuyerPhone"}},[t("Input",{attrs:{placeholder:"电话"},model:{value:e.OrderInfo.Address.BuyerPhone,callback:function(r){e.$set(e.OrderInfo.Address,"BuyerPhone",r)},expression:"OrderInfo.Address.BuyerPhone"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"付款金额：",prop:"ShipOrder.PayPrice"}},[t("Input",{attrs:{placeholder:"付款金额",prefix:"logo-usd"},model:{value:e.OrderInfo.ShipOrder.PayPrice,callback:function(r){e.$set(e.OrderInfo.ShipOrder,"PayPrice",r)},expression:"OrderInfo.ShipOrder.PayPrice"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"卖家店铺：",prop:"ShipOrder.StoreId"}},[t("Select",{attrs:{placeholder:"卖家店铺",options:e.StoreDrop,transfer:""},model:{value:e.OrderInfo.ShipOrder.StoreId,callback:function(r){e.$set(e.OrderInfo.ShipOrder,"StoreId",r)},expression:"OrderInfo.ShipOrder.StoreId"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"买家Email：",prop:"ShipOrder.BuyerEmail"}},[t("Input",{attrs:{placeholder:"买家Email"},model:{value:e.OrderInfo.ShipOrder.BuyerEmail,callback:function(r){e.$set(e.OrderInfo.ShipOrder,"BuyerEmail",r)},expression:"OrderInfo.ShipOrder.BuyerEmail"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"交易号：",prop:"ShipOrder.TransationId"}},[t("Input",{attrs:{placeholder:"交易号"},model:{value:e.OrderInfo.ShipOrder.TransationId,callback:function(r){e.$set(e.OrderInfo.ShipOrder,"TransationId",r)},expression:"OrderInfo.ShipOrder.TransationId"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"付款时间：",prop:"ShipOrder.PaidTime"}},[t("DatePicker",{staticClass:"P-W-100-Percent",attrs:{type:"datetime",placeholder:"付款时间"},model:{value:e.OrderInfo.ShipOrder.PaidTime,callback:function(r){e.$set(e.OrderInfo.ShipOrder,"PaidTime",r)},expression:"OrderInfo.ShipOrder.PaidTime"}})],1),t("FormItem",{staticClass:"P-W-49-Percent P-MR-0",attrs:{label:"下单时间：",prop:"ShipOrder.PlatOrderTime"}},[t("DatePicker",{staticClass:"P-W-100-Percent",attrs:{type:"datetime",placeholder:"下单时间"},model:{value:e.OrderInfo.ShipOrder.PlatOrderTime,callback:function(r){e.$set(e.OrderInfo.ShipOrder,"PlatOrderTime",r)},expression:"OrderInfo.ShipOrder.PlatOrderTime"}})],1),t("FormItem",{staticClass:"P-W-100-Percent P-MR-0",attrs:{label:"备注：",prop:"ShipOrder.Remark"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"备注"},model:{value:e.OrderInfo.ShipOrder.Remark,callback:function(r){e.$set(e.OrderInfo.ShipOrder,"Remark",r)},expression:"OrderInfo.ShipOrder.Remark"}})],1)],1),t("TabPane",{attrs:{label:"订单明细",tab:"CreateOrderTabs",name:"Items"}},[t("Table",{attrs:{columns:e.ItemCols,data:e.OrderInfo.Items,size:"small",height:519,stripe:"",borderless:""}}),t("Col",{staticClass:"P-TA-R P-MT-10",attrs:{span:"24"}},[t("Button",{attrs:{type:"primary"},on:{click:e.TriggerEnableSku}},[e._v("添加SKU")])],1)],1)],1)],1):e._e(),t("footer",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("提交")]),t("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1),e.CreateModal?t("EnableSku",{ref:"EnableSku",on:{"handle-res-msg":e.HandleSelectSku}}):e._e()],1)},s=[],n=(t("cee1"),t("6bf8"),t("e24e")),o=t("5c62"),d=t("3231"),l=t("064d"),i=t("46d7"),u=t("631e"),c=t("4a81"),p=t("d11d"),O=t("a349"),f=t("1459"),I=function(e){Object(i["a"])(t,e);var r=Object(u["a"])(t);function t(){var e;return Object(d["a"])(this,t),e=r.apply(this,arguments),e.CreateModal=!1,e.AcTab="Base",e.StoreDrop=[],e.OrderInfo=new f["a"].ShipOrderInfo,e.OrderRules={"ShipOrder.PlatformOrderId":[{required:!0,message:"请输入订单号"}],"Address.Country.CountryCode":[{required:!0,message:"请选择国家",trigger:"change"}],"Address.BuyerStreet1":[{required:!0,message:"请输入地址1"}],"Address.BuyerCity":[{required:!0,message:"请输入城市"}],"Address.BuyerZipCode":[{required:!0,message:"请输入邮编"}],"Address.BuyerFullName":[{required:!0,message:"请输入收件人"}],"Address.BuyerPhone":[{required:!0,message:"请输入电话"},{pattern:/^[\\+]{0,1}([A-Za-z\d\-\(\)\s\*#]+)$/,message:"电话号码格式不正确"}],"ShipOrder.PayPrice":[{required:!0,message:"请输入付款金额"},{pattern:/^[+]{0,1}([1-9]{0,1}[0-9]+)$|^[+]{0,1}(\d+\.\d+)$/,message:"请输入正确格式的付款金额"}],"ShipOrder.PaidTime":[{required:!0,message:"请选择付款时间"}],"ShipOrder.PlatOrderTime":[{required:!0,message:"请选择下单时间"}]},e.ItemCols=[{title:"SKU编号",key:"SkuCode"},{title:"SKU名称",key:"SkuName",render:function(e,r){return e("Tooltip",{class:"P-LINE-1",props:{content:r.row.Sku.SkuName}},r.row.Sku.SkuName)}},{title:"ItemId",render:function(r,t){return r("Input",{class:"P-W-100-Percent",attrs:{placeholder:"请输入ItemId",value:t.row.ItemId},on:{input:function(r){e.ChangeVal("ItemId",t.row._index,r)}}})}},{title:"平台单号",render:function(r,t){return r("Input",{class:"P-W-100-Percent",attrs:{placeholder:"请输入平台单号",value:t.row.PlatformOrderId},on:{input:function(r){e.ChangeVal("PlatformOrderId",t.row._index,r)}}})}},{title:"平台交易号",render:function(r,t){return r("Input",{class:"P-W-100-Percent",attrs:{placeholder:"请输入平台交易号",value:t.row.PlatformTransactionId},on:{input:function(r){e.ChangeVal("PlatformTransactionId",t.row._index,r)}}})}},{title:"Paypal交易号",render:function(r,t){return r("Input",{class:"P-W-100-Percent",attrs:{placeholder:"请输入Paypal交易号",value:t.row.PaypalTransactionId},on:{input:function(r){e.ChangeVal("PaypalTransactionId",t.row._index,r)}}})}},{title:"数量",render:function(r,t){return r("Input",{class:"P-W-100-Percent",attrs:{placeholder:"请输入数量",value:t.row.Quantity},on:{input:function(r){e.ChangeVal("Quantity",t.row._index,r)}}})}},{title:"操作",width:80,align:"center",render:function(r,t){return r("Button",{props:{size:"small",type:"error"},on:{click:function(){e.DelItem(t.row._index)}}},"删除")}}],e}return Object(l["a"])(t,[{key:"EmitOperateSuccess",value:function(){}},{key:"GetStoreDrop",value:function(){var e=this;this.$Request.Post({Server:this.$Server.Sales,Api:{Address:this.$Api.Sales[String(this.$Enums.Sales.Platform[this.Page])].StoreDrop,Login:!1},Data:"",Callback:function(r){var t;r.IsSuccess&&(t=e.StoreDrop).push.apply(t,Object(o["a"])(r.Data.DropList))}})}},{key:"ChangeTabs",value:function(e){this.$set(this,"AcTab",e)}},{key:"Trigger",value:function(){this.$set(this,"CreateModal",!0),this.COUNTRY_DROP.length||this["Base/UPDATE_BASE_INFO"]("COUNTRY",""),this.StoreDrop.length||this.GetStoreDrop()}},{key:"TriggerEnableSku",value:function(){this.$refs["EnableSku"].Trigger(!1)}},{key:"HandleSelectSku",value:function(e){var r,t=Object(n["a"])(e);try{for(t.s();!(r=t.n()).done;){var a,s=r.value,o=!0,d=Object(n["a"])(this.OrderInfo.Items);try{for(d.s();!(a=d.n()).done;){var l=a.value;s.Id===l.Sku.Id&&(o=!1)}}catch(u){d.e(u)}finally{d.f()}if(o){var i=new f["a"].ShipOrderItem;i.Sku=s,i.SkuCode=s.SkuCode,i.Quantity=1,this.OrderInfo.Items.push(i)}}}catch(u){t.e(u)}finally{t.f()}}},{key:"ChangeVal",value:function(e,r,t){this.OrderInfo.Items[r][e]=t}},{key:"DelItem",value:function(e){this.OrderInfo.Items.splice(e,1)}},{key:"Validate",value:function(){var e=this;this.$refs.OrderInfo.validate((function(r){if(r){if(e.OrderInfo.Items.length<1)return void e.$UI.Tips.Floating("warning","请补充订单明细");var t,a=Object(n["a"])(e.OrderInfo.Items);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(!(new e.$Validate.PositiveInt).Valid(s.Quantity)||s.Quantity<1)return void e.$UI.Tips.Floating("warning","订单明细数量必须是大于0的整数")}}catch(o){a.e(o)}finally{a.f()}e.OrderInfo.ShipOrder.Platform=e.Platform,e.PostOrderInfo()}}))}},{key:"PostOrderInfo",value:function(){var e=this;this.$UI.Loading.Show();var r=JSON.parse(JSON.stringify(this.OrderInfo));r.ShipOrder.PlatOrderTime=this.$UI.Render.NewDate(r.ShipOrder.PlatOrderTime,!0),r.ShipOrder.PaidTime=this.$UI.Render.NewDate(r.ShipOrder.PaidTime,!0),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.ShipOrderCreate,Login:!0},Data:r,Callback:function(r){r.IsSuccess?(e.$UI.Tips.Floating("success","添加发货订单成功"),e.CancelModal(),e.EmitOperateSuccess()):(e.$UI.Loading.Hide(),e.$Request.Error(r))}})}},{key:"CancelModal",value:function(){this.$set(this,"CreateModal",!1),this.$set(this,"AcTab","Base"),this.$set(this,"OrderInfo",new f["a"].ShipOrderInfo),this.$refs.OrderInfo.resetFields()}},{key:"COUNTRY_DROP",get:function(){return this["Base/COUNTRY_DROP"]}}]),t}(p["d"]);c["a"]([Object(p["c"])(String)],I.prototype,"Page",void 0),c["a"]([Object(p["b"])()],I.prototype,"EmitOperateSuccess",null),c["a"]([O["a"]],I.prototype,"Base/UPDATE_BASE_INFO",void 0),c["a"]([O["b"]],I.prototype,"Base/COUNTRY_DROP",void 0),I=c["a"]([Object(p["a"])({name:"ShipOrderCreate",components:{EnableSku:function(){return t.e("chunk-2d0dd9de").then(t.bind(null,"81c2"))}}})],I);var m=I,h=m,P=(t("d752"),t("4023")),S=Object(P["a"])(h,a,s,!1,null,null,null);r["default"]=S.exports},d752:function(e,r,t){"use strict";var a=t("18f0"),s=t.n(a);s.a}}]);