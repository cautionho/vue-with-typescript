(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd266"],{"2b88":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Row",{staticClass:"P-Inline-Block"},[e("Button",{staticClass:"P-Inline-Block P-MR-10",attrs:{type:"primary"},on:{click:function(a){t.ShelvesModal=!0}}},[t._v("打印货架号条码")]),e("Modal",{attrs:{title:"打印货架条码","mask-closable":!1,width:"800"},on:{"on-cancel":t.ClearModal},model:{value:t.ShelvesModal,callback:function(a){t.ShelvesModal=a},expression:"ShelvesModal"}},[e("Row",[e("Col",[e("Form",{ref:"GenerationForm",attrs:{onsubmit:"return false",model:t.GenerationForm,rules:t.GenerationRule,inline:"","label-width":100}},[e("Form-item",{staticClass:"P-W-98-Percent",attrs:{label:"生成方式：",prop:"GenerationId"}},[e("Select",{staticClass:"P-W-100-Percent",attrs:{options:t.GenerationList},model:{value:t.GenerationForm.GenerationId,callback:function(a){t.$set(t.GenerationForm,"GenerationId",a)},expression:"GenerationForm.GenerationId"}})],1)],1)],1),1==t.GenerationForm.GenerationId?e("Col",{attrs:{span:"24"}},[e("Table",{ref:"GenerationTable",attrs:{border:"",columns:t.ManualCol,data:t.ManualData,height:"250",size:"small",stripe:""}})],1):t._e(),1==t.GenerationForm.GenerationId?e("Col",{staticClass:"P-TA-R",attrs:{span:"24"}},[e("Button",{staticClass:"P-MT-10",attrs:{type:"primary"},on:{click:t.AddManualCol}},[t._v("添加一行")])],1):t._e(),e("Col",{attrs:{span:"24"}},[2==t.GenerationForm.GenerationId?e("Form",{ref:"AutomaticData",attrs:{onsubmit:"return false",model:t.AutomaticData,rules:t.PrintMsgRule,inline:"","label-width":100}},[e("Form-item",{staticClass:"P-W-98-Percent",attrs:{label:"库区编号：",prop:"Warehouse"}},[e("Select",{staticClass:"P-W-100-Percent",attrs:{placeholder:"请选择库区编号",options:t.ReservoirList},model:{value:t.AutomaticData.Warehouse,callback:function(a){t.$set(t.AutomaticData,"Warehouse",a)},expression:"AutomaticData.Warehouse"}})],1),e("Form-item",{staticClass:"P-W-98-Percent",attrs:{label:"排号：",prop:"NumeralId"}},[e("Input",{model:{value:t.AutomaticData.NumeralId,callback:function(a){t.$set(t.AutomaticData,"NumeralId",a)},expression:"AutomaticData.NumeralId"}})],1),e("Form-item",{staticClass:"P-W-98-Percent ivu-form-item-required",attrs:{label:"架号："}},[e("Row",[e("Col",{attrs:{span:"11"}},[e("FormItem",{staticClass:"P-W-100-Percent",attrs:{prop:"MinFrame"}},[e("Input",{attrs:{placeholder:"请输入开始架号,格式为A~Z"},model:{value:t.AutomaticData.MinFrame,callback:function(a){t.$set(t.AutomaticData,"MinFrame",a)},expression:"AutomaticData.MinFrame"}})],1)],1),e("Col",{staticClass:"P-TA-C",attrs:{span:"2"}},[t._v("-")]),e("Col",{attrs:{span:"11"}},[e("FormItem",{staticClass:"P-W-100-Percent",attrs:{prop:"MaxFrame"}},[e("Input",{attrs:{placeholder:"请输入结束架号,格式为A~Z"},model:{value:t.AutomaticData.MaxFrame,callback:function(a){t.$set(t.AutomaticData,"MaxFrame",a)},expression:"AutomaticData.MaxFrame"}})],1)],1)],1)],1),e("Form-item",{staticClass:"P-W-98-Percent ivu-form-item-required",attrs:{label:"位号："}},[e("Row",[e("Col",{attrs:{span:"11"}},[e("FormItem",{staticClass:"P-W-100-Percent",attrs:{prop:"MinBitNumber"}},[e("Input",{model:{value:t.AutomaticData.MinBitNumber,callback:function(a){t.$set(t.AutomaticData,"MinBitNumber",a)},expression:"AutomaticData.MinBitNumber"}})],1)],1),e("Col",{staticClass:"P-TA-C",attrs:{span:"2"}},[t._v("-")]),e("Col",{attrs:{span:"11"}},[e("FormItem",{staticClass:"P-W-100-Percent",attrs:{prop:"MaxBitNumber"}},[e("Input",{model:{value:t.AutomaticData.MaxBitNumber,callback:function(a){t.$set(t.AutomaticData,"MaxBitNumber",a)},expression:"AutomaticData.MaxBitNumber"}})],1)],1)],1)],1),e("Form-item",{staticClass:"P-W-98-Percent",attrs:{label:"打印数量：",prop:"PrintNum"}},[e("InputNumber",{staticClass:"P-W-100-Percent",attrs:{min:1},model:{value:t.AutomaticData.PrintNum,callback:function(a){t.$set(t.AutomaticData,"PrintNum",a)},expression:"AutomaticData.PrintNum"}})],1)],1):t._e()],1)],1),e("footer",{staticClass:"P-TA-R",attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"primary"},on:{click:t.PostPrint}},[t._v("打印")]),e("Button",{on:{click:t.ClearModal}},[t._v("取消")])],1)],1)],1)},n=[],i=(e("cee1"),e("e8f2"),e("3231")),o=e("064d"),s=e("46d7"),l=e("631e"),u=e("4a81"),m=e("d11d"),c=e("1f41"),d=e("2437"),p=function(t){Object(s["a"])(e,t);var a=Object(l["a"])(e);function e(){var t;return Object(i["a"])(this,e),t=a.apply(this,arguments),t.GenerationList=t.$Utils.GetEnumArr(t.$Enums.Warehouse.GenerationType),t.ReservoirList=t.GetLocations(),t.ShelvesModal=!1,t.GenerationForm=new c["a"].GenerationForm,t.ManualData=[new c["a"].GenerationManual],t.AutomaticData=new c["a"].GenerationAutomatic,t.GenerationRule={GenerationId:[{required:!0,message:"请选择生成方式",trigger:"change",type:"number"}]},t.PrintMsgRule={Warehouse:[{required:!0,message:"请选择库区编号",trigger:"change",type:"number"}],NumeralId:[{required:!0,message:"请选择排号",trigger:"blur"},{pattern:/^0[1-9]|[1-9][\d]{1,2}$/,message:"请输入正确的排号，格式为01-999（数字）"}],MinFrame:[{required:!0,message:"请输入开始架号",trigger:"blur"},{pattern:/^([A-Z]){1}$/,message:"请输入正确的架号,格式为A~Z"}],MaxFrame:[{required:!0,message:"请输入结束架号",trigger:"blur"},{pattern:/^([A-Z]){1}$/,message:"请输入正确的架号,格式为A~Z"}],MinBitNumber:[{required:!0,message:"请输入开始位号",trigger:"blur"},{pattern:/^(0[1-9]|[1-9][0-9]|1[\d]{2}|200)$/,message:"请输入正确的位号，格式为01-200（数字）"}],MaxBitNumber:[{required:!0,message:"请输入结束位号",trigger:"blur"},{pattern:/^(0[1-9]|[1-9][0-9]|1[\d]{2}|200)$/,message:"请输入正确的位号，格式为01-200（数字）"}],PrintNum:[{required:!0,message:"打印数量输入格式为数字",trigger:"blur",type:"number"}]},t.ManualCol=[{title:"* 货架号",render:function(a,e){return a("Input",{props:{value:e.row.LocationCode},on:{"on-change":function(a){t.SetTabInput(a.target.value,e.index,"LocationCode")}}})}},{title:"* 打印数量",render:function(a,e){return a("InputNumber",{style:{width:"80%"},props:{min:1},on:{"on-change":function(a){t.SetTabInput(a,e.index,"PrintNum")}}})}},{title:"操作",width:80,render:function(a,e){return a("Button",{props:{type:"error",size:"small"},on:{click:function(){t.DeleteManualCols(e.index)}}},"删除")}}],t}return Object(o["a"])(e,[{key:"ClearModal",value:function(){this.ShelvesModal=!1,this.ManualData=[new c["a"].GenerationManual],this.AutomaticData=new c["a"].GenerationAutomatic,this.GenerationForm=new c["a"].GenerationForm,this.$refs["GenerationForm"].resetFields()}},{key:"TriggerSelect",value:function(t){1===t?this.ManualData=[new c["a"].GenerationManual]:this.AutomaticData=new c["a"].GenerationAutomatic}},{key:"AddManualCol",value:function(){this.ManualData.push({LocationCode:"",PrintNum:1})}},{key:"PostPrint",value:function(){var t=this;if(void 0!=Object(d["a"])(this)){if(1==this.GenerationForm.GenerationId){if(0==this.ManualData.length)return void this.$UI.Tips.Floating("warning","请至少添加一行记录");for(var a in this.ManualData){if(""==this.ManualData[a].LocationCode)return void this.$UI.Tips.Floating("warning","请输入货架号");var e=/^((1[0-5])|[1-9])(\-)((0[1-9])|[1-9][\d]{1,2})(\-)([A-Z])(\-)(0[1-9]|[1-9][0-9]|1[\d]{2}|200)$/;if(!e.test(this.ManualData[a].LocationCode))return void this.$UI.Tips.Floating("warning","请输入格式为“（1-15数字）-（01-999数字）-（A-Z大写字母）-（01-200数字）”的货架号")}}else{var r=!0;if(this.$refs["AutomaticData"].validate((function(a){if(a){if(t.Automatic.MinFrame.charCodeAt(0)>t.Automatic.MaxFrame.charCodeAt(0))return t.$UI.Tips.Floating("warning","请输入正确的架号范围"),void(r=!1);Number(t.Automatic.MinBitNumber)>Number(t.Automatic.MaxBitNumber)&&(t.$UI.Tips.Floating("warning","请输入正确的位号范围"),r=!1)}else r=!1})),!r)return}var n=Object(d["a"])(),i=this;try{n.VERSION&&(this.$UI.Loading.Show(),1==this.GenerationForm.GenerationId?o():s(),this.ClearModal(),this.$UI.Tips.Floating("success","打印货架条码成功"))}catch(l){}}else this.ClearModal();function o(){for(var t in n.PRINT_INIT(""),n.PRINT_INITA("0mm","0mm","60mm","40mm",""),n.SET_PRINT_PAGESIZE(0,"60mm","40mm",""),i.ManualData)for(var a=1;a<=i.ManualData[t].PrintNum;a++)n.NewPage(),n.ADD_PRINT_BARCODE("5.64mm","10%","80%","19.02mm","128Auto",i.ManualData[t].LocationCode),n.SET_PRINT_STYLEA(0,"ShowBarText",0),n.ADD_PRINT_TEXT(105,"2.99mm","51.59mm",25,i.ManualData[t].LocationCode),n.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),n.SET_PRINT_STYLEA(0,"FontSize",16),n.SET_PRINT_STYLEA(0,"Bold",1),n.SET_PRINT_STYLEA(0,"AlignJustify",1);n.PRINT(),i.$UI.Loading.Hide()}function s(){n.PRINT_INIT(""),n.PRINT_INITA("0mm","0mm","60mm","40mm",""),n.SET_PRINT_PAGESIZE(0,"60mm","40mm","");for(var t=i.AutomaticData.NumeralId,a=i.AutomaticData.MinFrame.charCodeAt(0),e=i.AutomaticData.MaxFrame.charCodeAt(0),r=Number(i.AutomaticData.MinBitNumber),o=Number(i.AutomaticData.MaxBitNumber),s=i.AutomaticData.PrintNum,l=a;l<=e;l++)for(var u=r;u<=o;u++)for(var m=u<10?"0"+u:u,c=1;c<=s;c++){n.NewPage();var d=i.AutomaticData.Warehouse+"-"+t+"-"+String.fromCharCode(l)+"-"+m;n.ADD_PRINT_BARCODE("5.64mm","10%","80%","19.02mm","128Auto",d),n.SET_PRINT_STYLEA(0,"ShowBarText",0),n.ADD_PRINT_TEXT(105,"2.99mm","51.59mm",25,d),n.SET_PRINT_STYLEA(0,"FontName","微软雅黑"),n.SET_PRINT_STYLEA(0,"FontSize",18),n.SET_PRINT_STYLEA(0,"Bold",1),n.SET_PRINT_STYLEA(0,"AlignJustify",1)}n.PRINT(),i.$UI.Loading.Hide()}}},{key:"DeleteManualCols",value:function(t){this.ManualData.splice(t,1)}},{key:"SetTabInput",value:function(t,a,e){this.ManualData[a][e]=t}},{key:"GetLocations",value:function(){for(var t=[],a=1;a<=15;a++)t.push({Key:a,Value:a});return t}}]),e}(m["d"]);u["a"]([Object(m["e"])("GenerationForm.GenerationId")],p.prototype,"TriggerSelect",null),p=u["a"]([Object(m["a"])({name:"PrintShelvesBarcode"})],p);var A=p,I=A,P=e("4023"),T=Object(P["a"])(I,r,n,!1,null,null,null);a["default"]=T.exports}}]);