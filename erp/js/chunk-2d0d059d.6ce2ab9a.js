(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d059d"],{6838:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Col",[e("Button",{attrs:{type:"primary"},on:{click:t.Trigger}},[t._v("导入发货单")]),e("Modal",{attrs:{title:"导入发货单"},on:{"on-cancel":t.CancelModal},model:{value:t.ImportModal,callback:function(a){t.ImportModal=a},expression:"ImportModal"}},[e("Form",{attrs:{"label-width":100,onsubmit:"return false;"}},[e("FormItem",{attrs:{label:"上传文件："}},[e("Upload",{attrs:{action:"","before-upload":t.HandleSelect,accept:"application/vnd.ms-excel",format:["xls","xlsx"]}},[e("Button",{attrs:{type:"primary"}},[t._v("选择文件")]),e("p",{staticClass:"P-Text-Info"},[t._v(t._s(t.File.name))])],1)],1),e("FormItem",{attrs:{label:"下载模板："}},[e("a",{attrs:{href:t.$Server.Warehouse+"/Template/ShipOrder_Template.xlsx",download:""}},[t._v("发货单导入模板.xlsx")])])],1),e("footer",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"primary"},on:{click:t.Validate}},[t._v("提交")]),e("Button",{on:{click:t.CancelModal}},[t._v("取消")])],1)],1)],1)},l=[],n=(e("d9b9"),e("1ff3"),e("3231")),r=e("064d"),s=e("46d7"),i=e("631e"),c=e("4a81"),u=e("d11d"),p=function(t){Object(s["a"])(e,t);var a=Object(i["a"])(e);function e(){var t;return Object(n["a"])(this,e),t=a.apply(this,arguments),t.ImportModal=!1,t.File={},t}return Object(r["a"])(e,[{key:"EmitOperateSuccess",value:function(){}},{key:"Trigger",value:function(){this.$set(this,"ImportModal",!0)}},{key:"HandleSelect",value:function(t){return(new this.$Validate.Xls).Valid(t)?this.$set(this,"File",t):this.$UI.Tips.Floating("warning","请选择格式为xls/xlsx的文件"),!1}},{key:"Validate",value:function(){this.File.name?this.PostImport():this.$UI.Tips.Floating("warning","请选择上传文件")}},{key:"PostImport",value:function(){var t=this;this.$UI.Loading.Show();var a=new FormData;a.append("File",this.File),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.ShipOrderImport,Login:!0},Data:a,Form:!0,Callback:function(a){if(t.$UI.Loading.Hide(),a.IsSuccess){var e="";a.Data.Data.FailCount<1?(e="本次所有发货订单均导入成功，共导入[".concat(a.Data.Data.SuccessCount,"]个发货订单。"),t.CancelModal()):e="本次导入成功[".concat(a.Data.Data.SuccessCount,"]个发货订单，导入失败[").concat(a.Data.Data.FailCount,']个发货订单，详情请下载导入失败发货订单表格进行查看。<a download href="').concat(t.$Server.Warehouse).concat(a.Data.Data.Url,'" target="_blank">导入失败发货订单.xls</a>'),setTimeout((function(){t.$UI.Tips.Modal({Type:"success",Content:e,Callback:function(e){a.Data.Data.SuccessCount>0&&t.EmitOperateSuccess()}})}),500)}else t.$Request.Error(a)}})}},{key:"CancelModal",value:function(){this.$set(this,"ImportModal",!1),this.File={}}}]),e}(u["d"]);c["a"]([Object(u["b"])()],p.prototype,"EmitOperateSuccess",null),p=c["a"]([Object(u["a"])({name:"ImportShipOrder"})],p);var d=p,m=d,h=e("4023"),f=Object(h["a"])(m,o,l,!1,null,null,null);a["default"]=f.exports}}]);