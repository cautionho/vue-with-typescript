(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b955b"],{3305:function(e,l,a){"use strict";a.r(l);var t=function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("Modal",{attrs:{title:e.UploadTitle,"mask-closable":!1},on:{"on-cancel":function(l){return e.HandleRes(!1)}},model:{value:e.OpenUploadmodal,callback:function(l){e.OpenUploadmodal=l},expression:"OpenUploadmodal"}},[a("Form",{attrs:{onsubmit:"return false","label-width":100}},[a("Form-item",{attrs:{label:"选择文件："}},[a("Upload",{ref:"UploadFile",attrs:{action:e.UploadUrl,format:["xlsx"],"before-upload":e.HandleUpload,"on-success":e.UploadSuccess,"on-error":e.HandleError,headers:e.Headers}},[a("Button",{attrs:{type:"primary",icon:"ios-cloud-upload-outline"}},[e._v("选择文件")])],1),null!==e.File?a("p",[e._v(e._s(e.File.name)+" ")]):e._e(),"上传产品"==e.UploadTitle?a("div",[e._v("说明：最多一次导入500条数据,只支持xlsx格式文件")]):a("div",[e._v("说明：最多一次导入500条数据,只能上传列表中结果为失败的产品,只支持xlsx格式文件")])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.UploadProduct}},[e._v("上传")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(l){return e.HandleRes(!1)}}},[e._v("取消")])],1)],1)},o=[],n=(a("d9b9"),a("03d8"),a("4d62"),a("1ff3"),a("3231")),i=a("064d"),s=a("46d7"),r=a("631e"),d=a("4a81"),c=a("d11d"),p=function(e){Object(s["a"])(a,e);var l=Object(r["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=l.apply(this,arguments),e.UploadTitle="",e.OpenUploadmodal=!1,e.File=null,e.UploadUrl=e.$Server.Sales+e.$Api.AllegroStoreImportProduct,e.Headers={userid:JSON.parse(e.$Cookie.Get("frler_user")).UserId},e}return Object(i["a"])(a,[{key:"HandleRes",value:function(e){this.$refs.UploadFile&&this.$refs["UploadFile"].clearFiles(),this.OpenUploadmodal=!1,this.File=null}},{key:"TriggerModal",value:function(e){this.UploadTitle=1===e?"上传产品":"重新上传产品",this.OpenUploadmodal=!0}},{key:"HandleUpload",value:function(e){return this.File=e,!1}},{key:"HandleError",value:function(e,l){this.$UI.Loading.Hide(),this.$UI.Tips.Modal({Type:"warning",Content:e,Callback:function(e){}})}},{key:"UploadProduct",value:function(){if(null!=this.File){var e=this.File.name.slice(this.File.name.lastIndexOf(".")+1);"xlsx"==e?(this.$refs["UploadFile"].post(this.File),this.$UI.Loading.Show()):this.$UI.Tips.Floating("warning","请选择格式为xlsx的文件进行导入操作")}else this.$UI.Tips.Floating("warning","请选择文件进行操作")}},{key:"UploadSuccess",value:function(e){this.$UI.Loading.Hide(),e.IsSuccess?(e.Data.Data.Url?(this.$UI.Tips.Modal({Type:"success",Content:"此次上传成功".concat(e.Data.Data.SuccessCount,"条，失败").concat(e.Data.Data.FailCount,"条，详情请查看Excel表。"),Callback:function(e){}}),window.open("".concat(this.$Server.Sales,"/").concat(e.Data.Data.Url),"_blank")):this.$UI.Tips.Modal({Type:"success",Content:"产品数据上传中，请稍后通过页面列表查看上传结果。",Callback:function(e){}}),this.HandleRes(!0)):this.$UI.Tips.Modal({Type:"error",Content:e.Msg,Callback:function(e){}})(this.$refs["UploadFile"]).clearFiles()}}]),a}(c["d"]);d["a"]([Object(c["b"])()],p.prototype,"HandleRes",null),p=d["a"]([Object(c["a"])({name:"AllegroUploadPro"})],p);var u=p,U=u,f=a("4023"),h=Object(f["a"])(U,t,o,!1,null,null,null);l["default"]=h.exports}}]);