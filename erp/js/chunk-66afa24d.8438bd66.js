(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66afa24d"],{"14a5":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Form",{attrs:{onsubmit:"return false","label-width":0}},[a("Row",[a("Col",{attrs:{span:"16"}},["eBay"!==e.HandleMailBase.BuyerId&&e.Powers.EbayMsgReply?a("FormItem",{staticClass:"P-MB-5"},[a("Input",{attrs:{placeholder:"回复内容",type:"textarea",autosize:{minRows:8,maxRows:8}},model:{value:e.ReplyContent,callback:function(t){e.ReplyContent=t},expression:"ReplyContent"}})],1):e._e(),a("FormItem",{staticClass:"P-MB-0"},[e.Powers.EbayMsgIgnore?a("Button",{attrs:{type:"error"},on:{click:function(t){return e.EmitOperates(3)}}},[e._v("忽略")]):e._e(),e.Powers.EbayMsgAddRemark?a("Button",{staticClass:"P-ML-5",attrs:{type:"primary"},on:{click:function(t){return e.EmitOperates(5)}}},[e._v("添加备注")]):e._e(),e.Powers.EbayMsgMove?a("Button",{staticClass:"P-ML-5",attrs:{type:"primary"},on:{click:function(t){return e.EmitOperates(4)}}},[e._v("移动")]):e._e(),"eBay"!==e.HandleMailBase.BuyerId&&e.Powers.EbayMsgReply?a("HandleMailImgs",{ref:"HandleMailImgs",staticClass:"P-ML-5"}):e._e(),"eBay"!==e.HandleMailBase.BuyerId&&e.Powers.EbayMsgReply?a("Button",{staticClass:"P-ML-5",attrs:{type:"primary"},on:{click:e.HandleReply}},[e._v("回复")]):e._e()],1)],1),"eBay"!==e.HandleMailBase.BuyerId&&e.Powers.EbayMsgReply?a("Col",{staticClass:"P-PL-10",attrs:{span:"8"}},[a("FormItem",{staticClass:"P-MB-5"},[a("Select",{attrs:{placeholder:"回复模板类型",onChange:e.GetTemplateListLoading,options:e.TemplateTypeDrop,optionValKey:"TemplateTypeId",optionKey:"TemplateTypeName"},model:{value:e.TplType,callback:function(t){e.TplType=t},expression:"TplType"}})],1),a("FormItem",{staticClass:"P-MB-0 Tpl-List"},e._l(e.TemplateList,(function(t,s){return a("a",{key:s,staticClass:"P-MR-5",on:{click:function(a){return e.RenderContent(t)}}},[e._v("("+e._s(s+1)+") "+e._s(t.TemplateTitle))])})),0)],1):e._e()],1)],1)},i=[],n=(a("d9b9"),a("6bf8"),a("b916"),a("9bdd"),a("3231")),r=a("064d"),l=a("46d7"),o=a("631e"),p=a("4a81"),c=a("d11d"),d=a("4606"),u=function(e){Object(l["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.TplType=0,e.TemplateList=[],e.ReplyContent="",e}return Object(r["a"])(a,[{key:"EmitHandleSuccess",value:function(){}},{key:"EmitOperates",value:function(e){}},{key:"WatchMessageId",value:function(e){this.$refs.HandleMailImgs&&this.$refs.HandleMailImgs.Reset()}},{key:"mounted",value:function(){this.Powers.EbayMsgReply&&this.GetTemplateList()}},{key:"GetTemplateList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:this.$Api.GetTemplateList,Login:!0},Data:{PageIndex:1,PageSize:500,Conditions:new d["a"].SearchMailTpl({TemplateTypeId:this.TplType})},Callback:function(a){t&&e.$UI.Loading.Hide(),a.IsSuccess?e.$set(e,"TemplateList",a.Data.PageModel.Items):e.$Request.Error(a)}})}},{key:"GetTemplateListLoading",value:function(){this.$UI.Loading.Show(),this.GetTemplateList(!0)}},{key:"RenderContent",value:function(e){var t=e.Content;if(this.ShipOrder){var a=this.$UI.Render.Date(this.ShipOrder.ShipedTime,!0),s=this.$UI.Render.Date(this.ShipOrder.PaidTime,!0);t=t.replace(/\[BuyerId\]/g,this.ShipOrder.BuyerId),t=t.replace(/\[TrackingNumber\]/g,this.ShipOrder.TrackingNumber||"[TrackingNumber]"),t=t.replace(/\[ShippingCarrier\]/g,this.ShipOrder.ShippingCarrier),t=t.replace(/\[ShipedTime\]/g,"-"===a?"[ShipedTime]":a),t=t.replace(/\[PaidTime\]/g,"-"===s?"[PaidTime]":s),t=t.replace(/\[ShipToAddress\]/g,"".concat(this.ShipOrder.BuyerStreet2?this.ShipOrder.BuyerStreet2+",":"").concat(this.ShipOrder.BuyerStreet1,",").concat(this.ShipOrder.BuyerCity,",").concat(this.ShipOrder.BuyerState,",").concat(this.ShipOrder.BuyerCountry,",").concat(this.ShipOrder.BuyerZipCode))}this.$set(this,"ReplyContent",t)}},{key:"HandleReply",value:function(){var e=this;if(this.ReplyContent){this.$UI.Loading.Show();var t={MainMessageId:this.MessageId,Content:this.ReplyContent,Images:this.$refs.HandleMailImgs.Images};this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:this.$Api.EbayMessageReply,Login:!0},Data:t,Callback:function(t){e.$UI.Loading.Hide(),t.IsSuccess?(e.$UI.Tips.Floating("success","回复成功"),e.ResetContent(),e.EmitHandleSuccess()):e.$Request.Error(t)}})}else this.$UI.Tips.Floating("warning","请输入回复内容")}},{key:"ResetContent",value:function(){this.$set(this,"ReplyContent","")}}]),a}(c["d"]);p["a"]([Object(c["c"])()],u.prototype,"TemplateTypeDrop",void 0),p["a"]([Object(c["c"])()],u.prototype,"HandleMailBase",void 0),p["a"]([Object(c["c"])()],u.prototype,"MessageId",void 0),p["a"]([Object(c["c"])()],u.prototype,"Powers",void 0),p["a"]([Object(c["b"])()],u.prototype,"EmitHandleSuccess",null),p["a"]([Object(c["b"])()],u.prototype,"EmitOperates",null),p["a"]([Object(c["e"])("MessageId")],u.prototype,"WatchMessageId",null),u=p["a"]([Object(c["a"])({name:"HandleMail",components:{HandleMailImgs:function(){return a.e("chunk-5b16ddcb").then(a.bind(null,"da17"))}}})],u);var y=u,h=y,m=(a("7030"),a("4023")),g=Object(m["a"])(h,s,i,!1,null,"6731c963",null);t["default"]=g.exports},7030:function(e,t,a){"use strict";var s=a("cf7e"),i=a.n(s);i.a},cf7e:function(e,t,a){}}]);