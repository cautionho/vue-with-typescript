(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aed73"],{"0c7a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",{staticClass:"P-Inline-Block"},[a("Col",{attrs:{span:"24"}},[a("Modal",{attrs:{title:"查看相关订单","mask-closable":!1,width:"700"},on:{"on-cancel":function(e){return t.HandleRes(!1)}},model:{value:t.IsShowModal,callback:function(e){t.IsShowModal=e},expression:"IsShowModal"}},[a("Button",{staticClass:"P-MB-10",attrs:{type:"primary"},on:{click:t.SetOutStock}},[t._v("设置订单缺货")]),a("Table",{attrs:{columns:t.TbCol,data:t.TbData,size:"small",stripe:"",height:"300"}}),a("footer",{staticClass:"P-TA-R",attrs:{slot:"footer"},slot:"footer"})],1),a("ShipOrderDetails",{ref:"ShipOrderDetails",on:{"emit-operate-success":t.EmitOperateSuccess}})],1)],1)},s=[],n=(a("76bb"),a("6bf8"),a("3231")),i=a("064d"),o=a("46d7"),u=a("631e"),c=a("4a81"),d=a("d11d"),l=function(t){Object(o["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.TbData=[],t.CurrId=0,t.IsShowModal=!1,t.TbCol=[{title:"发货单号",key:"OrderCode",render:function(e,a){return e("p",{class:"P-Pointer P-Text-Info",on:{click:function(){t.$refs.ShipOrderDetails.Validate({OrderId:a.row.OrderId,OrderCode:""})}}},a.row.OrderCode)}},{title:"状态",key:"Status",render:function(e,a){return e("span",t.$Utils.GetEnumArr(t.$Enums.Warehouse.ShipOrderStatus)[a.row.Status-1])}},{title:"下单时间",key:"PlatOrderTime",render:function(e,a){return e("span",t.$UI.Render.Date(a.row.PlatOrderTime,!0))}}],t}return Object(i["a"])(a,[{key:"HandleRes",value:function(t){this.IsShowModal=!1,this.TbData=[]}},{key:"TriggerModal",value:function(t){this.CurrId=t,this.GetOutStockOrder(),this.IsShowModal=!0}},{key:"GetOutStockOrder",value:function(){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.CheckOutGetOutStockOrder,Login:!0},Data:this.CurrId,Callback:function(e){e.IsSuccess?t.TbData=e.Data.Data:t.$Request.Error(e),t.$UI.Loading.Hide()}})}},{key:"SetOutStock",value:function(){var t=this;this.TbData.length<1?this.$UI.Tips.Floating("warning","没有相关订单，无法进行操作。请检查！"):this.$UI.Tips.Modal({Type:"confirm",Content:"是否将所有订单都设置为缺货？",Callback:function(e){e&&t.ChangeOrderStatus()}})}},{key:"ChangeOrderStatus",value:function(){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.ShipOrderChangeStatus,Login:!0},Data:{OrderId:this.TbData.map((function(t){return t.OrderId})),TargetStatus:7,Remark:""},Callback:function(e){e.IsSuccess?t.CheckOutDemandStatus():t.$Request.Error(e),t.$UI.Loading.Hide()}})}},{key:"CheckOutDemandStatus",value:function(){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.CheckOutDemandSetStatus,Login:!0},Data:{Status:2,Id:this.CurrId},Callback:function(e){e.IsSuccess?(t.$UI.Tips.Floating("success","设置订单缺货成功"),t.HandleRes(!0)):t.$Request.Error(e),t.$UI.Loading.Hide()}})}},{key:"EmitOperateSuccess",value:function(){console.log(123)}}]),a}(d["d"]);c["a"]([Object(d["b"])()],l.prototype,"HandleRes",null),l=c["a"]([Object(d["a"])({name:"OutStockOrder",components:{ShipOrderDetails:function(){return a.e("chunk-1c5a19f1").then(a.bind(null,"6652"))}}})],l);var h=l,S=h,O=a("4023"),p=Object(O["a"])(S,r,s,!1,null,null,null);e["default"]=p.exports}}]);