(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b90e1248"],{7843:function(e,t,a){},cac4:function(e,t,a){"use strict";var i=a("7843"),n=a.n(i);n.a},cf83:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Form",{ref:"HandleForm",attrs:{model:e.HandleForm,onsubmit:"return false","label-width":100}},[3===e.Disputed?a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"模板类型："}},[a("Select",{attrs:{placeholder:"模板类型",onChange:e.GetTemplateListLoading,options:e.TemplateTypeDrop,optionValKey:"TemplateTypeId",optionName:"TemplateTypeName"},model:{value:e.TplType,callback:function(t){e.TplType=t},expression:"TplType"}})],1),a("FormItem",{staticClass:"P-MB-10",attrs:{label:"模板："}},[a("div",{staticClass:"Tpl-Container"},e._l(e.TemplateList,(function(t,i){return a("a",{key:i,staticClass:"P-MR-5",on:{click:function(a){return e.RenderContent(t)}}},[e._v(e._s("("+(i+1)+") "+t.TemplateTitle))])})),0)]),a("FormItem",{attrs:{label:"消息：",prop:"Content"}},[a("Input",{attrs:{placeholder:"消息",type:"textarea",autosize:{minRows:6,maxRows:6}},model:{value:e.HandleForm.Content,callback:function(t){e.$set(e.HandleForm,"Content",t)},expression:"HandleForm.Content"}})],1)],1):a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"申诉备注："}},[a("Input",{attrs:{placeholder:"申诉备注",type:"textarea",autosize:{minRows:6,maxRows:6}},model:{value:e.HandleForm.Content,callback:function(t){e.$set(e.HandleForm,"Content",t)},expression:"HandleForm.Content"}})],1)],1)],1)},n=[],s=(a("d9b9"),a("e8f2"),a("6bf8"),a("b916"),a("9bdd"),a("3231")),r=a("064d"),o=a("46d7"),l=a("631e"),p=a("4a81"),c=a("d11d"),u=a("a349"),d=a("4606"),m=function(e){Object(o["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.TemplateTypeDrop=[],e.TemplateList=[],e.TplType=0,e.HandleForm=new d["a"].HandleCase,e}return Object(r["a"])(a,[{key:"EmitHandleSuccess",value:function(){}},{key:"mounted",value:function(){this.TemplateTypeDrop.length||this.GetTemplateTypeDrop()}},{key:"GetTemplateTypeDrop",value:function(){var e=this;this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:this.$Api.GetTemplateTypeTree,Login:!0},Data:"",Callback:function(t){t.IsSuccess?(e.$set(e,"TemplateTypeDrop",t.Data.Data),e.GetTemplateList()):e.$Request.Error(t)}})}},{key:"GetTemplateList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:this.$Api.GetTemplateList,Login:!0},Data:{PageIndex:1,PageSize:500,Conditions:new d["a"].SearchMailTpl({TemplateTypeId:this.TplType})},Callback:function(a){t&&e.$UI.Loading.Hide(),a.IsSuccess?e.$set(e,"TemplateList",a.Data.PageModel.Items):e.$Request.Error(a)}})}},{key:"GetTemplateListLoading",value:function(){this.$UI.Loading.Show(),this.GetTemplateList(!0)}},{key:"RenderContent",value:function(e){var t=e.Content;if(this.SHIP_ORDER_INFO.Id){var a=this.$UI.Render.Date(this.SHIP_ORDER_INFO.ShipedTime,!0),i=this.$UI.Render.Date(this.SHIP_ORDER_INFO.PaidTime,!0);t=t.replace(/\[BuyerId\]/g,this.SHIP_ORDER_INFO.BuyerUserId),t=t.replace(/\[TrackingNumber\]/g,this.SHIP_ORDER_INFO.TrackingNumber||"[TrackingNumber]"),t=t.replace(/\[ShippingCarrier\]/g,this.SHIP_ORDER_INFO.ShippingService),t=t.replace(/\[ShipedTime\]/g,"-"===a?"[ShipedTime]":a),t=t.replace(/\[PaidTime\]/g,"-"===i?"[PaidTime]":i),t=t.replace(/\[ShipToAddress\]/g,"".concat(this.SHIP_ORDER_ADDRESS.BuyerStreet2?this.SHIP_ORDER_ADDRESS.BuyerStreet2+",":"").concat(this.SHIP_ORDER_ADDRESS.BuyerStreet1,",").concat(this.SHIP_ORDER_ADDRESS.BuyerCity,",").concat(this.SHIP_ORDER_ADDRESS.BuyerState,",").concat(this.SHIP_ORDER_ADDRESS.BuyerCountry,",").concat(this.SHIP_ORDER_ADDRESS.BuyerZipCode))}this.$set(this.HandleForm,"Content",t)}},{key:"Reset",value:function(){this.$set(this,"HandleForm",new d["a"].HandleCase),this.$set(this,"TplType","")}},{key:"Validate",value:function(){var e=this;this.$UI.Loading.Show();var t=JSON.parse(JSON.stringify(this.HandleForm));t.CaseId=this.CASE_INFO.CaseId,this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:3===this.Disputed?this.$Api.CaseRefund:this.$Api.CaseAppeal,Login:!0},Data:t,Callback:function(t){t.IsSuccess?(e.$UI.Tips.Floating("success",3===e.Disputed?"退款成功":"申诉成功"),e.EmitHandleSuccess()):(e.$UI.Loading.Hide(),e.$Request.Error(t))}})}},{key:"CASE_INFO",get:function(){return this["CustomerService/CASE_INFO"]}},{key:"SHIP_ORDER_INFO",get:function(){return this["ShipOrder/SHIP_ORDER_INFO"]}}]),a}(c["d"]);p["a"]([Object(c["c"])({type:Number,default:0})],m.prototype,"Disputed",void 0),p["a"]([u["b"]],m.prototype,"CustomerService/CASE_INFO",void 0),p["a"]([u["b"]],m.prototype,"ShipOrder/SHIP_ORDER_INFO",void 0),p["a"]([Object(c["b"])()],m.prototype,"EmitHandleSuccess",null),m=p["a"]([Object(c["a"])({name:"HandleCase",components:{ModifyAfterSalesOrder:function(){return a.e("chunk-1d9ffbc2").then(a.bind(null,"3116"))}}})],m);var S=m,h=S,T=(a("cac4"),a("4023")),R=Object(T["a"])(h,i,n,!1,null,"0eabb93f",null);t["default"]=R.exports}}]);