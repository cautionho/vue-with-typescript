(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b59d7"],{"1a3d":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Row",{staticClass:"P-Inline-Block"},[r("Button",{staticClass:"P-Inline-Block P-MR-10",attrs:{type:"primary"},on:{click:t.TriggerModal}},[t._v("导出库存")]),r("Modal",{attrs:{title:"导出库存","mask-closable":!1,width:650},on:{"on-cancel":t.CancelModal},model:{value:t.ExportInventoryModal,callback:function(e){t.ExportInventoryModal=e},expression:"ExportInventoryModal"}},[r("Form",{ref:"ExportInventoryMsg",attrs:{"label-width":95,model:t.ExportInventoryMsg,name:"ExportInventoryMsg",rules:t.ExportInventoryRules,onsubmit:"return false"}},[r("Form-item",{attrs:{label:"仓库：",prop:"WareHouseId"}},[r("Select",{attrs:{placeholder:"请选择仓库",options:t.WarehouseDropList},model:{value:t.ExportInventoryMsg.WareHouseId,callback:function(e){t.$set(t.ExportInventoryMsg,"WareHouseId",e)},expression:"ExportInventoryMsg.WareHouseId"}})],1),r("Form-item",{attrs:{label:"特性标签：",prop:"AttributeIds"}},[r("Select",{attrs:{multiple:"",placeholder:"请选择特性标签",options:t.AttributeList},model:{value:t.ExportInventoryMsg.AttributeIds,callback:function(e){t.$set(t.ExportInventoryMsg,"AttributeIds",e)},expression:"ExportInventoryMsg.AttributeIds"}})],1),r("Form-item",{attrs:{label:"SKU状态：",prop:"SkuStatus"}},[r("Select",{attrs:{multiple:"",placeholder:"请选择SKU状态",options:t.SkuStatusList},model:{value:t.ExportInventoryMsg.SkuStatus,callback:function(e){t.$set(t.ExportInventoryMsg,"SkuStatus",e)},expression:"ExportInventoryMsg.SkuStatus"}})],1),r("Form-item",{attrs:{label:"库存类型：",prop:"InventoryType"}},[r("Select",{staticClass:"P-W-200",attrs:{placeholder:"请选择库存类型",options:t.InventoryTypeList},model:{value:t.ExportInventoryMsg.InventoryType,callback:function(e){t.$set(t.ExportInventoryMsg,"InventoryType",e)},expression:"ExportInventoryMsg.InventoryType"}}),r("Form-item",{staticClass:"P-Inline-Block",staticStyle:{width:"135px"},attrs:{prop:"StartQuantity"}},[r("Input",{ref:"StartQuantity",attrs:{placeholder:"开始范围",disabled:t.IsDisabled},model:{value:t.ExportInventoryMsg.StartQuantity,callback:function(e){t.$set(t.ExportInventoryMsg,"StartQuantity",e)},expression:"ExportInventoryMsg.StartQuantity"}})],1),t._v(" - "),r("Form-item",{staticClass:"P-Inline-Block",staticStyle:{width:"134px"},attrs:{prop:"EndQuantity"}},[r("Input",{ref:"EndQuantity",attrs:{placeholder:"结束范围",disabled:t.IsDisabled},model:{value:t.ExportInventoryMsg.EndQuantity,callback:function(e){t.$set(t.ExportInventoryMsg,"EndQuantity",e)},expression:"ExportInventoryMsg.EndQuantity"}})],1)],1),r("Form-item",{attrs:{label:"采购员：",prop:"PurchaserIds"}},[r("Select",{attrs:{multiple:"",placeholder:"请选择采购员",options:t.PurchaserList},model:{value:t.ExportInventoryMsg.PurchaserIds,callback:function(e){t.$set(t.ExportInventoryMsg,"PurchaserIds",e)},expression:"ExportInventoryMsg.PurchaserIds"}})],1)],1),r("footer",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:t.CheckExportMsg}},[t._v("创建导出库存任务")]),r("Button",{on:{click:t.CancelModal}},[t._v("取消")])],1)],1)],1)},o=[],s=(r("e8f2"),r("6bf8"),r("eb83"),r("3231")),a=r("064d"),i=r("46d7"),u=r("631e"),l=r("4a81"),p=r("d11d"),y=r("1f41"),c=function(t){Object(i["a"])(r,t);var e=Object(u["a"])(r);function r(){var t;return Object(s["a"])(this,r),t=e.apply(this,arguments),t.IsDisabled=!0,t.ExportInventoryModal=!1,t.SkuStatusList=t.$Utils.GetEnumArr(t.$Enums.Warehouse.SkuStatus),t.InventoryTypeList=t.$Utils.GetEnumArr(t.$Enums.Public.Inventory),t.AttributeList=[],t.PurchaserList=[],t.ExportInventoryMsg=new y["a"].ExportInventory,t.ExportInventoryRules={WareHouseId:[{required:!0,message:"请选择仓库",trigger:"change",type:"number"}]},t}return Object(a["a"])(r,[{key:"ChangeType",value:function(t){t?this.IsDisabled=!1:(this.IsDisabled=!0,this.ExportInventoryMsg.StartQuantity="",this.ExportInventoryMsg.EndQuantity="")}},{key:"CancelModal",value:function(){this.ExportInventoryModal=!1,this.$refs["ExportInventoryMsg"].resetFields()}},{key:"TriggerModal",value:function(){this.ExportInventoryMsg.SkuStatus=[1,2,3,6],this.ExportInventoryModal=!0,this.PurchaserList.length<1&&this.GetPurchaser(),this.AttributeList.length<1&&this.GetInventoryType()}},{key:"GetInventoryType",value:function(){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Purchase,Api:{Address:this.$Api.AttributeDropList,Login:!0},Data:"",Callback:function(e){e.IsSuccess?t.AttributeList=e.Data.DropList:t.$Request.Error(e),t.$UI.Loading.Hide()}})}},{key:"GetPurchaser",value:function(){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Admin,Api:{Address:this.$Api.GetUserDropList,Login:!0},Data:"采购员",Callback:function(e){e.IsSuccess?t.PurchaserList=e.Data.DropList:t.$Request.Error(e),t.$UI.Loading.Hide()}})}},{key:"CheckExportMsg",value:function(){var t=this;this.$refs["ExportInventoryMsg"].validate((function(e){if(e){var r=/^[0-9]+$/;if(""!=t.ExportInventoryMsg.StartQuantity||""!=t.ExportInventoryMsg.EndQuantity){if(""==t.ExportInventoryMsg.StartQuantity||""==t.ExportInventoryMsg.EndQuantity)return void t.$UI.Tips.Floating("warning","请输入库存范围区间");if(!r.test(t.ExportInventoryMsg.StartQuantity.toString()))return t.$UI.Tips.Floating("warning","请输入大于或等于0的正整数"),t.$refs.StartQuantity.select(),void t.$refs.StartQuantity.focus();if(!r.test(t.ExportInventoryMsg.EndQuantity.toString()))return t.$UI.Tips.Floating("warning","请输入大于或等于0的正整数"),t.$refs.EndQuantity.select(),void t.$refs.EndQuantity.focus();if(Number(t.ExportInventoryMsg.StartQuantity)<0)return t.$UI.Tips.Floating("warning","请输入大于或等于0的库存开始范围"),t.$refs.StartQuantity.select(),void t.$refs.StartQuantity.focus();if(Number(t.ExportInventoryMsg.EndQuantity)<0)return t.$UI.Tips.Floating("warning","请输入大于或等于0的库存结束范围"),t.$refs.EndQuantity.select(),void t.$refs.EndQuantity.focus();if(Number(t.ExportInventoryMsg.StartQuantity)>Number(t.ExportInventoryMsg.EndQuantity))return void t.$UI.Tips.Floating("warning","库存开始范围不能大于结束范围")}var n=JSON.parse(JSON.stringify(t.ExportInventoryMsg));n.StartQuantity=Number(n.StartQuantity),n.EndQuantity=Number(n.EndQuantity),n.InventoryType=Number(n.InventoryType),t.ExportInventory(n)}}))}},{key:"ExportInventory",value:function(t){var e=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.Warehouse,Api:{Address:this.$Api.InventoryExport,Login:!0},Data:t,Callback:function(t){t.IsSuccess?(e.CancelModal(),e.$UI.Tips.Modal({Type:"success",Content:"创建导出库存任务成功。请到报表-导出管理模块查看目前正在进行的导出任务，并在导出成功后可以下载对应数据。",Callback:function(t){}})):e.$Request.Error(t),e.$UI.Loading.Hide()}})}}]),r}(p["d"]);l["a"]([Object(p["c"])()],c.prototype,"WarehouseDropList",void 0),l["a"]([Object(p["e"])("ExportInventoryMsg.InventoryType")],c.prototype,"ChangeType",null),c=l["a"]([Object(p["a"])({name:"ExportInventory"})],c);var v=c,d=v,I=r("4023"),E=Object(I["a"])(d,n,o,!1,null,null,null);e["default"]=E.exports}}]);