(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d231026"],{ef5d:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Row",{staticClass:"P-Inline-Block"},[a("Button",{staticClass:"P-MB-10 P-MR-10 P-Inline-Block",attrs:{type:"primary"},on:{click:function(e){t.ShowModal=!0}}},[t._v("导入运费")]),a("Modal",{attrs:{title:"导入运费","mask-closable":!1},on:{"on-cancel":function(e){return t.ImportProfit(!1)}},model:{value:t.ShowModal,callback:function(e){t.ShowModal=e},expression:"ShowModal"}},[a("Form",{attrs:{onsubmit:"return false","label-width":100}},[a("Form-item",{attrs:{label:"导入类型：",required:""}},[a("Select",{attrs:{placeholder:"选择导入类型",options:t.ImportTypeList},model:{value:t.ImportType,callback:function(e){t.ImportType=e},expression:"ImportType"}})],1),a("Form-item",{attrs:{label:"选择文件：",required:""}},[a("Upload",{ref:"UploadFile",attrs:{data:t.UploadData,action:t.UploadUrl,format:["xls","xlsx"],"before-upload":t.HandleUpload,"on-success":t.UploadSuccess,"on-error":t.HandleError,headers:t.Headers}},[a("Button",{attrs:{type:"primary",icon:"ios-cloud-upload-outline"}},[t._v("选择文件")])],1),null!==t.File?a("p",[t._v(t._s(t.File.name)+" ")]):t._e(),a("div",[t._v("说明：最多一次导入10000条数据")])],1),a("Form-item",{attrs:{label:"下载模板："}},[a("a",{attrs:{href:t.$Server.Warehouse+t.TemplateExcel,download:""}},[t._v("导入运费模板.xls")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:t.UploadBefore}},[t._v("导入")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.ImportProfit(!1)}}},[t._v("取消")])],1)],1)],1)},l=[],r=(a("d9b9"),a("03d8"),a("4d62"),a("1ff3"),a("3231")),i=a("064d"),s=a("46d7"),n=a("631e"),p=a("4a81"),c=a("d11d"),d=a("1b1c"),u=function(t){Object(s["a"])(a,t);var e=Object(n["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.ImportType="",t.ImportTypeList=t.$Utils.GetEnumArr(t.$Enums.Report.ImportType),t.UploadData=new d["a"].ImportTypeForm,t.TemplateExcel="//Template//导入头尾程运费模板.xlsx",t.ShowModal=!1,t.File=null,t.UploadUrl=t.$Server.Warehouse+t.$Api.ImportTwoStageFreight,t.Headers={userid:JSON.parse(t.$Cookie.Get("frler_user")).UserId},t}return Object(i["a"])(a,[{key:"ImportProfit",value:function(t){this.$refs.UploadFile&&this.$refs["UploadFile"].clearFiles(),this.ShowModal=!1,this.File=null,this.ImportType=""}},{key:"TriggerModal",value:function(){this.ShowModal=!0}},{key:"HandleUpload",value:function(t){return this.File=t,!1}},{key:"HandleError",value:function(t,e){this.$UI.Loading.Hide(),this.$UI.Tips.Modal({Type:"warning",Content:t,Callback:function(t){}})}},{key:"UploadBefore",value:function(){if(this.ImportType)if(null!=this.File){var t=this.File.name.slice(this.File.name.lastIndexOf(".")+1);"xls"==t||"xlsx"==t?(this.UploadData.ImportType=this.ImportType,this.$refs["UploadFile"].post(this.File),this.$UI.Loading.Show()):this.$UI.Tips.Floating("warning","请选择格式为xlsx的文件进行导入操作")}else this.$UI.Tips.Floating("warning","请选择文件进行操作");else this.$UI.Tips.Floating("warning","请选择导入类型")}},{key:"UploadSuccess",value:function(t){if(t.IsSuccess){var e="";t.Data.Data.Url?e="本次导入成功【".concat(t.Data.Data.SuccessCount,"】条数据，导入失败【").concat(t.Data.Data.FailCount,"】条数据，重算毛利【").concat(t.Data.Data.RecalculatedCount,'】条数据<span>，详情请下载<a style="color:#4180b1" download href="').concat(this.$Server.Warehouse+t.Data.Data.Url,'">导入失败运费异常表格</a>进行查看</span>'):1===this.UploadData.ImportType||2===this.UploadData.ImportType?e=0===t.Data.Data.RecalculatedCount?"本次所有数据都导入成功":"本次所有数据都导入成功并重算毛利，请到已确认毛利报表查看":3!==this.UploadData.ImportType&&4!==this.UploadData.ImportType||(e="本次所有数据都导入成功并重算毛利，请到已确认毛利报表进行查看"),this.$UI.Tips.Modal({Type:"success",Content:e,Callback:function(t){}}),this.ImportProfit(!0)}else this.$UI.Loading.Hide(),this.$Request.Error(t),this.$refs["UploadFile"].clearFiles()}}]),a}(c["d"]);p["a"]([Object(c["b"])()],u.prototype,"ImportProfit",null),u=p["a"]([Object(c["a"])({name:"ImportTwoStageFreight"})],u);var h=u,m=h,f=a("4023"),I=Object(f["a"])(m,o,l,!1,null,null,null);e["default"]=I.exports}}]);