(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f04b0"],{"9c6f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Row",[r("Tree",{ref:"PlatformStoreTree",attrs:{data:e.PlatformStoreTree,"show-checkbox":""}})],1)},n=[],i=(r("76bb"),r("6ed5"),r("6bf8"),r("b916"),r("d088"),r("e24e")),o=(r("b449"),r("5d83")),s=r("3231"),c=r("064d"),l=r("46d7"),u=r("631e"),f=r("4a81"),h=r("d11d"),d=function(e){Object(l["a"])(r,e);var t=Object(u["a"])(r);function r(){var e;return Object(s["a"])(this,r),e=t.apply(this,arguments),e.PlatformStoreTree=[],e.PlatformDrop=e.$Utils.GetEnumArr(e.$Enums.Sales.Platform),e}return Object(c["a"])(r,[{key:"Trigger",value:function(e){var t=this;this.$UI.Loading.Show(),setTimeout((function(){t.PlatformStoreTree.length?t.SetDefaultSelected(e):t.GetStoreTree(e)}),100)}},{key:"GetStoreTree",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.PlatformDrop.map((function(e,t){o.PlatformStoreTree.push({title:e.Key,value:e.Value,index:t,children:[],loading:!1,disableCheckbox:!0})})),r=Object(i["a"])(this.PlatformStoreTree),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=14;break}return n=a.value,e.t0=this,e.t1=n,e.next=10,this.GetStoreDrops(n.value);case 10:e.t2=e.sent,e.t0.$set.call(e.t0,e.t1,"children",e.t2);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t3=e["catch"](2),r.e(e.t3);case 19:return e.prev=19,r.f(),e.finish(19);case 22:this.SetDefaultSelected(t),this.$UI.Loading.Hide();case 24:case"end":return e.stop()}}),e,this,[[2,16,19,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"GetStoreDrops",value:function(e){var t=this;return new Promise((function(r){t.$Api.Sales[String(e)].StoreDrop?t.$Request.Post({Server:t.$Server.Sales,Api:{Address:t.$Api.Sales[String(e)].StoreDrop},Data:!0,Callback:function(a){if(a.IsSuccess){var n,o=[],s=Object(i["a"])(a.Data.DropList);try{for(s.s();!(n=s.n()).done;){var c=n.value;o.push({title:c.Key,value:c.Value,platform:e})}}catch(l){s.e(l)}finally{s.f()}r(o)}else r([]),t.$Request.Error(a)}}):r([])}))}},{key:"SetDefaultSelected",value:function(e){var t,r=this,a=JSON.parse(JSON.stringify(this.PlatformStoreTree)),n=e.split(",")||[],o=Object(i["a"])(a);try{var s=function(){var e=t.value;e.expand=!1,e.checked=!1,e.indeterminate=!1;var r,a=Object(i["a"])(e.children);try{var o=function(){var t=r.value;n.some((function(r){return r.split("-")[1]==t.value&&r.split("-")[0]==e.value}))?(e.expand=!0,t.checked=!0):t.checked=!1};for(a.s();!(r=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}};for(o.s();!(t=o.n()).done;)s()}catch(c){o.e(c)}finally{o.f()}this.$set(this,"PlatformStoreTree",a),this.$refs.PlatformStoreTree.rebuildTree(),this.$nextTick((function(){r.$UI.Loading.Hide()}))}},{key:"GetSelected",value:function(){return this.$refs.PlatformStoreTree.getCheckedNodes()}}]),r}(h["d"]);d=f["a"]([h["a"]],d);var v=d,p=v,S=r("4023"),b=Object(S["a"])(p,a,n,!1,null,null,null);t["default"]=b.exports}}]);