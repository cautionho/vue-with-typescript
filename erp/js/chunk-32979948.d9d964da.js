(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32979948"],{1051:function(e,t,a){"use strict";var n=a("63b4"),o=a.n(n);o.a},"63b4":function(e,t,a){},"79ed":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{staticClass:"Email-Bind-Store-Tree",attrs:{title:"绑定店铺",width:700},on:{"on-cancel":e.CancelModal},model:{value:e.BindStoreModal,callback:function(t){e.BindStoreModal=t},expression:"BindStoreModal"}},[a("PlatformStoreTree",{ref:"PlatformStoreTree"}),a("footer",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.Validate}},[e._v("提交")]),a("Button",{on:{click:e.CancelModal}},[e._v("取消")])],1)],1)},o=[],i=(a("d9b9"),a("0a9c"),a("76bb"),a("6bf8"),a("e24e")),r=a("3231"),s=a("064d"),l=a("46d7"),c=a("631e"),d=a("4a81"),u=a("d11d"),f=a("4606"),h=function(e){Object(l["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.BindStoreModal=!1,e.EmailId=0,e}return Object(s["a"])(a,[{key:"Trigger",value:function(e){this.$set(this,"BindStoreModal",!0),this.$set(this,"EmailId",e),this.GetBinded(e)}},{key:"GetBinded",value:function(e){var t=this;this.$UI.Loading.Show(),this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:this.$Api.GetBindingStore,Login:!0},Data:e,Callback:function(e){t.$UI.Loading.Hide(),e.IsSuccess?t.$refs.PlatformStoreTree.Trigger(e.Data.Data.map((function(e){return"".concat(e.Platform,"-").concat(e.StoreId)})).join(",")):t.$Request.Error(e)}})}},{key:"Validate",value:function(){var e=this;this.$UI.Loading.Show();var t=this.$refs.PlatformStoreTree.GetSelected(),a=[];if(t.length){var n,o=Object(i["a"])(t);try{for(o.s();!(n=o.n()).done;){var r=n.value;console.log(r),a.push(new f["a"].BindStore(this.EmailId,r.platform,r.value))}}catch(s){o.e(s)}finally{o.f()}}else a.push(new f["a"].BindStore);this.$Request.Post({Server:this.$Server.CustomerService,Api:{Address:this.$Api.BindingStore,Login:!0},Data:a,Callback:function(t){e.$UI.Loading.Hide(),t.IsSuccess?(e.$UI.Tips.Floating("success","绑定成功"),e.CancelModal()):e.$Request.Error(t)}})}},{key:"CancelModal",value:function(){this.$set(this,"BindStoreModal",!1),this.$set(this,"EmailId",0)}}]),a}(u["d"]);h=d["a"]([Object(u["a"])({name:"BindStore",components:{PlatformStoreTree:function(){return a.e("chunk-2d0f04b0").then(a.bind(null,"9c6f"))}}})],h);var S=h,v=S,p=(a("1051"),a("4023")),b=Object(p["a"])(v,n,o,!1,null,null,null);t["default"]=b.exports}}]);